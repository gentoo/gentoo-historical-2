diff -ur coda-5.3.19.orig/coda-src/scripts/venus.init.in coda-5.3.19/coda-src/scripts/venus.init.in
--- coda-5.3.19.orig/coda-src/scripts/venus.init.in	Wed Jun  6 09:38:58 2001
+++ coda-5.3.19/coda-src/scripts/venus.init.in	Sun Jul 14 10:32:55 2002
@@ -1,4 +1,5 @@
-#!/bin/sh
+#!/sbin/runscript
+#Patched to gentoo-style by Greg Briggs, <gb006k@mail.rochester.edu> on 14-Jul-2002
 #
 # skeleton      Example file to build /etc/init.d scripts.
 #
@@ -10,66 +11,65 @@
 # chkconfig: 345 97 01
 # description: The Coda cache manager.
 
-prefix=@prefix@
-exec_prefix=@exec_prefix@
+opts="${opts} hardstop"
 
-PATH=/sbin:/usr/sbin:/usr/local/sbin:$PATH
-export PATH
+venusinit() {
+	prefix=@prefix@
+	exec_prefix=@exec_prefix@
 
-# defaults
-pid_file=/usr/coda/venus.cache/pid
+	PATH=/sbin:/usr/sbin:/usr/local/sbin:$PATH
+	export PATH
 
-# overridden from the venus.conf
-[ -f @sysconfdir@/venus.conf ] && . @sysconfdir@/venus.conf
-
-[ -f @sbindir@/venus ] || exit 0
-
-echon() {
-    if [ "`echo -n`" ] ; then
-        echo "$@"\c
-    else
-        echo -n "$@"
-    fi
+	# defaults
+	pid_file=/usr/coda/venus.cache/pid
+
+	# overridden from the venus.conf
+	[ -f @sysconfdir@/venus.conf ] && . @sysconfdir@/venus.conf
+
+	[ -f @sbindir@/venus ] || exit 0
+
+	outputtty=/dev/tty11
 }
 
+depend() {
+	need net localmount
+	provide codaclient
+}
 
-# See how we were called.
-case "$1" in
-  start)
-	echon "Starting venus: "
+start() {
+	venusinit
+	ebegin "Starting Coda Venus; output on $outputtty"
 	if [ -f $pid_file ]; then
-		echo "$pid_file exists, venus already running?."
+		ewarn "$pid_file exists, venus already running?."
 	fi
 	[ -d /var/lock/subsys ] && touch /var/lock/subsys/venus.init
-	@sbindir@/venus &
-	echo "done."
-    ;;
-  stop)
-	echon "Shutting down venus: "
+	#send error to /dev/null for people who compiled coda support in directly
+	modprobe coda 2>/dev/null
+	@sbindir@/venus &>$outputtty &
+	eend $?
+}
+
+stop()  {
+	venusinit
+	ebegin "Shutting down Coda Venus"
 	if [ -f $pid_file ]; then
 		kill -TERM `cat $pid_file`
 		umount /coda
 	fi
 	rm -f $pid_file
 	[ -d /var/lock/subsys ] && rm -f /var/lock/subsys/venus.init
-	echo "done."
-    ;;
-  hardstop)
-	echon "Killing venus: "
+	rmmod coda 2>/dev/null
+	eend 0
+}
+
+hardstop() {
+	venusinit
+	ebegin "Killing Coda Venus"
 	if [ -f $pid_file ]; then
 		kill -9 `cat $pid_file`
 		umount /coda
 	fi
 	rm -f $pid_file
-	echo "done."
-    ;;
-    restart|force-reload)
-	echo "$1 not available"
-    ;;
-    *)
-	echo "Usage: $0 {start|stop|hardstop}"
-	exit 1
-    ;;
-esac
-
-exit 0
+	rmmod coda 2>/dev/null
+	eend 0
+}
