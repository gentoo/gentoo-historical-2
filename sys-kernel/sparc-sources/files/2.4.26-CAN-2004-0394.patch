--- linux/kernel/panic.c	Tue Mar 30 15:37:18 2004
+++ linux/kernel/panic.c	Mon May 17 18:44:01 2004
@@ -51,7 +51,7 @@
 
 	bust_spinlocks(1);
 	va_start(args, fmt);
-	vsprintf(buf, fmt, args);
+	vsnprintf(buf, sizeof(buf), fmt, args);
 	va_end(args);
 	printk(KERN_EMERG "Kernel panic: %s\n",buf);
 	if (in_interrupt())
