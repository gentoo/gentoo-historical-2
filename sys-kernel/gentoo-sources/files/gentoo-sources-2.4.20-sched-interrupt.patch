--- linux-2.4.20-gentoo-r6/kernel/sched.c	2003-09-10 23:36:03.000000000 +0100
+++ linux-2.4.20-gentoo-r7/kernel/sched.c	2003-09-24 20:00:09.000000000 +0100
@@ -1138,8 +1138,11 @@
 	list_t *queue;
 	int idx;
  	if (unlikely(in_interrupt()))
- 		BUG();
-
+	{
+		printk(KERN_ERR "Scheduling in an interrupt: killing scheduler\n");
+		dump_stack();
+ 		return;
+	}
 
 need_resched:
  	preempt_disable();
