--- linux-2.4.19-gentoo-r10/drivers/char/drm/i810_dma.c	2002-11-16 01:41:14.000000000 -0600
+++ linux-2.4.19-gentoo-r10/drivers/char/drm/i810_dma.c.new	2002-12-08 16:13:53.000000000 -0600
@@ -229,11 +229,11 @@
 #endif
 #if LINUX_VERSION_CODE < 0x020399
         	retcode = do_munmap((unsigned long)buf_priv->virtual,
-				    (size_t) buf->total);
+				    (size_t) buf->total,1);
 #else
         	retcode = do_munmap(current->mm,
 				    (unsigned long)buf_priv->virtual,
-				    (size_t) buf->total);
+				    (size_t) buf->total,1);
 #endif
 #if LINUX_VERSION_CODE <= 0x020402
 		up( &current->mm->mmap_sem );
--- linux-2.4.19-gentoo-r10/drivers/char/drm-4.0/i810_dma.c	2002-11-16 01:41:14.000000000 -0600
+++ linux-2.4.19-gentoo-r10/drivers/char/drm-4.0/i810_dma.c.new	2002-12-08 16:14:18.000000000 -0600
@@ -227,11 +227,11 @@
 		down_write(&current->mm->mmap_sem);
 #if LINUX_VERSION_CODE < 0x020399
         	retcode = do_munmap((unsigned long)buf_priv->virtual, 
-				    (size_t) buf->total);
+				    (size_t) buf->total,1);
 #else
         	retcode = do_munmap(current->mm, 
 				    (unsigned long)buf_priv->virtual, 
-				    (size_t) buf->total);
+				    (size_t) buf->total,1);
 #endif
    		up_write(&current->mm->mmap_sem);
 	}
