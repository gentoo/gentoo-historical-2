--- linux-2.6.11.orig/include/asm-ppc/spinlock.h	2005-10-28 04:42:11.000000000 +0000
+++ linux-2.6.11/include/asm-ppc/spinlock.h	2005-10-28 04:44:55.000000000 +0000
@@ -19,7 +19,17 @@
 } spinlock_t;
 
 #ifndef __KERNEL__
-#define SPIN_LOCK_UNLOCKED	(spinlock_t) { 0 }
+
+typedef struct {
+	volatile signed int lock;
+#ifdef CONFIG_PREEMPT
+	unsigned int break_lock;
+#endif
+} rwlock_t;
+
+#define RW_LOCK_UNLOCKED (rwlock_t) { 0 }
+#define SPIN_LOCK_UNLOCKED (spinlock_t) { 0 }
+
 #endif
 
 #ifdef __KERNEL__
