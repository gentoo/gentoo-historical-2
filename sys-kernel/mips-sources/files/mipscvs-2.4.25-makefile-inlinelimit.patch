--- arch/mips/Makefile.orig	2004-02-22 16:37:51.641781016 -0500
+++ arch/mips/Makefile	2004-02-22 16:38:27.264365560 -0500
@@ -746,5 +746,6 @@ archmrproper:
 archdep:
 	if [ ! -f $(TOPDIR)/include/asm-$(ARCH)/offset.h ]; then \
 		touch $(TOPDIR)/include/asm-$(ARCH)/offset.h; \
+		$(MAKE) -C arch/mips/tools clean; \
 	fi;
 	@$(MAKEBOOT) dep
--- arch/mips64/Makefile.orig	2004-02-22 16:38:07.553362088 -0500
+++ arch/mips64/Makefile	2004-02-22 16:41:35.328775424 -0500
@@ -26,6 +26,9 @@ ifdef CONFIG_CROSSCOMPILE
 CROSS_COMPILE	= $(tool-prefix)
 endif
 
+check_gcc = $(shell if $(CC) $(1) -S -o /dev/null -xc /dev/null > /dev/null 2>&1; then echo "$(1)"; else echo "$(2)"; fi)
+check_gas = $(shell if $(CC) $(1) -Wa,-Z -c -o /dev/null -xassembler /dev/null > /dev/null 2>&1; then echo "$(1)"; else echo "$(2)"; fi)
+
 #
 # The ELF GCC uses -G 0 -mabicalls -fpic as default.  We don't need PIC
 # code in the kernel since it only slows down the whole thing.  For the
@@ -49,9 +52,6 @@ GCCFLAGS	+= -mno-sched-prolog -fno-omit-
 endif
 endif
 
-check_gcc = $(shell if $(CC) $(1) -S -o /dev/null -xc /dev/null > /dev/null 2>&1; then echo "$(1)"; else echo "$(2)"; fi)
-check_gas = $(shell if $(CC) $(1) -Wa,-Z -c -o /dev/null -xassembler /dev/null > /dev/null 2>&1; then echo "$(1)"; else echo "$(2)"; fi)
-
 #
 # Use: $(call set_gccflags,<cpu0>,<isa0>,<cpu1>,<isa1>)
 #
@@ -402,5 +402,6 @@ archmrproper:
 archdep:
 	if [ ! -f $(TOPDIR)/include/asm-$(ARCH)/offset.h ]; then \
 		touch $(TOPDIR)/include/asm-$(ARCH)/offset.h; \
+		$(MAKE) -C arch/mips/tools clean; \
 	fi;
 	@$(MAKEBOOT) dep
