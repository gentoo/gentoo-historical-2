Index: drivers/scsi/sgiwd93.c
===================================================================
RCS file: /home/cvs/linux/drivers/scsi/sgiwd93.c,v
retrieving revision 1.28.2.8
diff -u -r1.28.2.8 sgiwd93.c
--- drivers/scsi/sgiwd93.c	14 Aug 2003 15:32:13 -0000	1.28.2.8
+++ drivers/scsi/sgiwd93.c	20 Aug 2003 16:08:59 -0000
@@ -92,7 +92,7 @@
 	unsigned long physaddr;
 	unsigned long count;
 	
-	physaddr = virt_to_bus(addr);
+	physaddr = PHYSADDR(addr);
 	while (len) {
 		/*
 		 * even cntinfo could be up to 16383, without
@@ -141,7 +141,7 @@
 	DPRINTK(" HPCGO\n");
 
 	/* Start up the HPC. */
-	hregs->ndptr = virt_to_bus(hdata->dma_bounce_buffer);
+	hregs->ndptr = PHYSADDR(hdata->dma_bounce_buffer);
 	if (datainp) {
 		dma_cache_inv((unsigned long) cmd->SCp.ptr,
 		              cmd->SCp.this_residual);
@@ -197,13 +197,13 @@
 	start = (unsigned long) buf;
 	end = start + PAGE_SIZE;
 	while (start < end) {
-		hcp->desc.pnext = virt_to_bus(hcp + 1);
+		hcp->desc.pnext = PHYSADDR(hcp + 1);
 		hcp->desc.cntinfo = HPCDMA_EOX;
 		hcp++;
 		start += sizeof(struct hpc_chunk);
 	};
 	hcp--;
-	hcp->desc.pnext = virt_to_bus(buf);
+	hcp->desc.pnext = PHYSADDR(buf);
 
 	/* Force flush to memory */
 	dma_cache_wback_inv((unsigned long) buf, PAGE_SIZE);
