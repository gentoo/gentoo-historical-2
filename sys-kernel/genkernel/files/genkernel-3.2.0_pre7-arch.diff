diff -urN genkernel-3.2.0_pre7.orig/gen_compile.sh genkernel-3.2.0_pre7/gen_compile.sh
--- genkernel-3.2.0_pre7.orig/gen_compile.sh	2005-06-16 14:23:06.000000000 -0400
+++ genkernel-3.2.0_pre7/gen_compile.sh	2005-06-17 14:02:31.000000000 -0400
@@ -689,7 +689,13 @@
 		print_info 1 'udev: >> Compiling...'
 
 		ln -snf "${KERNEL_DIR}" klibc/linux || gen_die "Could not link to ${KERNEL_DIR}"
-		compile_generic "ARCH=${ARCH} KERNEL_DIR=$KERNEL_DIR USE_KLIBC=true USE_LOG=false DEBUG=false udevdir=/dev all etc/udev/udev.conf" utils
+		if [ "${ARCH}" = 'um' ]
+		then
+			compile_generic "ARCH=um KERNEL_DIR=$KERNEL_DIR USE_KLIBC=true USE_LOG=false DEBUG=false udevdir=/dev all etc/udev/udev.conf" utils
+		else
+			compile_generic "KERNEL_DIR=$KERNEL_DIR USE_KLIBC=true USE_LOG=false DEBUG=false udevdir=/dev all etc/udev/udev.conf" utils
+		fi
+
 
 		strip udev || gen_die 'Failed to strip the udev binary!'
 
