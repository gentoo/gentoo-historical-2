diff -Naru a/fs/ext2/dir.c b/fs/ext2/dir.c
--- a/fs/ext2/dir.c	2005-04-29 17:11:20 -07:00
+++ b/fs/ext2/dir.c	2005-04-29 17:11:20 -07:00
@@ -592,6 +592,7 @@
 		goto fail;
 	}
 	kaddr = kmap_atomic(page, KM_USER0);
+       memset(kaddr, 0, chunk_size);
 	de = (struct ext2_dir_entry_2 *)kaddr;
 	de->name_len = 1;
 	de->rec_len = cpu_to_le16(EXT2_DIR_REC_LEN(1));
# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2005/03/25 17:50:01-08:00 mlafon@arkoon.net 
#   [PATCH] Suspected information leak (mem pages) in ext2
#   
#   From: "Mathieu Lafon" <mlafon@arkoon.net>
#   
#   I think I have discovered a potential security problem in ext2: when a
#   new directory is created, the ext2 block written to disk is not
#   initialized.
#   
#   Included is a proposed patch for Linux 2.6 (ext2_make_empty() function):
#   
#   CAN-2005-0400 is assigned to this issue.
#   
#   Signed-off-by: Chris Wright <chrisw@osdl.org>
# 
# fs/ext2/dir.c
#   2005/03/16 10:17:01-08:00 mlafon@arkoon.net +1 -0
#   Suspected information leak (mem pages) in ext2
# 
