--- src/libopensc/reader-pcsc.c	2006-05-10 01:15:17.000000000 -0500
+++ reader-pcsc-2.c	2007-03-06 00:13:22.731527485 -0600
@@ -53,7 +53,6 @@
 #undef SCARD_PROTOCOL_ANY
 #define SCARD_PROTOCOL_ANY (SCARD_PROTOCOL_T0 | SCARD_PROTOCOL_T1)
 #ifdef _WIN32
-#define SCARD_SCOPE_GLOBAL SCARD_SCOPE_USER
 
 /* Error printing */
 #define PCSC_ERROR(ctx, desc, rv) sc_error(ctx, desc ": %lx\n", rv);
@@ -63,6 +62,10 @@
 #define PCSC_ERROR(ctx, desc, rv) sc_error(ctx, desc ": %s\n", pcsc_stringify_error(rv));
 #endif
 
+#ifndef SCARD_SCOPE_GLOBAL
+#define SCARD_SCOPE_GLOBAL SCARD_SCOPE_USER
+#endif
+
 /* Utility for handling big endian IOCTL codes. */
 #define dw2i_be(a, x) ((((((a[x] << 8) + a[x+1]) << 8) + a[x+2]) << 8) + a[x+3])
 
