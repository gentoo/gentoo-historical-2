--- Makefile.in	2003-11-27 15:46:46.887752568 +0000
+++ Makefile.in	2003-11-27 16:14:17.325847840 +0000
@@ -7,7 +7,7 @@
 
 INCLUDE=@DRIVER_INCDIR@  ${OTHERINCDIR} -I.
 
-CFLAGS=-O0 -Wall -g ${INCLUDE} ${OTHER_CFLAGS}
+CFLAGS=-O0 -Wall -g ${OTHER_CFLAGS}
 
 LIBOBJS=mcal.o datetime.o lex.ical_yy.o icalroutines.o cal_misc.o $(DRIVER_LIBS)
 ALLOBJS=${LIBOBJS} tester.o
@@ -17,6 +17,9 @@
 LIBCAL=libmcal.a
 LIBCAL_SO=libmcal.so
 
+%.o: %.c
+	gcc $(CFLAGS) -fPIC $(INCLUDE) -c -o $@ $<
+
 all: libmcal.a libmcal.so
 
 install: libmcal.a libmcal.so
@@ -38,7 +41,7 @@
 
 libmcal.so: $(LIBOBJS)
 	rm -f $(LIBCAL_SO)
-	gcc $(CFLAGS) -shared -o $(LIBCAL_SO) $(LIBOBJS)
+	gcc $(CFLAGS) $(INCLUDE) -shared -o $(LIBCAL_SO) $(LIBOBJS)
 
 lex.ical_yy.c: icalscanner.lex
 	$(FLEX) $<
