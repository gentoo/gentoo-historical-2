--- configure.ac.orig	2010-09-20 23:15:36.692289201 +0200
+++ configure.ac	2010-09-20 23:26:30.159014141 +0200
@@ -171,8 +171,18 @@
 # GTK Doc 
 ###########################
 
+AC_ARG_ENABLE([doc],
+	AC_HELP_STRING([--disable-doc], [Disable doc generation]),
+	[enable_doc=$enableval], enable_doc=auto)
+AM_CONDITIONAL([WANT_DOC], [test "x$enable_doc" != "xno"])
+
 GTK_DOC_CHECK([1.4])
+if test "x$enable_doc" != "xno" ; then
 GNOME_DOC_INIT
+else
+# The initialisation is still needed for certain conditionals to be defined, just make it not output any error
+GNOME_DOC_INIT(,,[:])
+fi
 GNOME_COMPILE_WARNINGS
 
 ##############################
--- Makefile.am.orig	2010-09-20 23:12:10.442903362 +0200
+++ Makefile.am	2010-09-20 23:27:12.557785756 +0200
@@ -5,7 +5,10 @@
 	bindings \
 	examples \
-	tests \
-	docs
+	tests
+
+if WANT_DOC
+SUBDIRS += docs
+endif
 
 EXTRA_DIST = \
 	COPYING.LGPL.2.1 \
