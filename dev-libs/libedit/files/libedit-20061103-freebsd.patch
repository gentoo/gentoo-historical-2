Index: work/netbsd-cvs/sys.h
===================================================================
--- work.orig/netbsd-cvs/sys.h
+++ work/netbsd-cvs/sys.h
@@ -44,6 +44,11 @@
 #include <sys/cdefs.h>
 #endif
 
+#ifdef __FreeBSD__
+# undef __weak_reference
+# define __weak_reference(x) __attribute__((__weakref__))
+#endif
+
 #if !defined(__attribute__) && (defined(__cplusplus) || !defined(__GNUC__)  || __GNUC__ == 2 && __GNUC_MINOR__ < 8)
 # define __attribute__(A)
 #endif
