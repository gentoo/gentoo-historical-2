Index: mpn/ia64/popcount.asm
===================================================================
RCS file: /home/cvsfiles/gmp42/mpn/ia64/popcount.asm,v
retrieving revision 1.2
retrieving revision 1.3
diff -p -2 -r1.2 -r1.3
*** mpn/ia64/popcount.asm	20 Mar 2006 14:00:18 -0000	1.2
--- mpn/ia64/popcount.asm	19 May 2006 22:24:32 -0000	1.3
*************** dnl  to write mpn_hamdist with the same 
*** 26,29 ****
--- 26,33 ----
  include(`../config.m4')
  
+ define(ABI32,
+ m4_assert_onearg()
+ `ifdef(`HAVE_ABI_32',`$1')')
+ 
  C INPUT PARAMETERS
  C sp = r32
*************** PROLOGUE(mpn_popcount)
*** 34,39 ****
  	.prologue
  	.save	ar.lc, r2
! 		mov	r2 = ar.lc
  	.body
  		and	r22 = 3, r33
  		shr.u	r23 = r33, 2	;;
--- 38,47 ----
  	.prologue
  	.save	ar.lc, r2
! ABI32(`		addp4	r32 = 0, r32')	C M  src extend
! 		mov	r2 = ar.lc	C I0	
! ABI32(`		zxt4	r33 = r33')	C I1  size extend
! 		;;
  	.body
+ 
  		and	r22 = 3, r33
  		shr.u	r23 = r33, 2	;;
