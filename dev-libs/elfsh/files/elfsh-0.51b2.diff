--- Makefile.orig	2003-08-13 09:31:55.000000000 -0400
+++ Makefile	2003-08-15 18:12:36.000000000 -0400
@@ -5,12 +5,14 @@
 ## Last update Sun May 25 18:12:43 2003 mayhem
 ##
 
+DESTDIR = /
+PREFIX  = $(DESTDIR)/usr
 RM	= rm -f
 ETAGS   = etags
-MODPATH = /usr/share/elfsh/
-BINPATH = /usr/bin
-LIBPATH = /usr/lib/
-INCPATH = /usr/include/
+MODPATH = $(PREFIX)/share/elfsh
+BINPATH = $(PREFIX)/bin
+LIBPATH = $(PREFIX)/lib
+INCPATH = $(PREFIX)/include
 
 all	:
 	@echo 'Builting libelfsh...'
@@ -32,10 +34,11 @@
 	#$(MAKE) -s tags
 
 install	: mod_install
+	mkdir -p $(MODPATH) $(BINPATH) $(LIBPATH) $(INCPATH) || true
 	@cp vm/elfsh $(BINPATH)/
 	@cp libelfsh/libelfsh.a libelfsh/libelfsh.so $(LIBPATH)
 	@cp libelfsh/include/libelfsh*.h $(INCPATH)
-	@chmod 755 $(BINPATH)/elfsh $(LIBPATH)libelfsh.so $(LIBPATH)libelfsh.a $(INCPATH)libelfsh*.h
+	@chmod 755 $(BINPATH)/elfsh $(LIBPATH)/libelfsh.so $(LIBPATH)/libelfsh.a $(INCPATH)/libelfsh*.h
 	@echo 'ELFsh and Libelfsh installed successfully .'
 
 mod_install:
@@ -44,9 +47,9 @@
 	@chmod -R 755 $(MODPATH)
 
 uninstall:
-	rm -f /usr/bin/elfsh
-	rm -f /usr/lib/libelfsh*
-	rm -f /usr/include/libelfsh*.h
+	rm -f $(BINPATH)/elfsh
+	rm -f $(LIBPATH)/libelfsh*
+	rm -f $(INCPATH)/libelfsh*.h
 	rm -fr $(MODPATH)
 	@echo 'ELFsh and Libelfsh uninstalled successfully'
 
