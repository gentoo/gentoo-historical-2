--- libiconv-1.9.2/src/Makefile.in	2005-04-30 12:33:34.000000000 +0200
+++ libiconv-1.9.2.az/src/Makefile.in	2005-04-30 12:43:57.000000000 +0200
@@ -52,7 +52,7 @@
 # i.e. during "make install". The intermediate 'iconv' executable is built
 # without internationalization and not linked with libintl.
 
-all : iconv_no_i18n iconv.@OBJEXT@
+all : iconv_no_i18n iconv.@OBJEXT@ iconv
 	test `ls -ld . | sed -e 's/^d\(.........\).*/\1/'` = rwxrwxrwx || chmod 777 .
 
 # This is the temporary iconv executable, without internationalization.
@@ -77,6 +77,12 @@
 @SET_RELOCATABLE@
 iconv_LDFLAGS = `if test -n '$(RELOCATABLE_LDFLAGS)'; then $(RELOCATABLE_LDFLAGS) $(bindir); fi`
 
+iconv: iconv.@OBJEXT@
+	case "@host_os@" in \
+	 hpux*) $(CC) $(LDFLAGS) $(iconv_LDFLAGS) iconv.@OBJEXT@ ../srclib/libicrt.a -L../lib -liconv @LIBINTL@ -o iconv;; \
+	 *) $(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(iconv_LDFLAGS) iconv.@OBJEXT@ ../srclib/libicrt.a ../lib/libiconv.la @LTLIBINTL@ -o iconv;; \
+	esac
+
 # During "make install", we can build the final iconv executable.
 # On HP-UX, in order to ensure that the new libiconv.sl will override the old
 # one that is hardcoded in libintl.sl, we need to mention libiconv.sl before
@@ -90,10 +96,6 @@
 	if [ ! -d $(DESTDIR)$(prefix) ] ; then $(mkinstalldirs) $(DESTDIR)$(prefix) ; fi
 	if [ ! -d $(DESTDIR)$(exec_prefix) ] ; then $(mkinstalldirs) $(DESTDIR)$(exec_prefix) ; fi
 	if [ ! -d $(DESTDIR)$(bindir) ] ; then $(mkinstalldirs) $(DESTDIR)$(bindir) ; fi
-	case "@host_os@" in \
-	  hpux*) $(CC) $(LDFLAGS) $(iconv_LDFLAGS) iconv.@OBJEXT@ ../srclib/libicrt.a -L$(libdir) -liconv @LIBINTL@ -o iconv;; \
-	  *) $(LIBTOOL_LINK) $(CC) $(LDFLAGS) $(iconv_LDFLAGS) iconv.@OBJEXT@ ../srclib/libicrt.a $(DESTDIR)$(libdir)/libiconv.la @LTLIBINTL@ -o iconv;; \
-	esac
 	$(INSTALL_PROGRAM_ENV) $(LIBTOOL_INSTALL) $(INSTALL_PROGRAM) iconv $(DESTDIR)$(bindir)/iconv
 
 installdirs : force
