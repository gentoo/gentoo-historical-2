--- m4/as-intrinsics.m4-3.10	2006-05-19 22:13:26.000000000 +0200
+++ m4/as-intrinsics.m4	2006-02-15 22:02:15.000000000 +0100
@@ -4,7 +4,7 @@
 
 dnl David Schleef <ds@schleef.org>
 
-dnl $Id: liboil-0.3.10-sse2revert.diff,v 1.1 2006/12/11 10:48:02 zaheerm Exp $
+dnl $Id: liboil-0.3.10-sse2revert.diff,v 1.1 2006/12/11 10:48:02 zaheerm Exp $
 
 dnl AS_MMX_INTRINSICS(CFLAGS, ACTION-IF-ACCEPTED, [ACTION-IF-NOT-ACCEPTED])
 dnl Tries to compile with the given CFLAGS.
@@ -69,7 +69,7 @@
 
   save_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -msse2"
-  AC_TRY_COMPILE([#include <emmintrin.h>], [__m128i a; a = _mm_setzero_si128(); a = _mm_srli_epi16(a,8)], [flag_ok=yes], [flag_ok=no])
+  AC_TRY_COMPILE([#include <emmintrin.h>], [__m128d a; a = _mm_setzero_pd(); a = _mm_srli_epi16(a,8)], [flag_ok=yes], [flag_ok=no])
   CFLAGS="$save_CFLAGS"
 
   $1="-msse2"

