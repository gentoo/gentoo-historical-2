--- emu64/Makefile	2005-03-21 19:24:41.000000000 +0100
+++ emu64/Makefile	2005-03-21 19:21:52.000000000 +0100
@@ -87,46 +87,49 @@
 PREFIX		=$(shell grep WITH_HOME config.h | cut -d '"' -f 2)
 SHARE		="$(PREFIX)share/mupen64/"
 
+GTK_CFLAGS	= `pkg-config --cflags gtk+-2.0` -D_GTK2
+GTK_LIBS	= `pkg-config --libs gtk+-2.0`
+
 all:	mupen64
 
 main/main.o:	main/main.c
 		$(CC) $(CFLAGS) -c -o $@ $<
 
 main/main_gtk.o:	main/main_gtk.c
-			$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+			$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/main_gtk.o:	main/gui_gtk/main_gtk.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/translate.o:	main/gui_gtk/translate.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/messagebox.o:	main/gui_gtk/messagebox.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/aboutdialog.o:	main/gui_gtk/aboutdialog.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/configdialog.o:	main/gui_gtk/configdialog.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/support.o:		main/gui_gtk/support.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/rombrowser.o:	main/gui_gtk/rombrowser.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/romproperties.o:	main/gui_gtk/romproperties.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/config.o:		main/gui_gtk/config.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/dirbrowser.o:	main/gui_gtk/dirbrowser.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/gui_gtk/vcrcomp_dialog.o:	main/gui_gtk/vcrcomp_dialog.c
-				$(CC) $(CFLAGS) -c -o $@ $< `gtk-config --cflags`
+				$(CC) $(CFLAGS) -c -o $@ $< $(GTK_CFLAGS)
 
 main/vcr_compress.o:		main/vcr_compress.cpp
 				$(CXX) $(CXXFLAGS) -c -o $@ $< `avifile-config --cflags`
@@ -138,13 +141,13 @@
 ifneq ("$(shell grep VCR config.h)","\#define VCR_SUPPORT 1")
 
 mupen64:	$(OBJ) $(OBJ_X86) $(OBJ_GTK_GUI)
-		$(CC) $^ $(CFLAGS) $(LIB) -Wl,-export-dynamic `gtk-config --libs` -L/usr/X11R6/lib -lSDL -lGL -lpthread -ldl -o $@
+		$(CC) $^ $(CFLAGS) $(LIB) -Wl,-export-dynamic $(GTK_LIBS) -L/usr/X11R6/lib -lSDL -lGL -lpthread -ldl -o $@
 		strip --strip-all $@
 
 else
 
 mupen64:	$(OBJ) $(OBJ_X86) $(OBJ_GTK_GUI) $(OBJ_VCR)
-		$(CXX) $^ $(CFLAGS) $(LIB) -Wl,-export-dynamic `gtk-config --libs` `avifile-config --libs` -L/usr/X11R6/lib -lSDL -lGL -lpthread -ldl -o $@
+		$(CXX) $^ $(CFLAGS) $(LIB) -Wl,-export-dynamic $(GTK_LIBS) `avifile-config --libs` -L/usr/X11R6/lib -lSDL -lGL -lpthread -ldl -o $@
 		strip --strip-all $@
 endif
 
diff -ru work/hack_azi_rsp_hle/Makefile work.new/hack_azi_rsp_hle/Makefile
--- hack_azi_rsp_hle/Makefile	2005-03-21 19:25:04.000000000 +0100
+++ hack_azi_rsp_hle/Makefile	2005-03-21 19:28:01.000000000 +0100
@@ -1,7 +1,7 @@
 CC = gcc
-CFLAGS = -fPIC -DUSE_GTK `gtk-config --cflags`
+CFLAGS = -fPIC -DUSE_GTK `pkg-config gtk+-2.0 --cflags`
 CXX = g++
-CXXFLAGS = -fPIC -DUSE_GTK `gtk-config --cflags`
+CXXFLAGS = -fPIC -DUSE_GTK `pkg-config gtk+-2.0 --cflags`
 LD = g++
 LDFLAGS =
 
@@ -11,7 +11,7 @@
 all:	$(TARGET) instruction
 
 $(TARGET): $(OBJECTS)
-	$(LD) -shared -Wl,-Bsymbolic `gtk-config --libs` $(LDFLAGS) -o $@ $(OBJECTS)
+	$(LD) -shared -Wl,-Bsymbolic `pkg-config gtk+-2.0 --libs` $(LDFLAGS) -o $@ $(OBJECTS)
 	strip --strip-all $@
 
 instruction:
diff -ru work/mupen64_input/Makefile work.new/mupen64_input/Makefile
--- mupen64_input/Makefile	2005-03-21 19:24:41.000000000 +0100
+++ mupen64_input/Makefile	2005-03-21 19:28:25.000000000 +0100
@@ -8,7 +8,7 @@
 
 
 mupen64_input.so:	$(OBJ)
-			$(CC) $(OBJ) -Wl,-Bsymbolic -shared -lSDL `gtk-config --cflags --libs` -o $@
+			$(CC) $(OBJ) -Wl,-Bsymbolic -shared -lSDL `pkg-config gtk+-2.0 --cflags --libs` -o $@
 			strip --strip-all $@
 
 instruction:
diff -ru work/mupen64_sound/Makefile work.new/mupen64_sound/Makefile
--- mupen64_sound/Makefile	2005-03-21 19:25:04.000000000 +0100
+++ mupen64_sound/Makefile	2005-03-21 19:28:58.000000000 +0100
@@ -1,7 +1,7 @@
 CC = gcc
-CFLAGS = -fPIC `gtk-config --cflags` -DUSE_GTK
+CFLAGS = -fPIC `pkg-config gtk+-2.0 --cflags` -DUSE_GTK
 LD = gcc
-LDFLAGS = -shared -Wl,-Bsymbolic `gtk-config --libs` -lpthread
+LDFLAGS = -shared -Wl,-Bsymbolic `pkg-config gtk+-2.0 --libs` -lpthread
 
 OBJECTS	=	main.o
 
