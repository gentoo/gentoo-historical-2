diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/avm_fritz.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/avm_fritz.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/avm_fritz.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/avm_fritz.c	2006-12-20 21:43:48.000000000 +0200
@@ -8,7 +8,10 @@
  * This file is (c) under GNU PUBLIC LICENSE
  *
  */
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/pci.h>
 #ifdef NEW_ISAPNP
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/core.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/core.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/core.c	2006-08-08 12:18:44.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/core.c	2006-12-20 21:43:07.000000000 +0200
@@ -8,7 +8,10 @@
 
 #include <linux/types.h>
 #include <linux/stddef.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include "core.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/dsp_core.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/dsp_core.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/dsp_core.c	2006-09-13 16:58:02.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/dsp_core.c	2006-12-20 21:43:59.000000000 +0200
@@ -172,7 +172,10 @@
 const char *dsp_revision = "$Revision: 1.2 $";
 
 #include <linux/delay.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/vmalloc.h>
 #include "layer1.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/dtmf.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/dtmf.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/dtmf.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/dtmf.c	2006-12-20 21:43:33.000000000 +0200
@@ -15,7 +15,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include "layer1.h"
 #include "helper.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/faxl3.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/faxl3.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/faxl3.c	2006-03-23 15:56:11.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/faxl3.c	2006-12-20 21:44:37.000000000 +0200
@@ -11,7 +11,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include "layer1.h"
 #include "m_capi.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfc_multi.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfc_multi.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfc_multi.c	2006-10-09 15:51:33.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfc_multi.c	2006-12-20 21:44:46.000000000 +0200
@@ -93,7 +93,10 @@
 /* debug using register map (never use this, it will flood your system log) */
 //#define HFC_REGISTER_MAP
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfcs_mini.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfcs_mini.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfcs_mini.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfcs_mini.c	2006-12-20 21:45:02.000000000 +0200
@@ -49,7 +49,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <asm/timex.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfcs_usb.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfcs_usb.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/hfcs_usb.c	2006-09-04 16:32:14.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/hfcs_usb.c	2006-12-20 21:42:15.000000000 +0200
@@ -28,7 +28,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/usb.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/i4l_mISDN.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/i4l_mISDN.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/i4l_mISDN.c	2006-03-23 15:56:11.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/i4l_mISDN.c	2006-12-20 21:43:25.000000000 +0200
@@ -10,7 +10,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/isdnif.h>
 #include <linux/delay.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/l1oip.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/l1oip.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/l1oip.c	2006-03-23 15:56:11.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/l1oip.c	2006-12-20 21:41:42.000000000 +0200
@@ -207,7 +207,10 @@
 */
 
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/layer1.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/layer1.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/layer1.c	2006-10-09 15:51:33.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/layer1.c	2006-12-20 21:42:34.000000000 +0200
@@ -10,7 +10,10 @@
 
 static char *l1_revision = "$Revision: 1.2 $";
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include "layer1.h"
 #include "helper.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/loop.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/loop.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/loop.c	2006-03-23 15:56:11.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/loop.c	2006-12-20 21:42:25.000000000 +0200
@@ -25,7 +25,10 @@
 
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/memdbg.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/memdbg.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/memdbg.c	2006-03-07 14:21:06.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/memdbg.c	2006-12-20 21:42:05.000000000 +0200
@@ -1,5 +1,8 @@
 #include <linux/stddef.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/list.h>
 #include <linux/slab.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/netjet.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/netjet.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/netjet.c	2006-10-09 14:28:41.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/netjet.c	2006-12-20 21:43:40.000000000 +0200
@@ -7,7 +7,10 @@
  * Based on HiSax NETJet driver by Karsten Keil
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/sedl_fax.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/sedl_fax.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/sedl_fax.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/sedl_fax.c	2006-12-20 21:45:15.000000000 +0200
@@ -26,7 +26,10 @@
  * the firmware onto the card.
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/socket.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/socket.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/socket.c	2006-03-07 14:21:06.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/socket.c	2006-12-20 21:43:15.000000000 +0200
@@ -22,7 +22,10 @@
 
 
 #include <linux/vmalloc.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/in.h>
 #include <net/sock.h>
 
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/udevice.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/udevice.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/udevice.c	2006-11-02 11:40:53.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/udevice.c	2006-12-20 21:42:49.000000000 +0200
@@ -8,7 +8,10 @@
 #include <linux/stddef.h>
 #include <linux/poll.h>
 #include <linux/vmalloc.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/timer.h>
 #ifdef CONFIG_DEVFS_FS
 #include <linux/devfs_fs_kernel.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/w6692.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/w6692.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/w6692.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/w6692.c	2006-12-20 21:41:30.000000000 +0200
@@ -21,7 +21,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/x25_dte.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/x25_dte.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/x25_dte.c	2006-07-03 12:16:08.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/x25_dte.c	2006-12-20 21:44:28.000000000 +0200
@@ -12,7 +12,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include "x25_l3.h"
 #include "helper.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/x25_l3.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/x25_l3.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/x25_l3.c	2006-08-08 12:18:44.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/x25_l3.c	2006-12-20 21:42:56.000000000 +0200
@@ -12,7 +12,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include "x25_l3.h"
 #include "helper.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/xhfc_pci2pi.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/xhfc_pci2pi.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/xhfc_pci2pi.c	2006-03-23 13:39:23.000000000 +0200
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/xhfc_pci2pi.c	2006-12-20 21:44:10.000000000 +0200
@@ -21,7 +21,10 @@
  *
  */
 
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 #include "xhfc_su.h"
diff -Nru mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/xhfc_su.c mISDN-1_0_4/drivers/isdn/hardware/mISDN/xhfc_su.c
--- mISDN-1_0_4.orig/drivers/isdn/hardware/mISDN/xhfc_su.c	2006-09-13 16:58:02.000000000 +0300
+++ mISDN-1_0_4/drivers/isdn/hardware/mISDN/xhfc_su.c	2006-12-20 21:44:56.000000000 +0200
@@ -51,7 +51,10 @@
  */
  
 #include <linux/mISDNif.h>
-#include <linux/config.h>
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
+#	include <linux/config.h>
+#endif
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
