HOWTO upgrade from 2004.3 and 2004.3/lib64 to 2005.0

 1) emerge -v '>=sys-apps/portage-2.0.51-r9'
 2) emerge -v '>=sys-devel/gcc-config-1.3.9'
 3) emerge -v '>=sys-devel/distcc-2.18.3-r1'
 4) emerge unmerge linux26-headers
 5) emerge -v linux-headers
 6) emerge unmerge emul-linux-x86-glibc
 7) rm /lib32 /usr/lib32 /usr/X11R6/lib32
 8) mkdir /lib32 /usr/lib32 /usr/X11R6/lib32
 9) cp /emul/linux/x86/lib32/libsandbox.so /lib32
10) env-update
11) rm /etc/make.profile
12) ln -s /usr/portage/profiles/default-linux/amd64/2005.0 /etc/make.profile
-- Option 1: Recommended - compile your own glibc--
13a) cd /usr/tmp
13b) wget http://dev.gentoo.org/~eradicator/grp/amd64/2005.0/glibc-2.3.4.20040808-r1-lib32.tbz2
13c) lynx -source http://dev.gentoo.org/~eradicator/grp/amd64/2005.0/glibc-2.3.4.20040808-r1.tbz2-lib32.md5sum | md5sum -c -
13d) cd /
13e) tar xjf /usr/tmp/glibc-2.3.4.20040808-r1-lib32.tar.bz2
13d) emerge -O -v glibc
-- Option 2: Or if you want to use eradicator's prebuilt glibc (see note below first) --
13a) mkdir /usr/tmp/All
13b) cd /usr/tmp/All
13c) wget http://dev.gentoo.org/~eradicator/grp/amd64/2005.0/glibc-2.3.4.20040808-r1.tbz2
13d) lynx -source http://dev.gentoo.org/~eradicator/grp/amd64/2005.0/glibc-2.3.4.20040808-r1.tbz2.md5sum | md5sum -c -
13e) PKGDIR=/usr/tmp emerge -O -vk glibc
--
14) emerge -upv system
15) emerge -uv system

Notes:
The order is VERY important.

You MUST do every step after the profile switch (step 11) even if you 
already have that version (or later) installed.  The newer version of 
glibc is currently masked on 2005.0 because it hasn't been updated yet 
to build both 32bit and 64bit libs.  I hope to get this done in the next 
few days, but no promises yet.

Emerging glibc the second time is optional if you don't want to use my 
options.  It was made with gcc-3.4.3-r1:
CFLAGS="-O2 -pipe -fomit-frame-pointer"
USE: -build -debug +emul-linux-x86 -erandom -hardened +multilib +nls +nptl +pic -userlocales

hparker had some trouble with this binpkg, so it's probably best if you 
compile glibc on your own.

linux-headers is masked in the main package.mask still, so unmask it 
yourself. linux26-headers-2.6.8.1-r3 will probably work, but I noticed 
it doesn't get the headers in asm-i386/mach-*/, but my updated 
multilib.eclass method does for linux-headers.

USE=multilib is now required.  If you don't have it set, you won't be 
able to emerge anything, so please remove -multilib from your USE if you 
had it set.

You can remove /usr/tmp/All once you're done with it.
