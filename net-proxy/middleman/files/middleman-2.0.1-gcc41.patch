diff -Nru middleman-2.0.1.orig/src/forward.c middleman-2.0.1/src/forward.c
--- middleman-2.0.1.orig/src/forward.c	2004-03-12 00:27:16.000000000 +0200
+++ middleman-2.0.1/src/forward.c	2006-09-24 12:23:44.378288750 +0300
@@ -237,12 +237,12 @@
 	/* this proxy's address */
 	icppacket.hostaddr = 0;
 	if (connection->interface != NULL)
-		inet_pton(AF_INET, connection->interface, (struct addr_in *) &icppacket.hostaddr);
+		inet_pton(AF_INET, connection->interface, &icppacket.hostaddr);
 
 	/* client's address */
 	memset(icppacket.payload, 0, 4);
 	if (connection->ip != NULL)
-		inet_pton(AF_INET, connection->ip, (struct addr_in *) &icppacket.payload);
+		inet_pton(AF_INET, connection->ip, &icppacket.payload);
 
 	s_strncpy((char *) &icppacket.payload[4], connection->header->url, ICP_MESSAGE_MAX - 4);
 
diff -Nru middleman-2.0.1.orig/src/main.c middleman-2.0.1/src/main.c
--- middleman-2.0.1.orig/src/main.c	2004-03-12 00:28:57.000000000 +0200
+++ middleman-2.0.1/src/main.c	2005-04-06 21:12:10.580927424 +0300
@@ -407,7 +407,7 @@
 #else
 	pcre_free = xfree;
 	// grr... argument to malloc is int on some systems, and long on others
-	(void *) pcre_malloc = (void *) xmalloc;
+	pcre_malloc = (void* (*)(size_t)) xmalloc;
 #endif
 
 	global->dns_cache = hash_create(DNS_HASH_SIZE);
diff -Nru middleman-2.0.1.orig/src/stats.c middleman-2.0.1/src/stats.c
--- middleman-2.0.1.orig/src/stats.c	2004-03-12 00:27:16.000000000 +0200
+++ middleman-2.0.1/src/stats.c	2005-04-06 21:11:29.636151976 +0300
@@ -175,7 +175,7 @@
 
 	sc.name = stat;
 	sc.type = type | StatCounter::CALLBACK;
-	(void *)sc.value.callback = (void *)cb;
+	sc.value.callback = (void* (*)())cb;
 
 	counter_list.push_back(sc);
 
@@ -193,7 +193,7 @@
 
 	sc.name = stat;
 	sc.type = type | StatCounter::CALLBACK;
-	(void *)sc.value.callback = (void *)cb;
+	sc.value.callback = (void* (*)())cb;
 
 	counter_list.push_back(sc);
 
diff -Nru middleman-2.0.1.orig/src/template.c middleman-2.0.1/src/template.c
--- middleman-2.0.1.orig/src/template.c	2004-03-12 00:27:16.000000000 +0200
+++ middleman-2.0.1/src/template.c	2006-09-24 12:05:30.900516250 +0300
@@ -132,7 +132,7 @@
 	if (ret != NULL && parsable == TRUE)
 		template_parse(connection, ret);
 
-	if (templ != NULL && ret != NULL && code != NULL)
+	if (ret != NULL && code != NULL)
 		*code = templ->code;
 
       out:
