--- ext/gmp/gmp.c.orig	2005-03-01 14:18:31.000000000 +0100
+++ ext/gmp/gmp.c	2005-04-12 10:22:02.000000000 +0200
@@ -205,7 +205,7 @@
 if(Z_TYPE_PP(zval) == IS_RESOURCE) { \
 	ZEND_FETCH_RESOURCE(gmpnumber, mpz_t *, zval, -1, GMP_RESOURCE_NAME, le_gmp);\
 } else {\
-	if(convert_to_gmp(&gmpnumber, zval, 0) == FAILURE) {\
+	if(convert_to_gmp(&gmpnumber, zval, 0 TSRMLS_CC) == FAILURE) {\
 		RETURN_FALSE;\
 	}\
 	ZEND_REGISTER_RESOURCE(NULL, gmpnumber, le_gmp);\
@@ -217,7 +217,7 @@
 
 /* {{{ convert_to_gmp
  * Convert zval to be gmp number */
-static int convert_to_gmp(mpz_t * *gmpnumber, zval **val, int base) 
+static int convert_to_gmp(mpz_t * *gmpnumber, zval **val, int base TSRMLS_DC) 
 {
 	int ret = 0;
 	int skip_lead = 0;
@@ -509,7 +509,7 @@
 		}
 	}
 
-	if(convert_to_gmp(&gmpnumber, number_arg, base) == FAILURE) {
+	if(convert_to_gmp(&gmpnumber, number_arg, base TSRMLS_CC) == FAILURE) {
 		RETURN_FALSE;
 	}
 
