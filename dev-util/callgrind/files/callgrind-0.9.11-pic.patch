diff -Nur callgrind-0.9.11.orig/src/sim.c callgrind-0.9.11/src/sim.c
--- callgrind-0.9.11.orig/src/sim.c	2005-04-02 02:31:04.000000000 +0200
+++ callgrind-0.9.11/src/sim.c	2005-06-08 19:52:09.000000000 +0200
@@ -1177,11 +1177,22 @@
 
 static __inline__ void cpuid(Int n, UInt *a, UInt *b, UInt *c, UInt *d)
 {
+#ifdef __PIC__
+   __asm__ __volatile__ (
+    "pushl %%ebx\n\t"\
+    "cpuid\n\t"\
+    "movl %%ebx,%1\n\t"\
+    "popl %%ebx"
+    : "=a" (*a), "=r" (*b), "=c" (*c), "=d" (*d)      /* output */
+    : "0" (n)         /* input */
+    );
+#else
    __asm__ __volatile__ (
     "cpuid"
     : "=a" (*a), "=b" (*b), "=c" (*c), "=d" (*d)      /* output */
     : "0" (n)         /* input */
     );
+#endif
 }
 
 static void micro_ops_warn(Int actual_size, Int used_size, Int line_size)
