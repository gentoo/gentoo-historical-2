diff -urN strace-4.5.8/process.c /tmp/strace-4.5.8/process.c
--- strace-4.5.8/process.c	2004-10-19 19:33:47.000000000 -0400
+++ /tmp/strace-4.5.8/process.c	2005-02-07 22:14:35.115449874 -0500
@@ -82,14 +82,10 @@
 
 #ifdef HAVE_LINUX_PTRACE_H
 #undef PTRACE_SYSCALL
-# ifdef HAVE_STRUCT_IA64_FPREG
-#  define ia64_fpreg XXX_ia64_fpreg
-# endif
 # ifdef HAVE_STRUCT_PT_ALL_USER_REGS
 #  define pt_all_user_regs XXX_pt_all_user_regs
 # endif
 #include <linux/ptrace.h>
-# undef ia64_fpreg
 # undef pt_all_user_regs
 #endif
 
diff -urN strace-4.5.8/signal.c /tmp/strace-4.5.8/signal.c
--- strace-4.5.8/signal.c	2004-10-06 18:11:54.000000000 -0400
+++ /tmp/strace-4.5.8/signal.c	2005-02-07 23:24:18.020091998 -0500
@@ -53,14 +53,10 @@
 #endif
 #elif defined(HAVE_LINUX_PTRACE_H)
 #undef PTRACE_SYSCALL
-# ifdef HAVE_STRUCT_IA64_FPREG
-#  define ia64_fpreg XXX_ia64_fpreg
-# endif
 # ifdef HAVE_STRUCT_PT_ALL_USER_REGS
 #  define pt_all_user_regs XXX_pt_all_user_regs
 # endif
 #include <linux/ptrace.h>
-# undef ia64_fpreg
 # undef pt_all_user_regs
 #endif
 
diff -urN strace-4.5.8/syscall.c /tmp/strace-4.5.8/syscall.c
--- strace-4.5.8/syscall.c	2004-09-04 00:20:43.000000000 -0400
+++ /tmp/strace-4.5.8/syscall.c	2005-02-07 22:10:36.002631398 -0500
@@ -63,14 +63,10 @@
 #endif
 #elif defined(HAVE_LINUX_PTRACE_H)
 #undef PTRACE_SYSCALL
-# ifdef HAVE_STRUCT_IA64_FPREG
-#  define ia64_fpreg XXX_ia64_fpreg
-# endif
 # ifdef HAVE_STRUCT_PT_ALL_USER_REGS
 #  define pt_all_user_regs XXX_pt_all_user_regs
 # endif
 #include <linux/ptrace.h>
-# undef ia64_fpreg
 # undef pt_all_user_regs
 #endif
 
diff -urN strace-4.5.8/system.c /tmp/strace-4.5.8/system.c
--- strace-4.5.8/system.c	2004-09-03 23:39:20.000000000 -0400
+++ /tmp/strace-4.5.8/system.c	2005-02-07 22:26:16.747331515 -0500
@@ -32,6 +32,23 @@
 
 #include "defs.h"
 
+#ifdef HAVE_SYS_REG_H
+# include <sys/reg.h>
+# ifndef PTRACE_PEEKUSR
+#  define PTRACE_PEEKUSR PTRACE_PEEKUSER
+# endif
+# ifndef PTRACE_POKEUSR
+#  define PTRACE_POKEUSR PTRACE_POKEUSER
+# endif
+#elif defined(HAVE_LINUX_PTRACE_H)
+# undef PTRACE_SYSCALL
+# ifdef HAVE_STRUCT_PT_ALL_USER_REGS
+#  define pt_all_user_regs XXX_pt_all_user_regs
+# endif
+# include <linux/ptrace.h>
+# undef pt_all_user_regs
+#endif
+
 #ifdef LINUX
 #define _LINUX_SOCKET_H
 #define _LINUX_FS_H
diff -urN strace-4.5.8/util.c /tmp/strace-4.5.8/util.c
--- strace-4.5.8/util.c	2004-10-06 18:06:28.000000000 -0400
+++ /tmp/strace-4.5.8/util.c	2005-02-07 22:14:11.382807120 -0500
@@ -63,14 +63,10 @@
 # define PTRACE_PEEKUSR PTRACE_PEEKUSER
 #elif defined(HAVE_LINUX_PTRACE_H)
 #undef PTRACE_SYSCALL
-# ifdef HAVE_STRUCT_IA64_FPREG
-#  define ia64_fpreg XXX_ia64_fpreg
-# endif
 # ifdef HAVE_STRUCT_PT_ALL_USER_REGS
 #  define pt_all_user_regs XXX_pt_all_user_regs
 # endif
 #include <linux/ptrace.h>
-# undef ia64_fpreg
 # undef pt_all_user_regs
 #endif
 
