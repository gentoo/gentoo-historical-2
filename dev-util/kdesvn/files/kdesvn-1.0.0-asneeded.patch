--- kdesvn-1.0.0/src/CMakeLists.txt.asneeded	2008-06-20 16:27:30.000000000 -0600
+++ kdesvn-1.0.0/src/CMakeLists.txt	2008-08-07 09:16:09.000000000 -0600
@@ -37,7 +37,7 @@
     ${QT_AND_KDECORE_LIBS} ${KDE3_KIO_LIBRARY} ${KDE3_PART_LIBRARY} ${KDE3_UI_LIBRARY} ${KDE3_WALLET_LIBRARY} )
 SET_TARGET_PROPERTIES(kdesvnpart
     PROPERTIES
-    LINK_FLAGS "${_BASE_LDADD} ${APR_EXTRA_LIBFLAGS} ${APU_EXTRA_LIBFLAGS} ${LINK_NO_UNDEFINED}")
+    LINK_FLAGS "${_BASE_LDADD} ${APR_EXTRA_LDFLAGS} ${APU_EXTRA_LDFLAGS} ${LINK_NO_UNDEFINED}")
 
 INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/svnqt)
 
--- kdesvn-1.0.0/src/svnqt/CMakeLists.txt.asneeded	2008-06-06 08:48:44.000000000 -0600
+++ kdesvn-1.0.0/src/svnqt/CMakeLists.txt	2008-08-07 09:16:09.000000000 -0600
@@ -177,9 +177,8 @@
     SOVERSION ${LIB_MAJOR}
     VERSION ${_soversion})
 
-SET(ALL_LINKFLAGS ${APR_EXTRA_LIBFLAGS})
-SET(ALL_LINKFLAGS "${ALL_LINKFLAGS} ${APU_EXTRA_LIBFLAGS}")
-SET_TARGET_PROPERTIES(${svnqt-name} PROPERTIES LINK_FLAGS "${ALL_LINKFLAGS} ${LINK_NO_UNDEFINED}")
+SET(ALL_LINKFLAGS "${APR_EXTRA_LDFLAGS} ${APU_EXTRA_LDFLAGS}")
+SET_TARGET_PROPERTIES(${svnqt-name} PROPERTIES LINK_FLAGS "${ALL_LINKFLAGS} ${LINK_NO_UNDEFINED}")
 TARGET_LINK_LIBRARIES(${svnqt-name} ${QT_LIBRARIES} ${SUBVERSION_ALL_LIBS})
 
 IF (SQLITE_FOUND AND NOT QT4_FOUND)
--- kdesvn-1.0.0/src/svnqt/cmakemodules/FindSubversion.cmake.asneeded	2008-07-21 14:32:32.000000000 -0600
+++ kdesvn-1.0.0/src/svnqt/cmakemodules/FindSubversion.cmake	2008-08-07 09:16:09.000000000 -0600
@@ -58,14 +58,29 @@
     MESSAGE(SEND_ERROR "Error: no apu-config found")
   endif(NOT APU_CONFIG)
 
-  EXEC_PROGRAM(${APR_CONFIG} ARGS "--includedir" OUTPUT_VARIABLE APR_INCLUDE_DIR)
-  EXEC_PROGRAM(${APU_CONFIG} ARGS "--includedir" OUTPUT_VARIABLE APU_INCLUDE_DIR)
+  EXECUTE_PROCESS(COMMAND ${APR_CONFIG} "--includedir" OUTPUT_VARIABLE APR_INCLUDE_DIR OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apr include: ${APR_INCLUDE_DIR}")
+  EXECUTE_PROCESS(COMMAND ${APU_CONFIG} "--includedir" OUTPUT_VARIABLE APU_INCLUDE_DIR OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apu include: ${APU_INCLUDE_DIR}")
+
+  EXECUTE_PROCESS(COMMAND ${APR_CONFIG} "--cppflags" OUTPUT_VARIABLE APR_CPP_FLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apr cppflags: ${APR_CPP_FLAGS}")
+  EXECUTE_PROCESS(COMMAND ${APU_CONFIG} "--cppflags" OUTPUT_VARIABLE APU_CPP_FLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apu cppflags: ${APU_CPP_FLAGS}")
+
+  EXECUTE_PROCESS(COMMAND ${APR_CONFIG} "--link-ld" "--libs" OUTPUT_VARIABLE APR_LIBS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apr libs: ${APR_LIBS}")
+  SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APR_LIBS})
+
+  EXECUTE_PROCESS(COMMAND ${APR_CONFIG} "--ldflags" OUTPUT_VARIABLE APR_EXTRA_LDFLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apr extra ldflags: ${APR_EXTRA_LDFLAGS}")
+
+  EXECUTE_PROCESS(COMMAND ${APU_CONFIG} "--link-ld" "--libs" OUTPUT_VARIABLE APU_LIBS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apu libs: ${APU_LIBS}")
+  SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APU_LIBS})
 
-  EXEC_PROGRAM(${APR_CONFIG} ARGS "--cppflags" OUTPUT_VARIABLE APR_CPP_FLAGS)
-  EXEC_PROGRAM(${APU_CONFIG} ARGS "--cppflags" OUTPUT_VARIABLE APU_CPP_FLAGS)
-
-  EXEC_PROGRAM(${APR_CONFIG} ARGS "--ldflags --libs --link-ld" OUTPUT_VARIABLE APR_EXTRA_LIBFLAGS)
-  EXEC_PROGRAM(${APU_CONFIG} ARGS "--ldflags --libs --link-ld" OUTPUT_VARIABLE APU_EXTRA_LIBFLAGS)
+  EXECUTE_PROCESS(COMMAND ${APU_CONFIG} "--ldflags" OUTPUT_VARIABLE APU_EXTRA_LDFLAGS OUTPUT_STRIP_TRAILING_WHITESPACE)
+  MESSAGE(STATUS "Found apu extra ldflags: ${APU_EXTRA_LIBS}")
 
   CHECK_INCLUDE_FILES(execinfo.h HAS_BACKTRACE_H)
 
@@ -180,8 +195,10 @@
     "$ENV{ProgramFiles}/Subversion/lib"
   )
 
-  SET(APR_EXTRA_LIBFLAGS )
-  SET(APU_EXTRA_LIBFLAGS )
+  SET(APR_EXTRA_LIBS )
+  SET(APR_EXTRA_LDFLAGS )
+  SET(APU_EXTRA_LIBS )
+  SET(APU_EXTRA_LDFLAGS )
 
 
   # check found libraries
@@ -189,7 +206,7 @@
     MESSAGE(SEND_ERROR "No apr lib found!")
   ELSE (NOT APR_LIB)
     MESSAGE(STATUS "Found apr lib: ${APR_LIB}")
-    SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APR_LIB})
+    SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APR_LIB} ${APR_EXTRA_LIBS})
   endif(NOT APR_LIB)
 
   if (NOT APRICONV_LIB)
@@ -203,7 +220,7 @@
     MESSAGE(SEND_ERROR "No aprutil lib found!")
   ELSE (NOT APU_LIB)
     MESSAGE(STATUS "Found aprutil lib: ${APU_LIB}")
-    SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APU_LIB})
+    SET(SUBVERSION_ALL_LIBS ${SUBVERSION_ALL_LIBS} ${APU_LIB} ${APU_EXTRA_LIBS})
   endif(NOT APU_LIB)
 
   if (NOT APU_XMLLIB)
--- kdesvn-1.0.0/src/kdesvnd/CMakeLists.txt.asneeded	2007-06-10 15:23:29.000000000 -0600
+++ kdesvn-1.0.0/src/kdesvnd/CMakeLists.txt	2008-08-07 09:16:09.000000000 -0600
@@ -23,7 +23,7 @@
 
 SET_TARGET_PROPERTIES(kded_kdesvnd
     PROPERTIES
-    LINK_FLAGS "${LINK_NO_UNDEFINED} ${_BASE_LDADD} ${APR_EXTRA_LIBFLAGS} ${APU_EXTRA_LIBFLAGS} -avoid-version -module")
+    LINK_FLAGS "${LINK_NO_UNDEFINED} ${_BASE_LDADD} ${APR_EXTRA_LDFLAGS} ${APU_EXTRA_LDFLAGS} -avoid-version -module")
 
 INSTALL(TARGETS kded_kdesvnd
     RUNTIME DESTINATION ${BIN_INSTALL_DIR}
