--- cmake-2.8.4/usr/share/cmake/Modules/FindQt4.cmake.org	2011-03-09 19:08:15.384000064 +0100
+++ cmake-2.8.4/usr/share/cmake/Modules/FindQt4.cmake	2011-03-09 19:09:18.162000065 +0100
@@ -835,7 +835,7 @@
               PATHS
               ${QT_HEADERS_DIR}/${QT_MODULE}
               ${QT_LIBRARY_DIR}/${QT_MODULE}.framework/Headers
-              NO_DEFAULT_PATH
+              NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
       )
     # phonon doesn't seem consistent, let's try phonondefs.h for some
     # installations
@@ -844,7 +844,7 @@
                 PATHS
                 ${QT_HEADERS_DIR}/${QT_MODULE}
                 ${QT_LIBRARY_DIR}/${QT_MODULE}.framework/Headers
-                NO_DEFAULT_PATH
+                NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
         )
     ENDIF(${QT_MODULE} STREQUAL "phonon")
   ENDFOREACH(QT_MODULE)
@@ -854,11 +854,11 @@
     # Set QT_AXCONTAINER_INCLUDE_DIR and QT_AXSERVER_INCLUDE_DIR
     FIND_PATH(QT_QAXCONTAINER_INCLUDE_DIR ActiveQt
       PATHS ${QT_HEADERS_DIR}/ActiveQt
-      NO_DEFAULT_PATH
+      NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
       )
     FIND_PATH(QT_QAXSERVER_INCLUDE_DIR ActiveQt
       PATHS ${QT_HEADERS_DIR}/ActiveQt
-      NO_DEFAULT_PATH
+      NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
       )
   ENDIF(Q_WS_WIN)
 
@@ -867,7 +867,7 @@
     PATHS
     ${QT_HEADERS_DIR}/QtDesigner
     ${QT_LIBRARY_DIR}/QtDesigner.framework/Headers
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
   
   # Set QT_QTASSISTANT_INCLUDE_DIR
@@ -875,7 +875,7 @@
     PATHS
     ${QT_HEADERS_DIR}/QtAssistant
     ${QT_LIBRARY_DIR}/QtAssistant.framework/Headers
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
   
   # Set QT_QTASSISTANTCLIENT_INCLUDE_DIR
@@ -883,7 +883,7 @@
     PATHS
     ${QT_HEADERS_DIR}/QtAssistant
     ${QT_LIBRARY_DIR}/QtAssistant.framework/Headers
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   ########################################
@@ -897,11 +897,11 @@
     STRING(TOUPPER ${QT_MODULE} _upper_qt_module)
     FIND_LIBRARY(QT_${_upper_qt_module}_LIBRARY_RELEASE 
                  NAMES ${QT_MODULE}${QT_LIBINFIX} ${QT_MODULE}${QT_LIBINFIX}4
-                 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH
+                 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
         )
     FIND_LIBRARY(QT_${_upper_qt_module}_LIBRARY_DEBUG 
                  NAMES ${QT_MODULE}${QT_LIBINFIX}_debug ${QT_MODULE}${QT_LIBINFIX}d ${QT_MODULE}${QT_LIBINFIX}d4
-                 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH
+                 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
         )
   ENDFOREACH(QT_MODULE)
 
@@ -911,26 +911,26 @@
   ENDIF(Q_WS_MAC AND QT_QTCORE_LIBRARY_RELEASE AND NOT QT_QTUITOOLS_LIBRARY_RELEASE)
 
   # Set QT_QTDESIGNERCOMPONENTS_LIBRARY
-  FIND_LIBRARY(QT_QTDESIGNERCOMPONENTS_LIBRARY_RELEASE NAMES QtDesignerComponents${QT_LIBINFIX} QtDesignerComponents${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
-  FIND_LIBRARY(QT_QTDESIGNERCOMPONENTS_LIBRARY_DEBUG   NAMES QtDesignerComponents${QT_LIBINFIX}_debug QtDesignerComponents${QT_LIBINFIX}d QtDesignerComponents${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
+  FIND_LIBRARY(QT_QTDESIGNERCOMPONENTS_LIBRARY_RELEASE NAMES QtDesignerComponents${QT_LIBINFIX} QtDesignerComponents${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
+  FIND_LIBRARY(QT_QTDESIGNERCOMPONENTS_LIBRARY_DEBUG   NAMES QtDesignerComponents${QT_LIBINFIX}_debug QtDesignerComponents${QT_LIBINFIX}d QtDesignerComponents${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
 
   # Set QT_QTMAIN_LIBRARY
   IF(Q_WS_WIN)
-    FIND_LIBRARY(QT_QTMAIN_LIBRARY_RELEASE NAMES qtmain${QT_LIBINFIX} PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
-    FIND_LIBRARY(QT_QTMAIN_LIBRARY_DEBUG NAMES qtmain${QT_LIBINFIX}d PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
+    FIND_LIBRARY(QT_QTMAIN_LIBRARY_RELEASE NAMES qtmain${QT_LIBINFIX} PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
+    FIND_LIBRARY(QT_QTMAIN_LIBRARY_DEBUG NAMES qtmain${QT_LIBINFIX}d PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
   ENDIF(Q_WS_WIN)
   
   # Set QT_QTASSISTANTCLIENT_LIBRARY
-  FIND_LIBRARY(QT_QTASSISTANTCLIENT_LIBRARY_RELEASE NAMES QtAssistantClient${QT_LIBINFIX} QtAssistantClient${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
-  FIND_LIBRARY(QT_QTASSISTANTCLIENT_LIBRARY_DEBUG   NAMES QtAssistantClient${QT_LIBINFIX}_debug QtAssistantClient${QT_LIBINFIX}d QtAssistantClient${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR}  NO_DEFAULT_PATH)
+  FIND_LIBRARY(QT_QTASSISTANTCLIENT_LIBRARY_RELEASE NAMES QtAssistantClient${QT_LIBINFIX} QtAssistantClient${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
+  FIND_LIBRARY(QT_QTASSISTANTCLIENT_LIBRARY_DEBUG   NAMES QtAssistantClient${QT_LIBINFIX}_debug QtAssistantClient${QT_LIBINFIX}d QtAssistantClient${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR}  NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
   
   # Set QT_QTASSISTANT_LIBRARY
-  FIND_LIBRARY(QT_QTASSISTANT_LIBRARY_RELEASE NAMES QtAssistantClient${QT_LIBINFIX} QtAssistantClient${QT_LIBINFIX}4 QtAssistant${QT_LIBINFIX} QtAssistant${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
-  FIND_LIBRARY(QT_QTASSISTANT_LIBRARY_DEBUG   NAMES QtAssistantClient${QT_LIBINFIX}_debug QtAssistantClient${QT_LIBINFIX}d QtAssistantClient${QT_LIBINFIX}d4 QtAssistant${QT_LIBINFIX}_debug QtAssistant${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
+  FIND_LIBRARY(QT_QTASSISTANT_LIBRARY_RELEASE NAMES QtAssistantClient${QT_LIBINFIX} QtAssistantClient${QT_LIBINFIX}4 QtAssistant${QT_LIBINFIX} QtAssistant${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
+  FIND_LIBRARY(QT_QTASSISTANT_LIBRARY_DEBUG   NAMES QtAssistantClient${QT_LIBINFIX}_debug QtAssistantClient${QT_LIBINFIX}d QtAssistantClient${QT_LIBINFIX}d4 QtAssistant${QT_LIBINFIX}_debug QtAssistant${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
 
   # Set QT_QTHELP_LIBRARY
-  FIND_LIBRARY(QT_QTCLUCENE_LIBRARY_RELEASE NAMES QtCLucene${QT_LIBINFIX} QtCLucene${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
-  FIND_LIBRARY(QT_QTCLUCENE_LIBRARY_DEBUG   NAMES QtCLucene${QT_LIBINFIX}_debug QtCLucene${QT_LIBINFIX}d QtCLucene${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH)
+  FIND_LIBRARY(QT_QTCLUCENE_LIBRARY_RELEASE NAMES QtCLucene${QT_LIBINFIX} QtCLucene${QT_LIBINFIX}4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
+  FIND_LIBRARY(QT_QTCLUCENE_LIBRARY_DEBUG   NAMES QtCLucene${QT_LIBINFIX}_debug QtCLucene${QT_LIBINFIX}d QtCLucene${QT_LIBINFIX}d4 PATHS ${QT_LIBRARY_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
   IF(Q_WS_MAC AND QT_QTCORE_LIBRARY_RELEASE AND NOT QT_QTCLUCENE_LIBRARY_RELEASE)
     FIND_LIBRARY(QT_QTCLUCENE_LIBRARY_RELEASE NAMES QtCLucene${QT_LIBINFIX} PATHS ${QT_LIBRARY_DIR})
   ENDIF(Q_WS_MAC AND QT_QTCORE_LIBRARY_RELEASE AND NOT QT_QTCLUCENE_LIBRARY_RELEASE)
@@ -993,67 +993,67 @@
   FIND_PROGRAM(QT_MOC_EXECUTABLE
     NAMES moc-qt4 moc
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_UIC_EXECUTABLE
     NAMES uic-qt4 uic
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_UIC3_EXECUTABLE
     NAMES uic3
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_RCC_EXECUTABLE 
     NAMES rcc
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_DBUSCPP2XML_EXECUTABLE 
     NAMES qdbuscpp2xml
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_DBUSXML2CPP_EXECUTABLE 
     NAMES qdbusxml2cpp
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_LUPDATE_EXECUTABLE
     NAMES lupdate-qt4 lupdate
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_LRELEASE_EXECUTABLE
     NAMES lrelease-qt4 lrelease
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_QCOLLECTIONGENERATOR_EXECUTABLE
     NAMES qcollectiongenerator-qt4 qcollectiongenerator
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_DESIGNER_EXECUTABLE
     NAMES designer-qt4 designer
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   FIND_PROGRAM(QT_LINGUIST_EXECUTABLE
     NAMES linguist-qt4 linguist
     PATHS ${QT_BINARY_DIR}
-    NO_DEFAULT_PATH
+    NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
     )
 
   IF (QT_MOC_EXECUTABLE)
@@ -1158,11 +1158,11 @@
       IF(QT_IS_STATIC)
         FIND_LIBRARY(QT_${_upper_qt_plugin}_LIBRARY_RELEASE
                      NAMES ${QT_PLUGIN}${QT_LIBINFIX} ${QT_PLUGIN}${QT_LIBINFIX}4
-                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH
+                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
             )
         FIND_LIBRARY(QT_${_upper_qt_plugin}_LIBRARY_DEBUG
                      NAMES ${QT_PLUGIN}${QT_LIBINFIX}_debug ${QT_PLUGIN}${QT_LIBINFIX}d ${QT_PLUGIN}${QT_LIBINFIX}d4
-                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH
+                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
             )
         _QT4_ADJUST_LIB_VARS(${QT_PLUGIN})
       ELSE(QT_IS_STATIC)
@@ -1171,11 +1171,11 @@
         SET(CMAKE_FIND_LIBRARY_SUFFIXES ${CMAKE_SHARED_MODULE_SUFFIX} ${CMAKE_SHARED_LIBRARY_SUFFIX})
         FIND_LIBRARY(QT_${_upper_qt_plugin}_PLUGIN_RELEASE
                      NAMES ${QT_PLUGIN}${QT_LIBINFIX} ${QT_PLUGIN}${QT_LIBINFIX}4
-                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH
+                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
             )
         FIND_LIBRARY(QT_${_upper_qt_plugin}_PLUGIN_DEBUG
                      NAMES ${QT_PLUGIN}${QT_LIBINFIX}_debug ${QT_PLUGIN}${QT_LIBINFIX}d ${QT_PLUGIN}${QT_LIBINFIX}d4
-                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH
+                     PATHS ${QT_${_upper_qt_plugin_type}_PLUGINS_DIR} NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH
             )
         MARK_AS_ADVANCED(QT_${_upper_qt_plugin}_PLUGIN_RELEASE QT_${_upper_qt_plugin}_PLUGIN_DEBUG)
         SET(CMAKE_FIND_LIBRARY_SUFFIXES ${CMAKE_FIND_LIBRARY_SUFFIXES_DEFAULT})
