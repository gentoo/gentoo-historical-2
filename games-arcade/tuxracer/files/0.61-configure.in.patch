--- configure.in.orig	2003-08-18 23:19:45.174427928 -0400
+++ configure.in	2003-08-18 23:22:48.107617856 -0400
@@ -47,11 +47,6 @@
 TR_CXXFLAGS="-O2 -Wall -fomit-frame-pointer -ffast-math -fexpensive-optimizations"
 TR_LIBS=""
 
-case "$host" in
-i*86-*-*) TR_CFLAGS="$TR_CFLAGS -malign-loops=2 -malign-jumps=2 -malign-functions=2";
-          TR_CXXFLAGS="$TR_CXXFLAGS -malign-loops=2 -malign-jumps=2 -malign-functions=2";;
-alpha*-*-linux-*) TR_CFLAGS="$TR_CFLAGS -mieee";;
-esac
 
 AC_ARG_ENABLE(debug,     [  --enable-debug          Produce an executable with debugging symbols], 
 			 [TR_CFLAGS="-g -Wall"; TR_CXXFLAGS="-g -Wall"],
@@ -468,9 +468,6 @@
                     glx_h_up_to_date=yes, glx_h_up_to_date=no )
     AC_MSG_RESULT([$glx_h_up_to_date])
 
-    if test "x$glx_h_up_to_date" = "xno" ; then
-        AC_MSG_ERROR([Your copy of glx.h is out of date.  You can get a more recent copy from the latest Mesa distribution (http://mesa3d.sourceforge.net).])
-    fi
 fi
 
 dnl Check for glext.h 
@@ -592,7 +584,11 @@
 dnl --------------------------------------------------------------------------
 
 dnl Turn use of stencil buffer on/off
-AC_ARG_ENABLE(stencil-buffer,[  --enable-stencil-buffer Use if your hardware has a stencil buffer],TR_CPPFLAGS="$TR_CPPFLAGS -DUSE_STENCIL_BUFFER")
+AC_ARG_ENABLE(stencil-buffer,[  --enable-stencil-buffer Use if your hardware has a stencil buffer],
+use_stencil=$enableval)
+if test "x$use_stencil" = "xyes" ; then
+	TR_CPPFLAGS="$TR_CPPFLAGS -DUSE_STENCIL_BUFFER"
+fi
 
 dnl Specify data directory
 AC_ARG_WITH(data-dir,[  --with-data-dir=PATH    Default tuxracer data directory],TR_CPPFLAGS="$TR_CPPFLAGS -DDATA_DIR=\\\"$withval\\\"")
