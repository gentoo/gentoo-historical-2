diff -Naur gbib-0.1.2.orig/Makefile gbib-0.1.2/Makefile
--- gbib-0.1.2.orig/Makefile	2003-04-01 06:21:49.000000000 +0000
+++ gbib-0.1.2/Makefile	2003-09-08 02:27:46.000000000 +0000
@@ -2,7 +2,7 @@
 # this file is used as template to generate
 # the Makefile by the configure script
 
-DESTDIR = /usr/local
+ROOTDIR = /usr/local
 PREFIX = /usr/local
 LIBDIR = /usr/local/share/gbibtex
 PROGINST = /usr/bin/install -c
@@ -15,7 +15,7 @@
 LDFLAGS =
 CPPFLAGS = -funsigned-char -I. -I./intl -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/include/gtk-1.2 -I/usr/X11R6/include -I/usr/include/gnome-1.0 -DNEED_GNOMESUPPORT_H -I/usr/lib/gnome-libs/include
 
-ROOTDIR =
+DESTDIR = 
 
 SHELL = /bin/sh
 .SUFFIXES:
@@ -58,12 +58,12 @@
 
 
 install: gbib
-	$(PROGINST) -d -m 0755 $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) gbib.rc $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) lyx.xpm $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) gbib48.xpm $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) -d -m 0755 $(ROOTDIR)$(DESTDIR)/bin
-	$(PROGINST) gbib $(ROOTDIR)$(DESTDIR)/bin
+	$(PROGINST) -d -m 0755 $(DESTDIR)$(LIBDIR)
+	$(PROGINST) gbib.rc $(DESTDIR)$(LIBDIR)
+	$(PROGINST) lyx.xpm $(DESTDIR)$(LIBDIR)
+	$(PROGINST) gbib48.xpm $(DESTDIR)$(LIBDIR)
+	$(PROGINST) -d -m 0755 $(DESTDIR)$(ROOTDIR)/bin
+	$(PROGINST) gbib $(DESTDIR)$(ROOTDIR)/bin
 	$(MAKE) -C intl install
 	$(MAKE) -C po install
 
diff -Naur gbib-0.1.2.orig/Makefile.in gbib-0.1.2/Makefile.in
--- gbib-0.1.2.orig/Makefile.in	2003-04-01 05:09:07.000000000 +0000
+++ gbib-0.1.2/Makefile.in	2003-09-08 02:27:46.000000000 +0000
@@ -1,7 +1,7 @@
 # this file is used as template to generate
 # the Makefile by the configure script
 
-DESTDIR = @prefix@
+ROOTDIR = @prefix@
 PREFIX = @prefix@
 LIBDIR = @prefix@/share/gbibtex
 PROGINST = @INSTALL@
@@ -14,7 +14,7 @@
 LDFLAGS =
 CPPFLAGS = -funsigned-char -I. -I./intl @GNOMEFLAGS@
 
-ROOTDIR =
+DESTDIR = 
 
 SHELL = /bin/sh
 .SUFFIXES:
@@ -57,12 +57,12 @@
 
 
 install: gbib
-	$(PROGINST) -d -m 0755 $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) gbib.rc $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) lyx.xpm $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) gbib48.xpm $(ROOTDIR)$(LIBDIR)
-	$(PROGINST) -d -m 0755 $(ROOTDIR)$(DESTDIR)/bin
-	$(PROGINST) gbib $(ROOTDIR)$(DESTDIR)/bin
+	$(PROGINST) -d -m 0755 $(DESTDIR)$(LIBDIR)
+	$(PROGINST) gbib.rc $(DESTDIR)$(LIBDIR)
+	$(PROGINST) lyx.xpm $(DESTDIR)$(LIBDIR)
+	$(PROGINST) gbib48.xpm $(DESTDIR)$(LIBDIR)
+	$(PROGINST) -d -m 0755 $(DESTDIR)$(ROOTDIR)/bin
+	$(PROGINST) gbib $(DESTDIR)$(ROOTDIR)/bin
 	$(MAKE) -C intl install
 	$(MAKE) -C po install
 
diff -Naur gbib-0.1.2.orig/bibentry.C gbib-0.1.2/bibentry.C
--- gbib-0.1.2.orig/bibentry.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/bibentry.C	2003-09-08 02:27:46.000000000 +0000
@@ -7,16 +7,16 @@
  *    the Free Software Foundation; either version 2, or (at your option)
  *    any later version.
  */
-#include <iostream.h>
-#include <map.h>
-#include <vector.h>
-#include <std/bastring.h>
+
+#include <iostream>
+#include <map>
+#include <vector>
+#include <string>
 #include <stdlib.h>
 #include <string.h>
 #include <ctype.h>
 #include "gbib.h"
 
-
 extern int flag_allow_warnings;
 
 
diff -Naur gbib-0.1.2.orig/bibfiles.C gbib-0.1.2/bibfiles.C
--- gbib-0.1.2.orig/bibfiles.C	2003-04-01 05:03:02.000000000 +0000
+++ gbib-0.1.2/bibfiles.C	2003-09-08 02:27:46.000000000 +0000
@@ -9,7 +9,7 @@
  */
 
 // File operations
-#include <iostream.h>
+#include <iostream>
 #include <stdio.h>
 #include <string.h>
 #include <ctype.h>
@@ -379,6 +379,7 @@
 // avoid recognizing characters >127 (negative when c is signed)
 // as control cahrs
 int lt_space(char c) {
-  return( (c>=0) && (c<=' ') );
+  //return( (c>=0) && (c<=' ') );
+  return( (c<=' ') );
 }
 
diff -Naur gbib-0.1.2.orig/bibrc.C gbib-0.1.2/bibrc.C
--- gbib-0.1.2.orig/bibrc.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/bibrc.C	2003-09-08 02:27:46.000000000 +0000
@@ -8,6 +8,7 @@
  */
 
 // File operations
+#include <iostream>
 #include <stdio.h>
 #include <string.h>
 #include <ctype.h>
diff -Naur gbib-0.1.2.orig/command_dlg.C gbib-0.1.2/command_dlg.C
--- gbib-0.1.2.orig/command_dlg.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/command_dlg.C	2003-09-08 02:27:46.000000000 +0000
@@ -7,7 +7,7 @@
  *    any later version.
  */
 
-#include <iostream.h>
+#include <iostream>
 #include <vector>
 #include "gbib.h"
 
diff -Naur gbib-0.1.2.orig/configure gbib-0.1.2/configure
--- gbib-0.1.2.orig/configure	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/configure	2003-09-08 02:27:46.000000000 +0000
@@ -3415,7 +3415,7 @@
   cat > conftest.$ac_ext <<EOF
 #line 3417 "configure"
 #include "confdefs.h"
-#include <map.h>
+#include <linux/mtd/map.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3422: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -3449,7 +3449,7 @@
   cat > conftest.$ac_ext <<EOF
 #line 3451 "configure"
 #include "confdefs.h"
-#include <slist>
+#include <ext/slist>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3456: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -3474,16 +3474,16 @@
 { echo "configure: error: required header file missing" 1>&2; exit 1; }
 fi
 
-ac_safe=`echo "std/bastring.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for std/bastring.h""... $ac_c" 1>&6
-echo "configure:3480: checking for std/bastring.h" >&5
+ac_safe=`echo "string" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for string""... $ac_c" 1>&6
+echo "configure:3480: checking for string" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 3485 "configure"
 #include "confdefs.h"
-#include <std/bastring.h>
+#include <string>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3490: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -3542,39 +3542,39 @@
 { echo "configure: error: required header file missing" 1>&2; exit 1; }
 fi
 
-ac_safe=`echo "vector.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for vector.h""... $ac_c" 1>&6
-echo "configure:3548: checking for vector.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3553 "configure"
-#include "confdefs.h"
-#include <vector.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3558: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  :
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: required header file missing" 1>&2; exit 1; }
-fi
+# ac_safe=`echo "vector.h" | sed 'y%./+-%__p_%'`
+# echo $ac_n "checking for vector.h""... $ac_c" 1>&6
+# echo "configure:3548: checking for vector.h" >&5
+# if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+#   echo $ac_n "(cached) $ac_c" 1>&6
+# else
+#   cat > conftest.$ac_ext <<EOF
+# #line 3553 "configure"
+# #include "confdefs.h"
+# #include <vector.h>
+# EOF
+# ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+# { (eval echo configure:3558: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+# ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+# if test -z "$ac_err"; then
+#   rm -rf conftest*
+#   eval "ac_cv_header_$ac_safe=yes"
+# else
+#   echo "$ac_err" >&5
+#   echo "configure: failed program was:" >&5
+#   cat conftest.$ac_ext >&5
+#   rm -rf conftest*
+#   eval "ac_cv_header_$ac_safe=no"
+# fi
+# rm -f conftest*
+# fi
+# if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+#   echo "$ac_t""yes" 1>&6
+#   :
+# else
+#   echo "$ac_t""no" 1>&6
+# { echo "configure: error: required header file missing" 1>&2; exit 1; }
+# fi
 
 
 
diff -Naur gbib-0.1.2.orig/configure.in gbib-0.1.2/configure.in
--- gbib-0.1.2.orig/configure.in	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/configure.in	2003-09-08 02:27:46.000000000 +0000
@@ -31,11 +31,11 @@
 AC_HEADER_CHECK(sys/stat.h,,AC_MSG_ERROR(required header file missing))
 AC_HEADER_CHECK(sys/types.h,,AC_MSG_ERROR(required header file missing))
 AC_HEADER_CHECK(algorithm,,AC_MSG_ERROR(required header file missing))
-AC_HEADER_CHECK(map.h,,AC_MSG_ERROR(required header file missing))
-AC_HEADER_CHECK(slist,,AC_MSG_ERROR(required header file missing))
-AC_HEADER_CHECK(std/bastring.h,,AC_MSG_ERROR(required header file missing))
+AC_HEADER_CHECK(linux/mtd/map.h,,AC_MSG_ERROR(required header file missing))
+AC_HEADER_CHECK(ext/slist,,AC_MSG_ERROR(required header file missing))
+AC_HEADER_CHECK(string,,AC_MSG_ERROR(required header file missing))
 AC_HEADER_CHECK(vector,,AC_MSG_ERROR(required header file missing))
-AC_HEADER_CHECK(vector.h,,AC_MSG_ERROR(required header file missing))
+#AC_HEADER_CHECK(vector.h,,AC_MSG_ERROR(required header file missing))
 
 dnl check for gnome
 dnl (I don't particularly check for GTK+ version, because someone
diff -Naur gbib-0.1.2.orig/entrydef.C gbib-0.1.2/entrydef.C
--- gbib-0.1.2.orig/entrydef.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/entrydef.C	2003-09-08 02:27:46.000000000 +0000
@@ -8,10 +8,10 @@
  *    any later version.
  */
 
-#include <iostream.h>
-#include <map.h>
-#include <vector.h>
-#include <std/bastring.h>
+#include <iostream>
+#include <map>
+#include <vector>
+#include <string>
 #include <algorithm>
 #include <string.h>
 #include <stdio.h>
diff -Naur gbib-0.1.2.orig/entrydialog.C gbib-0.1.2/entrydialog.C
--- gbib-0.1.2.orig/entrydialog.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/entrydialog.C	2003-09-08 02:27:46.000000000 +0000
@@ -7,7 +7,7 @@
  *    any later version.
  */
 
-#include <iostream.h>
+#include <iostream>
 #include <vector>
 #include "gbib.h"
 
diff -Naur gbib-0.1.2.orig/entrylist.C gbib-0.1.2/entrylist.C
--- gbib-0.1.2.orig/entrylist.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/entrylist.C	2003-09-08 02:27:46.000000000 +0000
@@ -6,8 +6,8 @@
  *    the Free Software Foundation; either version 2, or (at your option)
  *    any later version.
  */
-#include <iostream.h>
-#include <vector.h>
+#include <iostream>
+#include <vector>
 #include <algorithm>
 #include <stdlib.h>
 #include <string.h>
diff -Naur gbib-0.1.2.orig/gbib.h gbib-0.1.2/gbib.h
--- gbib-0.1.2.orig/gbib.h	2003-04-01 05:30:52.000000000 +0000
+++ gbib-0.1.2/gbib.h	2003-09-08 02:27:46.000000000 +0000
@@ -11,11 +11,14 @@
 #ifndef _GBIB_H
 #define _GBIB_H
 
-#include <std/bastring.h>
+#include <string>
 #include <vector>
-#include <slist>
+#include <ext/slist>
 #include <stack>
 
+using namespace std;
+using __gnu_cxx::slist;
+
 // it's very important that config.h is called before gnome.h,
 // to define ENABLE_NLS if needed
 #include "config.h"
@@ -23,7 +26,7 @@
 #include <gnome.h>
 
 
-typedef basic_string <char> string;
+//typedef basic_string <char> string;
 typedef pair<int, string> pair_string;
 typedef vector<string> vector_string;
 typedef slist<pair_string> slist_pair_string;
diff -Naur gbib-0.1.2.orig/gui.C gbib-0.1.2/gui.C
--- gbib-0.1.2.orig/gui.C	2003-04-01 06:20:31.000000000 +0000
+++ gbib-0.1.2/gui.C	2003-09-08 02:27:46.000000000 +0000
@@ -8,13 +8,13 @@
  *    any later version.
  */
 
-#include "gbib.h"
-
-#include <iostream.h>
+#include <iostream>
 #include <string.h>
 #include <errno.h>
 #include <unistd.h>
 
+#include "gbib.h"
+
 #include "recent.h"
 
 #include "lyx.xpm"
diff -Naur gbib-0.1.2.orig/lyxconnect.C gbib-0.1.2/lyxconnect.C
--- gbib-0.1.2.orig/lyxconnect.C	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/lyxconnect.C	2003-09-08 02:27:46.000000000 +0000
@@ -7,6 +7,7 @@
  *    any later version.
  */
 
+#include <iostream>
 #include <stdlib.h>
 #include <sys/types.h>
 #include <sys/stat.h>
diff -Naur gbib-0.1.2.orig/po/Makefile.in.in gbib-0.1.2/po/Makefile.in.in
--- gbib-0.1.2.orig/po/Makefile.in.in	2003-04-01 01:54:21.000000000 +0000
+++ gbib-0.1.2/po/Makefile.in.in	2003-09-08 02:27:31.000000000 +0000
@@ -119,8 +119,8 @@
 	for cat in $$catalogs; do \
 	  cat=`basename $$cat`; \
 	  case "$$cat" in \
-	    *.gmo) destdir=$(gnulocaledir);; \
-	    *)     destdir=$(localedir);; \
+	    *.gmo) destdir=$(DESTDIR)$(gnulocaledir);; \
+	    *)     destdir=$(DESTDIR)$(localedir);; \
 	  esac; \
 	  lang=`echo $$cat | sed 's/\$(CATOBJEXT)$$//'`; \
 	  dir=$$destdir/$$lang/LC_MESSAGES; \
