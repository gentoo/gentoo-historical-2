=== modified file 'etc/init.d/vz-gentoo.in'
--- etc/init.d/vz-gentoo.in	2008-11-15 11:39:55 +0000
+++ etc/init.d/vz-gentoo.in	2008-11-15 12:28:43 +0000
@@ -56,17 +56,29 @@
 # being enabled or not.
 setup_cron()
 {
-       [ -z "$SRC_CRONSCRIPT_DIR" ] && return
-       [ -d "$SRC_CRONSCRIPT_DIR" ] || return
-       install -m644 -o root -g root $SRC_CRONSCRIPT_DIR/vz \
-               $DST_CRONSCRIPT_DIR
+	[ -z "${SRC_CRONSCRIPT_DIR}" ] && return
+	if [ ! -d "${DST_CRONSCRIPT_DIR}" ]; then
+		if [ "${SKIP_CRON_WARNINGS}" == "no" ]; then
+                	ewarn "Automatic setup of cron jobs works only if a system cron daemon can use"
+			ewarn "\${DST_CRONSCRIPT_DIR} (${DST_CRONSCRIPT_DIR}) as a spool directory"
+			ewarn "(e.g. sys-process/vixie-cron can). On your system ${DST_CRONSCRIPT_DIR}"
+			ewarn "is even not a directory, thus set the following cron jobs, please:"
+			ewarn "*/5 * * * * root /usr/share/vzctl/scripts/vpsnetclean"
+			ewarn "*/5 * * * * root /usr/share/vzctl/scripts/vpsreboot"
+			ewarn "If you already did that and wish to avoid this warning edit /etc/conf.d/vz"
+			ewarn "and either comment SKIP_CRON_WARNINGS variable or set its value to yes."
+		fi
+        	return
+	fi
+	install -m644 -o root -g root $SRC_CRONSCRIPT_DIR/vz \
+		${DST_CRONSCRIPT_DIR}
 }
 
 remove_cron()
 {
-       [ -z "$SRC_CRONSCRIPT_DIR" ] && return
-       [ -d "$SRC_CRONSCRIPT_DIR" ] || return
-       cat > $DST_CRONSCRIPT_DIR/vz <<EOF
+	[ -z "${SRC_CRONSCRIPT_DIR}" ] && return
+	[ -d "${DST_CRONSCRIPT_DIR}" ] || return
+	cat > ${DST_CRONSCRIPT_DIR}/vz <<EOF
 # DO NOT EDIT THIS FILE!
 #
 # Contents of this file managed by /etc/init.d/vz script

=== modified file 'etc/vz.conf'
--- etc/vz.conf	2008-11-15 11:39:55 +0000
+++ etc/vz.conf	2008-11-15 12:10:13 +0000
@@ -9,6 +9,7 @@
 LOGFILE=/var/log/vzctl.log
 LOG_LEVEL=0
 VERBOSE=0
+SKIP_CRON_WARNINGS=no
 
 ## Disk quota parameters
 DISK_QUOTA=yes

