diff -urN vzctl-2.7.0-23/etc/cron.d/vpsnetclean vzctl-2.7.0-23_etc_vz/etc/cron.d/vpsnetclean
--- vzctl-2.7.0-23/etc/cron.d/vpsnetclean	2005-08-05 19:46:38.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/etc/cron.d/vpsnetclean	2005-10-23 00:31:40.956253816 +0400
@@ -10,5 +10,5 @@
 # Clean VPS network rules (arp,route,iptables)
 #
 
-*/5 * * * * root /etc/sysconfig/vz-scripts/vpsnetclean
+*/5 * * * * root /etc/vz/vpsnetclean
 
diff -urN vzctl-2.7.0-23/etc/cron.d/vpsreboot vzctl-2.7.0-23_etc_vz/etc/cron.d/vpsreboot
--- vzctl-2.7.0-23/etc/cron.d/vpsreboot	2005-08-05 20:40:45.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/etc/cron.d/vpsreboot	2005-10-23 00:31:40.957253664 +0400
@@ -11,4 +11,4 @@
 # If vzagent not installed you can enable reboot functionality by
 # commented out the line below.
 
-*/5 * * * * root /etc/sysconfig/vz-scripts/vpsreboot
+*/5 * * * * root /etc/vz/vpsreboot
diff -urN vzctl-2.7.0-23/etc/dists/Makefile vzctl-2.7.0-23_etc_vz/etc/dists/Makefile
--- vzctl-2.7.0-23/etc/dists/Makefile	2005-08-12 16:37:33.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/etc/dists/Makefile	2005-10-23 00:31:40.957253664 +0400
@@ -8,7 +8,7 @@
 # WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 
 INSTALL = install
-DISTCONFDIR = /etc/sysconfig/vz-scripts/dists
+DISTCONFDIR = /etc/vz/dists
 DISTSCRIPTDIR = ${DISTCONFDIR}/scripts
 DISTSCRIPTS = debian-add_ip.sh debian-del_ip.sh debian-set_hostname.sh 	\
 	functions postcreate.sh redhat-7.x_add_ip.sh redhat-add_ip.sh 	\
diff -urN vzctl-2.7.0-23/etc/vps-functions vzctl-2.7.0-23_etc_vz/etc/vps-functions
--- vzctl-2.7.0-23/etc/vps-functions	2005-10-17 13:55:59.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/etc/vps-functions	2005-10-23 00:31:40.957253664 +0400
@@ -26,7 +26,7 @@
 
 # iptables parameters
 VE_STATE_DIR="/var/vz/veip/"
-CONF_DIR="/etc/sysconfig/vz-scripts/"
+CONF_DIR="/etc/vz/"
 
 ARPSEND_CMD="arpsend -c 1 -w 1"
 IP_CMD=/sbin/ip
diff -urN vzctl-2.7.0-23/etc/vpsreboot vzctl-2.7.0-23_etc_vz/etc/vpsreboot
--- vzctl-2.7.0-23/etc/vpsreboot	2005-10-23 00:30:51.060839072 +0400
+++ vzctl-2.7.0-23_etc_vz/etc/vpsreboot	2005-10-23 00:31:40.958253512 +0400
@@ -11,7 +11,7 @@
 # Script to start VPS was rebooted
 #
 
-CONF_DIR=/etc/sysconfig/vz-scripts
+CONF_DIR=/etc/vz
 VE_INFO=/proc/vz/veinfo
 REBOOT_MARK='reboot'
 LOCKFILE='/var/lock/vereboot.lock'
diff -urN vzctl-2.7.0-23/include/dist.h vzctl-2.7.0-23_etc_vz/include/dist.h
--- vzctl-2.7.0-23/include/dist.h	2005-08-19 18:08:38.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/include/dist.h	2005-10-23 00:31:40.958253512 +0400
@@ -23,7 +23,7 @@
 #define	SET_UGID_QUOTA		6
 #define	POST_CREATE		7
 
-#define DIST_DIR		"/etc/sysconfig/vz-scripts/dists"
+#define DIST_DIR		"/etc/vz/dists"
 
 typedef struct {
 	char *def_ostmpl;
diff -urN vzctl-2.7.0-23/include/types.h vzctl-2.7.0-23_etc_vz/include/types.h
--- vzctl-2.7.0-23/include/types.h	2005-10-23 00:30:51.060839072 +0400
+++ vzctl-2.7.0-23_etc_vz/include/types.h	2005-10-23 00:31:40.958253512 +0400
@@ -12,7 +12,7 @@
 #define	_TYPES_H_
 
 #define GLOBAL_CFG              "/etc/conf.d/vz"
-#define VPS_CONF_DIR            "/etc/sysconfig/vz-scripts/"
+#define VPS_CONF_DIR            "/etc/vz/"
 #define LIB_DIR			"/usr/lib/vzctl/lib/"
 #define VPS_SCRIPTS_DIR         "/usr/lib/vzctl/scripts/"
 
diff -urN vzctl-2.7.0-23/include/vzlist.h vzctl-2.7.0-23_etc_vz/include/vzlist.h
--- vzctl-2.7.0-23/include/vzlist.h	2005-10-23 00:30:51.061838920 +0400
+++ vzctl-2.7.0-23_etc_vz/include/vzlist.h	2005-10-23 00:31:40.959253360 +0400
@@ -25,7 +25,7 @@
 #define PROCVEINFO	"/proc/vz/veinfo"
 #define PROCFSHED	"/proc/fairsched"
 
-#define SCRIPT_DIR	"/etc/sysconfig/vz-scripts/"
+#define SCRIPT_DIR	"/etc/vz/"
 #define CFG_FILE	"/etc/conf.d/vz"
 #define VZQUOTA		"/usr/sbin/vzquota"
 
diff -urN vzctl-2.7.0-23/man/vps.conf.5 vzctl-2.7.0-23_etc_vz/man/vps.conf.5
--- vzctl-2.7.0-23/man/vps.conf.5	2005-10-17 16:50:30.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/man/vps.conf.5	2005-10-23 00:31:40.959253360 +0400
@@ -3,10 +3,10 @@
 .SH NAME
 vps.conf \- configuration file for a Virtual Private Server.
 .SH SYNOPSIS
-/etc/sysconfig/vz-scripts/XXX.conf
+/etc/vz/XXX.conf
 .SH DESCRIPTION
 This is a configuration file for a VPS. It is stored as
-\fB/etc/sysconfig/vz-scripts/\fR\fIXXX\fB.conf\fR, where \fIXXX\fR
+\fB/etc/vz/\fR\fIXXX\fB.conf\fR, where \fIXXX\fR
 is the ID of the given VPS.
 .PP
 Configuration file consists of lines in the form
diff -urN vzctl-2.7.0-23/man/vps.conf.5.orig vzctl-2.7.0-23_etc_vz/man/vps.conf.5.orig
--- vzctl-2.7.0-23/man/vps.conf.5.orig	1970-01-01 03:00:00.000000000 +0300
+++ vzctl-2.7.0-23_etc_vz/man/vps.conf.5.orig	2005-10-23 00:31:31.488693104 +0400
@@ -0,0 +1,112 @@
+.\" $Id: vzctl-2.7.0.23-gentoo_etc_vz.patch,v 1.2 2005/10/21 21:00:14 phreak Exp $
+.TH vps.conf 5 "10 Aug 2005" "OpenVZ" "Virtual Private Server"
+.SH NAME
+vps.conf \- configuration file for a Virtual Private Server.
+.SH SYNOPSIS
+/etc/sysconfig/vz-scripts/XXX.conf
+.SH DESCRIPTION
+This is a configuration file for a VPS. It is stored as
+\fB/etc/sysconfig/vz-scripts/\fR\fIXXX\fB.conf\fR, where \fIXXX\fR
+is the ID of the given VPS.
+.PP
+Configuration file consists of lines in the form
+.PP
+\fBPARAMETER\fR="\fIvalue\fR"
+.PP
+All parameter names and values are case-sensitive. Quotes surrounding a
+\fIvalue\fR are required if value contains spaces, and are optional otherwise.
+Extra spaces are not allowed. All unrecognized lines will be ignored.
+.PP
+Please note that the file is created/modified by the \fBvzctl(8)\fR command with the \fIset --save\fR arguments, therefore changes to this file made otherwise than by \fBvzctl(8)\fR can be lost during the next \fBvzctl\fR run.
+.PP
+The meaning of each parameter is described in \fBvzctl(8)\fR, so here only
+the appropriate \fBvzctl set\fR option is given.
+.SS Miscellaneous parameters
+.IP \fBONBOOT\fR="\fByes\fR|\fBno\fR"
+Specifies whether this VPS will be started during system bootup.
+Default is \fBno\fR, meaning VPS will not be started
+if \fBONBOOT\fR parameter is omitted.
+Corresponds to the \fB--onboot\fR option.
+.IP \fBOSTEMPLATE\fR="\fItmpl_name\fR"
+Corresponds to the \fB--ostemplate\fR option.
+.IP \fBVE_ROOT\fR="\fIdirectory\fR"
+Corresponds to the \fB--root\fR option.
+.IP \fBVE_PRIVATE\fR="\fIdirectory\fR"
+Corresponds to the \fB--private\fR option.
+.IP \fBDISABLED\fR="\fByes\fR|\fBno\fR"
+Corresponds to the \fB--disabled\fR option.
+.IP \fBORIGIN_SAMPLE\fR="\fIname\fR"
+Name of VPS sample config VPS based on.
+.IP \fBCONFIG_CUSTOMIZED\fR="\fByes\fR|\fBno\fR"
+Set to \fByes\fR if VPS config was modified.
+.SS Resource management parameters
+.IP \fBNUMPROC\fR
+Corresponds to the \fB--numproc\fR options.
+.IP \fBNUMFILE\fR
+Corresponds to the \fB--numfile\fR options.
+.IP \fBNUMFLOCK\fR
+Corresponds to the \fB--numflock\fR options.
+.IP \fBNUMPTY\fR
+Corresponds to the \fB--numpty\fR options.
+.IP \fBNUMSIGINFO\fR
+Corresponds to the \fB--numsiginfo\fR options.
+.IP \fBNUMTCPSOCK\fR
+Corresponds to the \fB--numtcpsock\fR options.
+.IP \fBNUMOTHERSOCK\fR
+Corresponds to the \fB--numothersock\fR options.
+.IP \fBPRIVVMPAGES\fR
+Corresponds to the \fB--privvmpages\fR options.
+.IP \fBVMMGUARPAGES\fR
+Corresponds to the \fB--vmguarpages\fR options.
+.IP \fBOOMGUARPAGES\fR
+Corresponds to the \fB--oomguarpages\fR options.
+.IP \fBLOCKEDPAGES\fR
+Corresponds to the \fB--lockedpages\fR options.
+.IP \fBSHMPAGES\fR
+Corresponds to the \fB--shmpages\fR options.
+.IP \fBKMEMSIZE\fR
+Corresponds to the \fB--kmemsize\fR options.
+.IP \fBTCPSNDBUF\fR
+Corresponds to the \fB--tcpsndbuf\fR options.
+.IP \fBTCPRCVBUF\fR
+Corresponds to the \fB--tcprcvbuf\fR options.
+.IP \fBOTHERSOCKBUF\fR
+Corresponds to the \fB--othersockbuf\fR options.
+.IP \fBDGRAMRCVBUF\fR
+Corresponds to the \fB--dgramrcvbuf\fR options.
+.IP \fBDCACHESIZE\fR
+Corresponds to the \fB--dcachesize\fR options.
+.IP \fBNUMIPTENT\fR
+Corresponds to the \fB--numiptent\fR options.
+.IP \fBCPUUNITS\fR
+Corresponds to the \fB--cpuunits\fR option.
+.IP \fBDISKSPACE\fR="\fIsoftlimit\fR[:\fIhardlimit\fR]"
+Corresponds to the \fB--diskspace\fR parameter.
+.IP \fBDISKINODES\fR="\fIsoftlimit\fR[:\fIhardlimit\fR]"
+Corresponds to the \fB--diskinodes\fR parameter.
+.IP \fBQUOTATIME\fR="\fIseconds\fR"
+Corresponds to the \fB--quotatime\fR parameter.
+.IP \fBQUOTAUGIDLIMIT\fR="\fInum\fR"
+Corresponds to the \fB--quotaugidlimit\fR parameter.
+.IP \fBNOATIME\fR="\fByes\fR|\fBno\fR"
+Corresponds to the \fB--noatime\fR option.
+.IP \fBCAPABILITY\fR="\fIcapname\fR:\fBon\fR|\fBoff\fR\ [...]"
+Corresponds to the \fB--capability\fR option
+.SS Network related parameters
+.IP \fBIP_ADDRESS\fR="\fIaddress\ [address]\fR"
+Specifies the \fIaddress\fR the VPS will be assigned. Several addresses
+are divided by spaces.
+Corresponds to the \fB--ipadd\fR option.
+.IP \fBHOSTNAME\fR="\fIname\fR"
+Corresponds to the \fB--hostname\fR option.
+.IP \fBNAMESERVER\fR="\fIip\fR\ [\fIip\fR]"
+Corresponds to the \fB--nameserver\fR option. Several name server addresses
+are divided by spaces.
+.IP \fBSEARCHDOMAIN\fR="\fIdomain\fR\ [\fIdomain\fR]"
+Corresponds to the \fB--searchdomain\fR option. Several search domains
+are divided by spaces.
+.SH SEE ALSO
+.BR vzctl (8),
+.BR vz (5).
+.SH LICENSE
+Copyright (C) 2001-2005 by SWsoft.
diff -urN vzctl-2.7.0-23/man/vzctl.8 vzctl-2.7.0-23_etc_vz/man/vzctl.8
--- vzctl-2.7.0-23/man/vzctl.8	2005-10-23 00:30:51.062838768 +0400
+++ vzctl-2.7.0-23_etc_vz/man/vzctl.8	2005-10-23 00:31:40.960253208 +0400
@@ -318,7 +318,7 @@
 .TP
 \fB--applyconfig\fR \fIname\fR
 Read VPS parameters from VPS sample configuration file
-\f(CW\fB/etc/sysconfig/vz-scripts/ve-\fIname\fR\f(CW\fB.conf-sample\fR, and
+\f(CW\fB/etc/vz/ve-\fIname\fR\f(CW\fB.conf-sample\fR, and
 apply them, if --save option specified save to VPS config file. These parameters
 are not changed (\fBHOSTNAME\fR \fBIP_ADDRESS\fR \fBOSTEMPLATE\fR \fBVE_ROOT\fR \fBVE_PRIVATE\fR)
 .SS Performing VPS actions
@@ -328,7 +328,7 @@
 
 If the \fB--config\fR \fIname\fR option is specified, values from
 example configuration file
-\f(CW\fB/etc/sysconfig/vz-scripts/ve-\fIname\fR\f(CW\fB.conf-sample\fR
+\f(CW\fB/etc/vz/ve-\fIname\fR\f(CW\fB.conf-sample\fR
 are put into VPS configuration file. If VPS configuration file already exists,
 it will be removed.
 
@@ -422,7 +422,7 @@
 \f(CR
 /etc/conf.d/vz
 .br
-/etc/sysconfig/vz-scripts/vpsid.conf
+/etc/vz/vpsid.conf
 .br
 /proc/vz/veinfo
 .br
diff -urN vzctl-2.7.0-23/man/vzctl.8.orig vzctl-2.7.0-23_etc_vz/man/vzctl.8.orig
--- vzctl-2.7.0-23/man/vzctl.8.orig	2005-10-17 16:50:30.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/man/vzctl.8.orig	2005-10-23 00:31:31.488693104 +0400
@@ -420,7 +420,7 @@
 .SH FILES
 .ad l
 \f(CR
-/etc/sysconfig/vz
+/etc/conf.d/vz
 .br
 /etc/sysconfig/vz-scripts/vpsid.conf
 .br
diff -urN vzctl-2.7.0-23/man/vzsplit.8 vzctl-2.7.0-23_etc_vz/man/vzsplit.8
--- vzctl-2.7.0-23/man/vzsplit.8	2005-10-17 16:50:30.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/man/vzsplit.8	2005-10-23 00:31:54.328220968 +0400
@@ -16,7 +16,7 @@
 .TP
 \fB-f\fR \fIconf_name\fR
 Specify the configuration file name. The program output is placed to
-/etc/sysconfig/vz-scripts/ve-\fIconf_name\fR.conf-sample.
+/etc/vz/ve-\fIconf_name\fR.conf-sample.
 .TP
 \fB-s\fR \fIswapsize\fR
 Specify the swap size in Kbytes. If not provided in the option, the swap size will be read from /proc/meminfo.
diff -urN vzctl-2.7.0-23/man/vzsplit.8.orig vzctl-2.7.0-23_etc_vz/man/vzsplit.8.orig
--- vzctl-2.7.0-23/man/vzsplit.8.orig	1970-01-01 03:00:00.000000000 +0300
+++ vzctl-2.7.0-23_etc_vz/man/vzsplit.8.orig	2005-10-23 00:31:31.488693104 +0400
@@ -0,0 +1,30 @@
+.\" $Id: vzctl-2.7.0.23-gentoo_etc_vz.patch,v 1.2 2005/10/21 21:00:14 phreak Exp $
+.TH vzsplit 8 "20 Aug 2002" "OpenVZ" "Virtual Private Servers"
+.SH NAME
+vzsplit \- generate a sample VPS configuration file with a certain set of system resource control parameters.
+.SH SYNOPSIS
+vzsplit [\fB-n\fR \fInumve\fR] [\fB-f\fR \fIconf_name\fR] [\fB-s\fR \fIswapsize\fR]
+.SH DESCRIPTION
+The \fBvzsplit\fR utility is used to split the Hardware Node into equal parts. It generates a full set of system resource control parameters for the given number of Virtual Private Servers. The values are calculated from the total physical memory of the Hardware Node the utility runs on and the number of Virtual Private Servers the Hardware Node shall be able to run even if the given number of Virtual Private Servers consume all resources available.
+Without any option \fBvzsplit\fR prompts for the desired number of Virtual Private Servers and outputs the resulting resource control parameters to the screen.
+If there is not enough system resources to run the specified number of
+VPSs, an appropriate message is shown and the sample configuration file is not generated.
+.SH OPTIONS
+.TP
+\fB-n\fR \fInumve\fR
+Specify the number of VPSs.
+.TP
+\fB-f\fR \fIconf_name\fR
+Specify the configuration file name. The program output is placed to
+/etc/sysconfig/vz-scripts/ve-\fIconf_name\fR.conf-sample.
+.TP
+\fB-s\fR \fIswapsize\fR
+Specify the swap size in Kbytes. If not provided in the option, the swap size will be read from /proc/meminfo.
+.SH DIAGNOSTICS
+\fBvzsplit\fR returns 0 upon a sucessful execution. If anything goes wrong, it
+returns 1.	
+.SH SEE ALSO
+.BR vps.conf (5).
+.SH LICENSE
+Copyright (C) 2000-2005, SWsoft. Licensed under QPL.
+
diff -urN vzctl-2.7.0-23/src/Makefile vzctl-2.7.0-23_etc_vz/src/Makefile
--- vzctl-2.7.0-23/src/Makefile	2005-10-23 00:30:51.063838616 +0400
+++ vzctl-2.7.0-23_etc_vz/src/Makefile	2005-10-23 00:31:40.961253056 +0400
@@ -14,7 +14,7 @@
       LIBDIR = $(PREFIX)/lib/vzctl
     CACHEDIR = /vz/template/cache
    VZCONFDIR = /etc/conf.d
-  VPSCONFDIR = /etc/sysconfig/vz-scripts
+  VPSCONFDIR = /etc/vz
  DISTCONFDIR = $(VPSCONFDIR)/dists
 NETSCRIPTDIR = /etc/sysconfig/network-scripts
     CRONDDIR = /etc/cron.d
diff -urN vzctl-2.7.0-23/src/vzsplit.c vzctl-2.7.0-23_etc_vz/src/vzsplit.c
--- vzctl-2.7.0-23/src/vzsplit.c	2005-09-27 15:01:16.000000000 +0400
+++ vzctl-2.7.0-23_etc_vz/src/vzsplit.c	2005-10-23 00:31:40.962252904 +0400
@@ -27,7 +27,7 @@
 
 #define PROCMEM		"/proc/meminfo"
 #define PROCTHREADS	"/proc/sys/kernel/threads-max"
-#define OUTPATH		"/etc/sysconfig/vz-scripts/"
+#define OUTPATH		"/etc/vz/"
 #define PROCCPU		"/proc/cpuinfo"
 
 #define MAX_SL		3
