#!/sbin/runscript
# Copyright 1999-2003 Gentoo Technologies, Inc.
# Distributed under the terms of the GNU General Public License, v2 or later

HA_DIR=/etc/ha.d

depend() {
	use logger
	need net
}

# Run pre-startup script if it exists
RunStartStop() {

	[  -f $HA_DIR/resource.d/startstop ] && $HA_DIR/resource.d/startstop  "$@"

}

start() {
	ebegin "Starting Heartbeat"

	RunStartStop pre-start

	/usr/lib/heartbeat/heartbeat 2>&1
	ret=$?
	/usr/lib/heartbeat/ResourceManager verifyallidle

	RunStartStop post-start

	eend $ret
}

stop() {
	ebegin "Stopping Heartbeat"
	/usr/lib/heartbeat/heartbeat -k &> /dev/null
	eend $?
}

restart() {
	/usr/lib/heartbeat/heartbeat -r
}

status() {
	/usr/lib/heartbeat/heartbeat -s
}
