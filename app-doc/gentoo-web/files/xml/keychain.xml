<?xml version='1.0'?>
<guide type="project" link="/projects/keychain.html">
<title>Keychain</title>
<author title="Author"><mail link="drobbins@gentoo.org">Daniel Robbins</mail></author>

<abstract>
This page contains information about Keychain, an OpenSSH-compatible RSA/DSA key management
application for bash.
</abstract>

<version>1.6</version>
<date>15 Oct 2001</date>

<chapter>
<title>Keychain Intro</title>
<section>
<body>
<p>
Many of us use the excellent <uri
link="http://www.openssh.com">OpenSSH</uri> as a secure, encrypted replacement
for the venerable telnet and rsh commands.  One of OpenSSH's more intriguing
features is its ability to authenticate users using the RSA and DSA
authentication protocols, which are based upon a pair of complementary
numerical "keys".  And one of the main appeals of RSA and DSA authentication is the
promise of being able to establish connections to remote systems <e>without
supplying a password</e>.  The <c>keychain</c> bash script makes handling RSA and
DSA keys both convenient and secure.  It acts as a front-end to <c>ssh-agent</c>,
allowing you to easily have one long-running <c>ssh-agent</c> process <e>per system</e>,
rather than per login session.  This dramatically reduces the number of times you need
to enter your passphrase from once per new login session to once <e>every time your local
machine is rebooted.</e>
</p>
</body>
</section>
</chapter>
<chapter>
<title>The screenshot</title>
<section>
<body>
<figure link="/images/keychain-2.gif" caption="Keychain in action"/>

<p>Above, <c>drobbins</c> logs in to <c>cvs.gentoo.org</c>, and <c>keychain</c>
(called from <path>~/.bash_profile</path>) starts up.  <c>keychain</c> detects
a long-running <c>ssh-agent</c> process that already holds <c>drobbins</c>'
private keys and configures the shell environment appropriately.  Because
<c>keychain</c> "hooks in" to an existing <c>ssh-agent</c> process,
<c>drobbins</c> gains access to his keys without typing in his
passphrases, even though he just opened a brand new login session.  He can now
establish secure passwordless connections with any host configured to recognize
these keys.  In fact, <c>drobbins</c> will only need to enter his
passphrases again after <c>cvs.gentoo.org</c> is rebooted.  That's the only
time you really need to reinitialize the long-running <c>ssh-agent</c> process.
</p>
</body>
</section>
</chapter>
<chapter>
<title>The source</title>
<section>
<body>

<p>
The most recent release of <c>keychain</c> can be found here:<br/><br/>
<uri>http://www.ibiblio.org/gentoo/distfiles/keychain-1.6.tar.bz2</uri>
</p>
<pre caption="md5sum">
fba9bf2207c2f37322f0afead330dbef  keychain-1.6.tar.bz2
</pre>
</body>
</section>
</chapter>
<chapter>
<title>The IBM developerWorks articles</title>
<section>
<body>

<p><c>keychain</c> was first introduced in a series of <uri
link="http://www.ibm.com/developerworks">IBM developerWorks</uri> articles.
<b><uri link="http://www-106.ibm.com/developerworks/library/l-keyc.html">The first
keychain article</uri></b> introduces the concepts behind RSA/DSA key
authentication and shows you how to set up primitive (with passphrase) RSA/DSA
authentication, while the <b><uri link="http://www-106.ibm.com/developerworks/linux/library/l-keyc2/">second article</uri></b> shows you how to
use <c>keychain</c> to set up secure, <e>passwordless</e> <c>ssh</c> access in an
extremely convenient way.  <c>keychain</c> also provides a clean, secure way for
<c>cron</c> jobs to take advantage of RSA/DSA keys without having to use insecure
unencrypted private keys.  <e>A third <c>keychain</c> article will be appearing
shortly, which will cover <c>ssh-agent</c> authentication forwarding.</e>
</p>
</body>
</section>
</chapter>
<chapter>
<title>ChangeLog</title>
<section>
<body>
<pre caption="ChangeLog for KeyChain">
# ChangeLog for KeyChain; http://www.gentoo.org/projects/keychain
# Copyright 2001 Gentoo Technologies, Inc.; Distributed under the GPL
# Written by Daniel Robbins (drobbins@gentoo.org)

* keychain 1.6 (15 Oct 2001)

  13 Oct 2001; Ralf Horstmann (ralf.horstmann@webwasher.com)
  Add /usr/ucb to path for Solaris systems.
  
  11 Oct 2001; Idea from Joe Reid (jreid@vnet.net):
  Try to add multiple keys using ssh-add; avoid typing in identical
  passphrases more than once.  Good idea!

*keychain 1.5 (21 Sep 2001)

  21 Sep 2001; David Hull (hull@paracel.com):
  misc. compatibility, signal handling, cleanup fixes
  
  21 Sep 2001; 
  "ps" test to find the right one for your OS.

  20 Sep 2001; Marko Myllynen (myllynen@lut.fi):
  "grep [s]sh-agent" to "grep [s]sh-agent" (zsh fix)

*keychain 1.4 (20 Sep 2001)

  20 Sep 2001; David Hull (hull@paracel.com):
  "touch $foo" to ">$foo" optimization and other "don't fork" fixes.
  Converted ${foo#--} to a case statement for Solaris sh compatibility.

  20 Sep 2001;
  Try an alternate "ps" syntax if our default one fails.  This should
  give us Solaris and IRIX (sysV) compatibility without breaking BSD.

  20 Sep 2001; Hans Peter Verne (h.p.verne@usit.uio.no);
  "echo -e" to "echo $E" (for IRIX compatibility with --nocolor),
  optimization of grep ("grep [s]sh-agent")
  
  17 Sep 2001; Marko Myllynen (myllynen@lut.fi):
  Various fixes: trap signal 2 if signal INT not supported (NetBSD);
  handle invalid keys correctly; ancient version of ash didn't support ~,
  so using $HOME; correct zsh instruction; minor cleanups

*keychain 1.3 (12 Sep 2001)
  
  12 Sep 2001;
  Minor color changes; the cyan was hard to read on xterm-colored
  terms so it was switched to bold.  Additional --help text added.
  
  10 Sep 2001;
  We now use .ssh-agent-[hostname] instead of .ssh-agent.
  We now create a .ssh-agent-csh-[hostname] file that can be sourced
  by csh-compatible shells.  We also now kill all our existing 
  ssh-agent processes before starting a new one.

  10 Sep 2001; Robert R. Wal (rrw@hell.pl):
  Very nice NFS fixes, colorization fixes, tcsh redirect -> grep -v
  fix.  Thanks go out to others who sent me similar patches.

  10 Sep 2001; Johann Visagie (johann@egenetics.com):
  "source" to "." shell-compatibility fixes.  Thanks for the FreeBSD
  port.

  10 Sep 2001; Marko Myllynen (myllynen@lut.fi):
  rm -f $pidf after stopping ssh-agent fix

*keychain 1.2 

  09 Sep 2001; README updates to reflect new changes.
  
  09 Sep 2001; Marko Myllynen (myllynen@lut.fi):
  bash 1/zsh/sh compatibility; now only tries to kill *your*
  ssh-agent processes, version fix, .ssh-agent file creation error 
  detection.  Thanks! 

*keychain 1.1; fixes for calling "pidof"; README; ChangeLog

  07 Sep 2001;
  Addition of README stating that keychain requires bash 2.0 or greater,
  as well as quick install directions and web URL.

  07 Sep 2001;
  Explicitly added /sbin and /usr/sbin to path, and then called "pidof".
  I think that this is a bit more robust.
  
  06 Sep 2001; from John Ellson (ellson@lucent.com): 
  "pidof" changed to "/sbin/pidof", since it's probably not in $PATH
 
  06 Sep 2001;
  New ChangeLog! :)

*keychain 1.0; initial release (Aug 2001)
</pre>
</body>
</section>
</chapter>
</guide>

