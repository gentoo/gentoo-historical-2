diff -uNr jabref-2.1-orig/build.xml jabref-2.1/build.xml
--- jabref-2.1-orig/build.xml	2006-08-28 12:21:00.000000000 +1000
+++ jabref-2.1/build.xml	2006-08-28 12:11:50.000000000 +1000
@@ -166,17 +166,7 @@
                 <javac debug="off" deprecation="on" destdir="${build.classes}" source="1.4" target="1.4">
                         <src path="${java.dir}"/>
                         <exclude name="tests/**"/>
-                        <classpath>
-                                <pathelement path="${build.classes}" />
-                                <!--<pathelement location="${library.directory}/commons-httpclient-2.0.jar" />
-                                <pathelement location="${library.directory}/commons-logging.jar" />-->
-                                <pathelement location="${library.directory}/antlr.jar" />
-                                <pathelement location="${library.directory}/looks-2.0.4.jar" />
-                                <pathelement location="${library.directory}/forms-1.0.4.jar" />
-                                <pathelement location="${library.directory}/spin-1.4.jar" />
-                                <pathelement location="${library.directory}/glazedlists-1.5.0_java14.jar" />
-                                <pathelement location="${library.directory}/microba.jar" />
-                        </classpath>
+			<classpath refid="classpath"/>
                 </javac>
         </target>
 
@@ -185,14 +175,7 @@
                 <mkdir dir="${build.classes}" />
                 <!--deprecation="on"-->
                 <javac srcdir="${java.dir}/tests" debug="off" destdir="${build.classes}" source="1.4" target="1.4">
-                        <classpath>
-                                <pathelement path="${build.classes}" />
-                                <!--<pathelement location="${library.directory}/commons-httpclient-2.0.jar" />
-                                <pathelement location="${library.directory}/commons-logging.jar" />-->
-                                <pathelement location="${library.directory}/antlr.jar" />
-                                <pathelement location="${library.directory}/looks-2.0.4.jar" />
-                                <pathelement location="${library.directory}/spin-1.4.jar" />
-                        </classpath>
+			<classpath refid="classpath"/>
                 </javac>
 
         </target>
@@ -440,12 +423,7 @@
         <target name="pmd" description="SOFTWAREDESIGN: Project Mess Detector !;-)">
                 <echo>Checking Project Mess Detection (PMD) rulesets.</echo>
                 <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask">
-                        <classpath>
-                                <pathelement path="${classpath}" />
-                                <fileset dir="${library.directory}">
-                                        <include name="*.jar" />
-                                </fileset>
-                        </classpath>
+			<classpath refid="classpath"/>
                 </taskdef>
                 <!-- allowed Pretty Much Done rulsets -->
                 <!-- rulesets/basic.xml -->
@@ -476,12 +454,7 @@
                 <echo>WARNING: use environment variable: ANT_OPTS=-Xmx512m or this task will fail.</echo>
                 <echo>Checking for duplicated code using the Copy/Paste Detector (CPD).</echo>
                 <taskdef name="cpd" classname="net.sourceforge.pmd.cpd.CPDTask">
-                        <classpath>
-                                <pathelement path="${classpath}" />
-                                <fileset dir="${library.directory}">
-                                        <include name="*.jar" />
-                                </fileset>
-                        </classpath>
+			<classpath refid="classpath"/>
                 </taskdef>
                 <cpd format="text" minimumTokenCount="100" outputFile="${build.dir}/duplicated_code_report.txt">
                         <fileset dir="${src.dir}">
@@ -493,12 +466,7 @@
 
         <target name="javancss" description="SOFTWAREDESIGN: Determining the NCSS and CCN code metrics for JOELib.">
                 <taskdef name="javancss" classname="javancss.JavancssAntTask">
-                        <classpath>
-                                <pathelement path="${classpath}" />
-                                <fileset dir="${library.directory}">
-                                        <include name="*.jar" />
-                                </fileset>
-                        </classpath>
+			<classpath refid="classpath"/>
                 </taskdef>
                 <echo>Cyclomatic
 Complexity             Ease of       Risk
@@ -516,12 +484,7 @@
 
         <target name="jalopy" description="SOFTWAREDESIGN: source code formatter using the JOELib convention.">
                 <taskdef name="jalopy" classname="de.hunsicker.jalopy.plugin.ant.AntPlugin">
-                        <classpath>
-                                <pathelement path="${classpath}" />
-                                <fileset dir="${library.directory}">
-                                        <include name="*.jar" />
-                                </fileset>
-                        </classpath>
+			<classpath refid="classpath"/>
                 </taskdef>
                 <jalopy fileformat="unix" convention="${src.dir}/java/jalopy.format.convention.xml" history="file" historymethod="adler32" loglevel="error" threads="2" classpathref="classpath" backup="bak">
                         <fileset dir="${src.dir}">
@@ -539,16 +502,7 @@
                                 </fileset>
                         </batchtest>
 
-                        <classpath>
-                                <pathelement location="${build.lib}/jabref.jar" />
-                                <!--<pathelement location="${library.directory}/commons-httpclient-2.0.jar" />
-                                <pathelement location="${library.directory}/commons-logging.jar" />-->
-                                <pathelement location="${library.directory}/antlr.jar" />
-                                <pathelement location="${library.directory}/looks-2.0.4.jar" />
-                                <pathelement location="${library.directory}/looks-2.0.4.jar" />
-                                <pathelement location="${library.directory}/spin-1.4.jar" />
-                        </classpath>
-
+			<classpath refid="classpath"/>
                         <!--<test name="tests.net.sf.jabref.export.layout.format.AuthorLastFirstAbbreviatorTester"/>-->
                 </junit>
         </target>
