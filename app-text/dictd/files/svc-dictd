#!/bin/sh
#RCUPDATE:3 4:75:This line is required for script management

. /etc/rc.d/config/functions

SERVICE=dictd
opts="start stop"

prepconfig() {
	if [ ! -e /etc/dict/dictd.conf ]
	then
		eerror "dictd not started.  Config file not found."
		exit 1
	fi
	# if no dictionaries, skip startup.
	HASDICTS=`tail -1 /etc/dict/dictd.conf | grep LASTLINE`
	if [ -n "$HASDICTS" ]; then
		eerror "No dictionaries installed. No sense in running."
		exit 1
	fi
}

start() {
    ebegin "Starting supervised ${SERVICE}"
    prepconfig
	ln -sf ../services/${SERVICE} ${SVCDIR}/control/${SERVICE}
    eend $?
}

stop() {
    ebegin "Stopping supervised ${SERVICE}"
   	if [ -e ${SVCDIR}/control/${SERVICE} ]
	then
		/usr/bin/svc -dx ${SVCDIR}/control/${SERVICE}
		rm ${SVCDIR}/control/${SERVICE}
	fi
	eend $?
}

doservice ${@}

