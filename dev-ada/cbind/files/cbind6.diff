diff -Naur cbind6.orig/allocate.c cbind6/allocate.c
--- cbind6.orig/allocate.c	1995-05-19 16:53:10.000000000 +0200
+++ cbind6/allocate.c	2003-06-09 21:48:02.000000000 +0200
@@ -4,7 +4,7 @@
 #include <sys/types.h>
 #include <unistd.h>
 #include <string.h>
-#include <malloc.h>
+#include <stdlib.h>
 #include "ansi.h"
 #include "config.h"
 #include "allocate.h"
diff -Naur cbind6.orig/buffer.c cbind6/buffer.c
--- cbind6.orig/buffer.c	1995-05-19 16:53:44.000000000 +0200
+++ cbind6/buffer.c	2003-06-09 21:48:02.000000000 +0200
@@ -5,7 +5,7 @@
  */
 
 #include <sys/types.h>
-#include <malloc.h>
+#include <stdlib.h>
 #include "ansi.h"
 #include "buffer.h"
 #include "allocate.h"
diff -Naur cbind6.orig/cbind.c cbind6/cbind.c
--- cbind6.orig/cbind.c	1995-05-19 17:17:06.000000000 +0200
+++ cbind6/cbind.c	2003-06-09 21:48:02.000000000 +0200
@@ -6,7 +6,7 @@
 #include <sys/types.h>
 #include <string.h>
 #include <unistd.h>
-#include <malloc.h>
+#include <stdlib.h>
 
 #undef NULL
 #define NULL			0
diff -Naur cbind6.orig/cdep.c cbind6/cdep.c
--- cbind6.orig/cdep.c	1995-05-19 19:19:36.000000000 +0200
+++ cbind6/cdep.c	2003-06-09 21:48:02.000000000 +0200
@@ -12,6 +12,7 @@
 #include "cpp.h"
 #include "cpp_hide.h"
 #include "allocate.h"
+#include "host.h"
 
 #undef NULL
 #define NULL			0
diff -Naur cbind6.orig/errors.c cbind6/errors.c
--- cbind6.orig/errors.c	1994-10-28 19:44:44.000000000 +0100
+++ cbind6/errors.c	2003-06-09 21:48:02.000000000 +0200
@@ -118,9 +118,6 @@
 static void
 unix_error()
 {
-	extern char *sys_errlist[];
-	extern int sys_nerr;
-
 	if (errno != 0) {
 		if (errno > 0 && errno < sys_nerr) {
 			fputs(sys_errlist[errno], stderr);
diff -Naur cbind6.orig/files.c cbind6/files.c
--- cbind6.orig/files.c	1995-05-19 16:45:30.000000000 +0200
+++ cbind6/files.c	2003-06-09 21:48:02.000000000 +0200
@@ -1,5 +1,6 @@
 #include "ansi.h"
 #include "hostinfo.h"
+#include "host.h"
 #include "config.h"
 
 #include <sys/types.h>
@@ -11,7 +12,7 @@
 #include <sys/mman.h>
 #else
 #include <unistd.h>
-#include <malloc.h>
+#include <stdlib.h>
 #endif
 
 #undef NULL
diff -Naur cbind6.orig/hostinfo cbind6/hostinfo
--- cbind6.orig/hostinfo	1994-04-07 15:03:16.000000000 +0200
+++ cbind6/hostinfo	2003-06-09 21:48:02.000000000 +0200
@@ -4,25 +4,10 @@
 
 echo '/* This file is automatically generated */' > $1
 echo '#define _H_HOSTINFO_' >> $1
-htype >> $1
-
-cat > llchk.c << _STOP
-main()
-{
-        struct s {
-                char c;
-                long long x;
-		};
-        printf("\n#define SIZEOF_LONG_LONG\t\t%d\n", sizeof(long long));
-        printf("#define ALIGNOF_LONG_LONG\t\t%d\n\n",
-				sizeof(char) + ((sizeof(struct s) - (sizeof(char)+sizeof(long long)))));
-}
-_STOP
+./htype >> $1
 
 cc llchk.c >& /dev/null
 if ($status == 0) a.out >> $1
-rm -f a.out
-rm -f llchk.c
 
 echo '#define HOST_OS '`uname` >> $1
 
diff -Naur cbind6.orig/htype.c cbind6/htype.c
--- cbind6.orig/htype.c	1995-05-19 16:52:08.000000000 +0200
+++ cbind6/htype.c	2003-06-09 21:48:02.000000000 +0200
@@ -132,10 +132,14 @@
 	printf("\n#define CHARS_ARE_%sSIGNED\n", (((char)-1) < 0) ? "" : "UN");
 
 	if (*p == 1) {
+		puts("#ifndef BIG_ENDIAN");
 		puts("#define BIG_ENDIAN");
+		puts("#endif");
 	}
 	else {
+		puts("#ifndef LITTLE_ENDIAN");
 		puts("#define LITTLE_ENDIAN");
+		puts("#endif");
 	}
 
 	return 0;
diff -Naur cbind6.orig/llchk.c cbind6/llchk.c
--- cbind6.orig/llchk.c	1970-01-01 01:00:00.000000000 +0100
+++ cbind6/llchk.c	2003-06-09 21:48:02.000000000 +0200
@@ -0,0 +1,13 @@
+
+main()
+{
+        struct s {
+                char c;
+                long long x;
+		};
+        printf("\n#define SIZEOF_LONG_LONG\t\t%d\n", sizeof(long long));
+        printf("#define ALIGNOF_LONG_LONG\t\t%d\n\n",
+				sizeof(char) + ((sizeof(struct s) - (sizeof(char)+sizeof(long long)))));
+}
+
+
diff -Naur cbind6.orig/Makefile cbind6/Makefile
--- cbind6.orig/Makefile	1995-09-22 12:21:32.000000000 +0200
+++ cbind6/Makefile	2003-06-09 21:49:16.000000000 +0200
@@ -91,8 +91,11 @@
 
 install: all
 		- strip cbpp cbfe cbind cdep
-		- rm -f $(HOME)/bin/cbpp $(HOME)/bin/cbfe $(HOME)/bin/cbind $(HOME)/bin/cdep
-		- cp cbpp cbfe cbind cdep $(HOME)/bin
+		- rm -f $(PREFIX)/bin/cbpp $(PREFIX)/bin/cbfe $(PREFIX)/bin/cbind $(PREFIX)/bin/cdep
+		- install -D cbpp $(PREFIX)/bin/cbpp
+		- install -D cbfe $(PREFIX)/bin/cbfe
+		- install -D cbind $(PREFIX)/bin/cbind
+		- install -D cdep $(PREFIX)/bin/cdep
 
 
 
@@ -132,14 +135,14 @@
 		mkmf -f $(MAKEFILE)
 
 backup:
-		- rm -f $(HOME)/save/newc2a.tar.Z
-		tar -chf $(HOME)/save/newc2a.tar *.1 *.c *.h *.y *.prf $(SCRIPTS) DOCS README makefile
-		compress $(HOME)/save/newc2a.tar
+		- rm -f $(PREFIX)/save/newc2a.tar.Z
+		tar -chf $(PREFIX)/save/newc2a.tar *.1 *.c *.h *.y *.prf $(SCRIPTS) DOCS README makefile
+		compress $(PREFIX)/save/newc2a.tar
 
 touch:;	touch $(GENED_SRC)
 
 hostinfo.h: htype hostinfo
-		hostinfo $@
+		./hostinfo $@
 
 c_perf.c:	c.prf
 		gperf -N c_rsvd -t -p c.prf > $@
diff -Naur cbind6.orig/units.c cbind6/units.c
--- cbind6.orig/units.c	1995-09-22 12:06:46.000000000 +0200
+++ cbind6/units.c	2003-06-09 21:48:02.000000000 +0200
@@ -2,6 +2,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <stdio.h>
+#include "host.h"
 #include "ansi.h"
 #include "files.h"
 #include "units.h"
