Index: dga.c
===================================================================
RCS file: /cvs/xorg/app/xf86dga/dga.c,v
retrieving revision 1.2
diff -u -r1.2 dga.c
--- dga.c	23 Apr 2004 19:54:47 -0000	1.2
+++ dga.c	19 Jun 2006 21:31:33 -0000
@@ -16,6 +16,7 @@
 #include <X11/Xmd.h>
 #include <X11/extensions/xf86dga.h>
 #include <ctype.h>
+#include <errno.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <signal.h>
@@ -141,7 +142,10 @@
 
 #ifndef __UNIXOS2__
    /* Give up root privs */
-   setuid(getuid());
+   if (setuid(getuid()) == -1) {
+      fprintf(stderr, "Unable to change uid: %s\n", strerror(errno));
+      exit(2);
+   }
 #endif
 
    XF86DGASetViewPort(dis, DefaultScreen(dis), 0, 0);
