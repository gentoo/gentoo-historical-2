Index: ChangeLog
===================================================================
RCS file: /cvs/xorg/app/xdriinfo/ChangeLog,v
retrieving revision 1.6
retrieving revision 1.8
diff -u -b -B -r1.6 -r1.8
--- ChangeLog	15 Dec 2005 00:24:06 -0000	1.6
+++ ChangeLog	16 Jan 2006 10:54:14 -0000	1.8
@@ -1,3 +1,15 @@
+2006-01-16  Matthias Hopf  <mhopf@suse.de>
+
+	* xdriinfo.c:
+	GLX_GLXEXT_LEGACY -> GLX_GLXEXT_PROTOTYPES + glxext.h
+
+2006-01-13  Matthias Hopf  <mhopf@suse.de>
+
+	* configure.ac:
+	Using glXGetProcAddressARB instead of glXGetProcAddress.
+	* xdriinfo.c: (main):
+	Casting to GLubyte* to remove warning.
+
 2005-12-14  Kevin E. Martin  <kem-at-freedesktop-dot-org>
 
 	* configure.ac:
Index: configure.ac
===================================================================
RCS file: /cvs/xorg/app/xdriinfo/configure.ac,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -b -B -r1.7 -r1.8
--- configure.ac	15 Dec 2005 00:24:06 -0000	1.7
+++ configure.ac	13 Jan 2006 16:06:10 -0000	1.8
@@ -38,7 +38,7 @@
 AC_SUBST(XDRIINFO_LIBS)
 
 # Checks for non-pkg-config packages (Mesa or vendor OpenGL)
-AC_SEARCH_LIBS([glXGetProcAddress], [GL], [],
+AC_SEARCH_LIBS([glXGetProcAddressARB], [GL], [],
 	AC_MSG_FAILURE([cannot find GL library - make sure Mesa or other OpenGL package is installed]),
 	[$XDRIINFO_LIBS])
 
Index: xdriinfo.c
===================================================================
RCS file: /cvs/xorg/app/xdriinfo/xdriinfo.c,v
retrieving revision 1.2
retrieving revision 1.4
diff -u -b -B -r1.2 -r1.4
--- xdriinfo.c	30 Nov 2005 01:17:30 -0000	1.2
+++ xdriinfo.c	16 Jan 2006 10:54:14 -0000	1.4
@@ -22,8 +22,9 @@
  * 
  */
 
-#define GLX_GLXEXT_LEGACY
+#define GLX_GLXEXT_PROTOTYPES
 #include <GL/glx.h>
+#include <GL/glxext.h>
 #include <X11/Xlib.h>
 #include <stdio.h>
 #include <unistd.h>
@@ -58,8 +59,8 @@
     char *funcArg = NULL;
     char *dpyName = NULL;
 
-    GetScreenDriver = (glXGetScreenDriver_t *)glXGetProcAddressARB ("glXGetScreenDriver");
-    GetDriverConfig = (glXGetDriverConfig_t *)glXGetProcAddressARB ("glXGetDriverConfig");
+    GetScreenDriver = (glXGetScreenDriver_t *)glXGetProcAddressARB ((const GLubyte *)"glXGetScreenDriver");
+    GetDriverConfig = (glXGetDriverConfig_t *)glXGetProcAddressARB ((const GLubyte *)"glXGetDriverConfig");
     if (!GetScreenDriver || !GetDriverConfig) {
 	fprintf (stderr, "libGL is too old.\n");
 	return 1;
