--- 1/nv/nv.c	2004-11-07 16:11:33.593487328 +0200
+++ 2/nv/nv.c	2004-11-07 16:12:12.473576656 +0200
@@ -3156,6 +3156,8 @@ void NV_API_CALL nv_lock_rm(
     nv_linux_state_t *nvl = NV_GET_NVL_FROM_NV_STATE(nv);
     NO_COMPILER_WARNINGS(nvl);
 
+    preempt_disable();
+
     if (nvl->rm_lock_cpu == smp_processor_id())
     {
         nvl->rm_lock_count++;
@@ -3167,6 +3169,8 @@ void NV_API_CALL nv_lock_rm(
 
    nvl->rm_lock_cpu = smp_processor_id();
    nvl->rm_lock_count = 1;
+
+   preempt_enable();
 }
 
 void NV_API_CALL nv_unlock_rm(
