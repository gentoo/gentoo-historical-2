diff -urN NVIDIA-Linux-x86-1.0-5336/usr/src/nv/makefile NVIDIA-Linux-x86-1.0-5336.az/usr/src/nv/makefile
--- NVIDIA-Linux-x86-1.0-5336/usr/src/nv/makefile	2004-06-15 21:35:13.034445000 +0200
+++ NVIDIA-Linux-x86-1.0-5336.az/usr/src/nv/makefile	2004-06-15 21:48:43.410249152 +0200
@@ -12,4 +12,15 @@
 default: module
 
 module nvidia.o nvidia.ko install nv-linux.o clean module-install package-install print-module-filename: select_makefile
-	@ $(MAKE) --no-print-directory -f Makefile $@
+	@if [ "`ls -l Makefile`" == "Makefile.kbuild" ]; then \
+		if [ "${SYSSRC}" ]; then \
+			KERNEL_INCLUDE="${SYSSRC}/include"; \
+		elif [ "${SYSINCLUDE}" ]; then \
+			KERNEL_INCLUDE="${SYSINCLUDE}"; \
+		else \
+			KERNEL_INCLUDE="/lib/modules/`uname -r`/build/include"; \
+		fi; \
+		make -C "${KERNEL_INCLUDE}/../" M=`pwd` $@; \
+	else \
+		$(MAKE) --no-print-directory -f Makefile $@; \
+	fi
