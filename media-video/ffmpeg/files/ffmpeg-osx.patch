diff -Naur ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/configure ./configure
--- ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/configure	Mon Jul  5 14:06:16 2004
+++ ./configure	Sun Mar 20 23:48:10 2005
@@ -240,7 +240,7 @@
 make="gmake"
 ;;
 Darwin)
-cc="cc"
+cc="gcc"
 v4l="no"
 audio_oss="no"
 dv1394="no"
@@ -249,7 +249,8 @@
 extralibs=""
 darwin="yes"
 strip="strip -x"
-LDFLAGS="-Wl,-d"
+LDFLAGS="-Wl,-dynamic"
+SLIBSUF=".dylib"
 FFSLDFLAGS=-Wl,-bind_at_load
 ;;
 MINGW32*)
diff -Naur ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavcodec/Makefile ./libavcodec/Makefile
--- ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavcodec/Makefile	Fri Jun 18 09:11:15 2004
+++ ./libavcodec/Makefile	Sun Mar 20 23:48:10 2005
@@ -217,7 +217,7 @@
 dep:	depend
 
 clean: $(CLEANAMR)
-	rm -f *.o *.d *~ .depend $(LIB) $(SLIB) *.so i386/*.o i386/*~ \
+	rm -f *.o *.d *~ .depend $(LIB) $(SLIB) *.dylib *.so i386/*.o i386/*~ \
 	   armv4l/*.o armv4l/*~ \
 	   mlib/*.o mlib/*~ \
 	   alpha/*.o alpha/*~ \
@@ -269,8 +269,8 @@
 	install -s -m 755 $(SLIB) "$(prefix)"
 else
 	install -d $(prefix)/lib
-	install -s -m 755 $(SLIB) $(prefix)/lib/libavcodec-$(VERSION).so
-	ln -sf libavcodec-$(VERSION).so $(prefix)/lib/libavcodec.so
+	install -m 755 $(SLIB) $(prefix)/lib/libavcodec-$(VERSION)$(SLIBSUF)
+	ln -sf libavcodec-$(VERSION)$(SLIBSUF) $(prefix)/lib/libavcodec$(SLIBSUF)
 	ldconfig || true
 endif
 else
diff -Naur ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavcodec/libpostproc/Makefile ./libavcodec/libpostproc/Makefile
--- ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavcodec/libpostproc/Makefile	Sun May 11 07:26:35 2003
+++ ./libavcodec/libpostproc/Makefile	Sun Mar 20 23:48:11 2005
@@ -2,7 +2,11 @@
 include ../../config.mak
 
 ifeq ($(SHARED_PP),yes)
-SPPLIB = libpostproc.so
+ifeq ($(CONFIG_DARWIN),yes)
+	SPPLIB = libpostproc
+else
+	SPPLIB = libpostproc.so
+endif
 SPPVERSION = 0.0.1
 endif
 PPLIB = libpostproc.a
@@ -23,10 +27,10 @@
 all:    $(SWSLIB) $(PPLIB) $(SPPLIB)
 
 clean:
-	rm -f *.o *.a *~ *.so
+	rm -f *.o *.a *~ *.so *.dylib
 
 distclean:
-	rm -f Makefile.bak *.o *.a *~ *.so .depend
+	rm -f Makefile.bak *.o *.a *~ *.so *.dylib .depend
 
 dep:    depend
 
@@ -38,8 +42,13 @@
 	$(CC) -c $(CFLAGS) -fomit-frame-pointer -fPIC -DPIC -I.. -I../.. -o $@ $<
 
 $(SPPLIB): $(SPPOBJS)
-	$(CC) -shared -Wl,-soname,$(SPPLIB).0 \
-	-o $(SPPLIB) $(SPPOBJS)
+ifeq ($(CONFIG_DARWIN),yes)
+	$(CC) -dynamiclib -Wl,-install_name,$(SPPLIB).0.dylib \
+	-o $(SPPLIB).dylib $(SPPOBJS)
+else
+	$(CC) -shared -Wl,-soname,$(SPPLIB).0 \
+	-o $(SPPLIB) $(SPPOBJS)
+endif
 endif
 
 $(PPLIB): $(PPOBJS)
@@ -50,8 +59,13 @@
 install: all
 ifeq ($(SHARED_PP),yes)
 	install -d $(prefix)/lib
-	install -s -m 755 $(SPPLIB) $(prefix)/lib/$(SPPLIB).$(SPPVERSION)
-	ln -sf $(SPPLIB).$(SPPVERSION) $(prefix)/lib/$(SPPLIB)
+ifeq ($(CONFIG_DARWIN),yes)
+	install -m 755 $(SPPLIB).dylib $(prefix)/lib/$(SPPLIB).$(SPPVERSION).dylib
+	ln -sf $(SPPLIB).$(SPPVERSION).dylib $(prefix)/lib/$(SPPLIB).dylib
+else
+	install -s -m 755 $(SPPLIB) $(prefix)/lib/$(SPPLIB).$(SPPVERSION)
+	ln -sf $(SPPLIB).$(SPPVERSION) $(prefix)/lib/$(SPPLIB)
+endif
 	ldconfig || true
 	mkdir -p $(prefix)/include/postproc
 	install -m 644 postprocess.h $(prefix)/include/postproc/postprocess.h
diff -Naur ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavformat/Makefile ./libavformat/Makefile
--- ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/libavformat/Makefile	Sat Apr 24 11:16:23 2004
+++ ./libavformat/Makefile	Sun Mar 20 23:48:11 2005
@@ -18,6 +18,11 @@
       nut.o wc3movie.o mp3.o westwood.o segafilm.o idcin.o flic.o \
       sierravmd.o matroska.o
 
+CPU = $(shell uname)
+ifeq ($(CPU),Darwin)
+	OBJS+=../libavcodec/libavcodec.dylib
+endif
+
 ifeq ($(CONFIG_RISKY),yes)
 OBJS+= asf.o
 OBJS+= asf-enc.o
@@ -93,7 +98,7 @@
 	$(CC) $(SHFLAGS) -Wl,--output-def,$(@:.dll=.def) -o $@ $(OBJS) $(PPOBJS) $(EXTRALIBS) $(VPATH)/../libavcodec/avcodec.dll
 	-lib /machine:i386 /def:$(@:.dll=.def)
 else
-	$(CC) $(SHFLAGS) -o $@ $(OBJS) $(PPOBJS) $(EXTRALIBS)
+	$(CC) $(SHFLAGS) -o $@ $(OBJS) $(PPOBJS) $(EXTRALIBS) $(LDFLAGS)
 endif
 
 depend: $(SRCS)
@@ -105,8 +110,8 @@
 	install -s -m 755 $(SLIB) "$(prefix)"
 else
 	install -d $(prefix)/lib
-	install -s -m 755 $(SLIB) $(prefix)/lib/libavformat-$(VERSION).so
-	ln -sf libavformat-$(VERSION).so $(prefix)/lib/libavformat.so
+	install -m 755 $(SLIB) $(prefix)/lib/libavformat-$(VERSION)$(SLIBSUF)
+	ln -sf libavformat-$(VERSION)$(SLIBSUF) $(prefix)/lib/libavformat$(SLIBSUF)
 	ldconfig || true
 endif
 else
diff -Naur ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/vhook/Makefile ./vhook/Makefile
--- ../../../ffmpeg-0.4.9_pre1_old/work/ffmpeg/vhook/Makefile	Thu Jul  8 07:02:04 2004
+++ ./vhook/Makefile	Sun Mar 20 23:48:11 2005
@@ -5,22 +5,22 @@
 CFLAGS=-fPIC $(SHCFLAGS) -I.. -I$(SRC_PATH) -I$(SRC_PATH)/libavformat -I$(SRC_PATH)/libavcodec -DHAVE_AV_CONFIG_H

 ifeq ($(CONFIG_DARWIN),yes)
-SHFLAGS+=-flat_namespace -undefined suppress
+SHFLAGS=-bundle -avoid-version -undefined define_a_way 
 endif
-HOOKS=null.so fish.so ppm.so
+HOOKS=null$(SLIBSUF) fish$(SLIBSUF) ppm$(SLIBSUF)
 
 ifeq ($(HAVE_IMLIB2),yes)
-    HOOKS += imlib2.so
+    HOOKS += imlib2$(SLIBSUF)
 endif    
 
 ifeq ($(HAVE_FREETYPE2),yes)
-    HOOKS += drawtext.so
+    HOOKS += drawtext$(SLIBSUF)
     CFLAGS += `freetype-config --cflags`
 endif    
 
 all: $(HOOKS) 
 
-SRCS := $(HOOKS:.so=.c)
+SRCS := $(HOOKS:$(SLIBSUF)=.c)
 
 depend: $(SRCS)
 	$(CC) -MM $(CFLAGS) $^ 1>.depend
@@ -29,17 +29,17 @@
 	install -d "$(prefix)/lib/vhook"
 	install -m 755 $(HOOKS) "$(prefix)/lib/vhook"
 
-imlib2.so: imlib2.o
+imlib2$(SLIBSUF): imlib2.o
 	$(CC) -g -o $@ $(SHFLAGS) $< -lImlib2
 
-drawtext.so: drawtext.o
+drawtext$(SLIBSUF): drawtext.o
 	$(CC) -g -o $@ $(SHFLAGS) $< `freetype-config --libs`
 
-%.so: %.o
+%$(SLIBSUF): %.o
 	$(CC) -g -o $@ $(SHFLAGS) $<
 
 clean:
-	rm -f *.o *.d .depend *.so *~
+	rm -f *.o *.d .depend *$(SLIBSUF) *~
 
 ifneq ($(wildcard .depend),)
 include .depend
