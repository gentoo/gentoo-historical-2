From 8f5587c3d0bc4b5f075e4282215bda91a21fc12e Mon Sep 17 00:00:00 2001
From: Janne Grunau <janne-libav@jannau.net>
Date: Fri, 16 Nov 2012 14:55:08 +0100
Subject: [PATCH] cpu.h: define AV_CPU_FLAG_MMX2 for libavutil major 52

---
 libavutil/cpu.h     | 2 +-
 libavutil/version.h | 3 +++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/libavutil/cpu.h b/libavutil/cpu.h
index 01f7201..4929512 100644
--- a/libavutil/cpu.h
+++ b/libavutil/cpu.h
@@ -28,7 +28,7 @@
     /* lower 16 bits - CPU features */
 #define AV_CPU_FLAG_MMX          0x0001 ///< standard MMX
 #define AV_CPU_FLAG_MMXEXT       0x0002 ///< SSE integer functions or AMD MMX ext
-#if LIBAVUTIL_VERSION_MAJOR < 52
+#if FF_API_CPU_FLAG_MMX2
 #define AV_CPU_FLAG_MMX2         0x0002 ///< SSE integer functions or AMD MMX ext
 #endif
 #define AV_CPU_FLAG_3DNOW        0x0004 ///< AMD 3DNOW
diff --git a/libavutil/version.h b/libavutil/version.h
index 6f79eeb..f69c73e 100644
--- a/libavutil/version.h
+++ b/libavutil/version.h
@@ -76,6 +76,9 @@
 #ifndef FF_API_AUDIOCONVERT
 #define FF_API_AUDIOCONVERT             (LIBAVUTIL_VERSION_MAJOR < 53)
 #endif
+#ifndef FF_API_CPU_FLAG_MMX2
+#define FF_API_CPU_FLAG_MMX2            (LIBAVUTIL_VERSION_MAJOR < 53)
+#endif
 
 /**
  * @}
-- 
1.7.12

