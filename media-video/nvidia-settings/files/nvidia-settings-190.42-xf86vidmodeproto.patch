--- src/libXNVCtrlAttributes/NvCtrlAttributesVidMode.c
+++ src/libXNVCtrlAttributes/NvCtrlAttributesVidMode.c
@@ -28,6 +28,9 @@
 #include "msg.h"
 
 #include <X11/extensions/xf86vmode.h>
+#if !defined(XF86VIDMODE_MAJOR_VERSION) || !defined(XF86VIDMODE_MINOR_VERSION)
+#include <X11/extensions/xf86vmproto.h>
+#endif /* XF86VidMode Extension protocol defines */
 
 #include <stdlib.h>
 #include <string.h>
