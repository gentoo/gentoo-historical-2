#! /bin/sh /usr/share/dpatch/dpatch-run
## 10_gcc4.4.dpatch by  <Gerald Dachs <gda@dachsweb.de>>
##
## All lines beginning with `## DP:' are a description of the patch.
## DP: No description.

@DPATCH@
diff -urNad noad-0.7.0~/svdrpc.cpp noad-0.7.0/svdrpc.cpp
--- noad-0.7.0~/svdrpc.cpp	2009-12-22 23:20:50.000000000 +0100
+++ noad-0.7.0/svdrpc.cpp	2009-12-22 23:23:11.000000000 +0100
@@ -256,7 +256,7 @@
 {
   char *baseName = NULL;
   char *cp = NULL;
-  char *vend = strchr(filename,'/');
+  const char *vend = strchr(filename,'/');
   if( vend )
     vend = strchr(vend+1,'/');
   if( vend )
@@ -265,9 +265,9 @@
     asprintf(&baseName,"mesg %s %s",msg, filename);
   if( baseName[strlen(baseName)-1] == '/' )
     baseName[strlen(baseName)-1] = '\0';
-  vend = strrchr(baseName, '/');
-  if( vend )
-    *vend = '\0';
+  char *vend1 = strrchr(baseName, '/');
+  if( vend1 )
+    *vend1 = '\0';
   asprintf(&cp,"%s\r\n",baseName);
 
   VDRMessage(cp);
diff -urNad noad-0.7.0~/vdr_cl.cpp noad-0.7.0/vdr_cl.cpp
--- noad-0.7.0~/vdr_cl.cpp	2009-12-22 23:20:50.000000000 +0100
+++ noad-0.7.0/vdr_cl.cpp	2009-12-22 23:20:50.000000000 +0100
@@ -1200,7 +1200,7 @@
   sortBuffer = NULL;
   fileName = strdup(FileName);
   FileName += strlen(VideoDirectory) + 1;
-  char *p = strrchr(FileName, '/');
+  const char *p = strrchr(FileName, '/');
 
   name = NULL;
   summary = NULL;

diff -Naur noad-0.7.0.orig/showindex.cpp noad-0.7.0/showindex.cpp
--- noad-0.7.0.orig/showindex.cpp	2010-01-05 19:22:48.000000000 +0100
+++ noad-0.7.0/showindex.cpp	2010-01-05 19:23:31.000000000 +0100
@@ -46,8 +46,8 @@
   uchar PictureType;        // current picture-type
   int Length;               // frame-lenght of current frame
   char pictypes[]= { 'U','I','P','B' };
-  char *indents[]= { "","","  ","    " };
-  char *indents2[]= { "","    ","  ","" };
+  const char *indents[]= { "","","  ","    " };
+  const char *indents2[]= { "","    ","  ","" };
   int lastFile=0;
   int lastOffset = 0;
   unsigned char readBuffer[BYTES_TO_READ+1];
