Index: avidemux/ADM_audio/audio_mpegidentify.cpp
===================================================================
RCS file: /cvsroot/avidemux/avidemux/avidemux/ADM_audio/audio_mpegidentify.cpp,v
retrieving revision 1.4
diff -u -r1.4 audio_mpegidentify.cpp
--- avidemux/ADM_audio/audio_mpegidentify.cpp	19 Feb 2005 16:07:20 -0000	1.4
+++ avidemux/ADM_audio/audio_mpegidentify.cpp	20 Feb 2005 15:35:11 -0000
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 #include "aviaudio.hxx"
 
-#include "ADM_audio/ADM_mp3info.h"
+#include "ADM_audio/ADM_mp3info.h" 
 
    
 uint8_t mpegAudioIdentify(uint8_t *ptr, uint32_t maxLookUp, WAVHeader *header, uint8_t *tokens)
@@ -58,9 +58,12 @@
         if(info.layer==3) header->encoding=WAV_MP3;
                 else header->encoding=WAV_MP2;
 
+        if(tokens)
+        {
                 tokens[0]=ptr[offset+1];
                 tokens[1]=ptr[offset+2]&0xfd;
                 tokens[2]=ptr[offset+3];
+        }
 #define DUMPX(x) printf(#x": %d\n",info.x);
                 DUMPX( level);                    
                 DUMPX( layer);

