diff -urpN transcode-0.6.11/config.h.in transcode-0.6.11.az/config.h.in
--- transcode-0.6.11/config.h.in	2003-11-06 22:00:11.037925040 +0200
+++ transcode-0.6.11.az/config.h.in	2003-11-06 21:53:14.481251280 +0200
@@ -1,3 +1,6 @@
+#ifndef __CONFIG_H
+#define __CONFIG_H
+
 /* config.h.in.  Generated from configure.in by autoheader.  */
 
 /* Define if your CPU is PPC */
@@ -390,3 +393,5 @@
 
 /* Define to `unsigned' if <sys/types.h> does not define. */
 #undef size_t
+
+#endif /* __CONFIG_H */
diff -urpN transcode-0.6.11/ffmpeg/av_config.h transcode-0.6.11.az/ffmpeg/av_config.h
--- transcode-0.6.11/ffmpeg/av_config.h	2003-11-06 22:00:11.038924888 +0200
+++ transcode-0.6.11.az/ffmpeg/av_config.h	2003-11-06 22:04:33.472028992 +0200
@@ -1,4 +1,12 @@
 /* Map transcode configure defines to libavcodecs */
+#ifndef __AV_CONFIG_H
+#define __AV_CONFIG_H
+
+/* Kludge to see if we had HAVE_MMX defined before we included
+ * config.h - see below ... */
+#ifndef HAVE_MMX
+#define HAD_MMX_FALSE
+#endif
 
 #include "config.h"
 
@@ -15,6 +23,13 @@
 #  define ARCH_POWERPC
 #endif
 
+/* We use HAVE_MMX, but for ffmpeg the Makefile's set it, so
+ * unset it here, else ffmpeg use MMX constructs, even if we
+ * have --disable-mmx */
+#if defined(HAD_MMX_FALSE) && defined(HAVE_MMX)
+#undef HAVE_MMX
+#endif
+
 #ifdef HAVE_DLOPEN
 #  define CONFIG_HAVE_DLOPEN 1
 #endif
@@ -44,3 +59,5 @@
 #define CONFIG_ZLIB 1
 #define SIMPLE_IDCT 1
 #define restrict __restrict__
+
+#endif /* __AV_CONFIG_H */
