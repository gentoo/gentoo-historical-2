#!/sbin/runscript

flumotion_manager_pidfile=/var/run/flumotion/manager.planet.pid
flumotion_worker_pidfile=/var/run/flumotion/worker.default.pid

depend() {
    need net
}

start() {
    ebegin "Starting Flumotion Manager"
    HOME=/usr/share/flumotion start-stop-daemon --start --chuid flumotion:flumotion --pidfile ${flumotion_manager_pidfile} --exec /usr/bin/flumotion-manager -- -D /etc/flumotion/managers/default/planet.xml 
    eend $?
    ebegin "Starting Flumotion Worker"
    HOME=/usr/share/flumotion start-stop-daemon --start --chuid flumotion:flumotion --pidfile ${flumotion_worker_pidfile} --exec /usr/bin/flumotion-worker -- -D /etc/flumotion/workers/default.xml -ndefault
    eend $?
}

stop() {
    ebegin "Stopping Flumotion Worker"
    start-stop-daemon --stop --pidfile ${flumotion_worker_pidfile}
    eend $?
    ebegin "Stopping Flumotion Manager"
    start-stop-daemon --stop --pidfile ${flumotion_manager_pidfile}
    eend $?
}
