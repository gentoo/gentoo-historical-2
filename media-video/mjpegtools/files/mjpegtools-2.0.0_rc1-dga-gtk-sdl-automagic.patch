--- configure.ac	2011/04/30 15:39:10	1.66
+++ configure.ac	2011/04/30 16:00:36	1.67
@@ -55,6 +55,15 @@
 AC_ARG_WITH(libpng,
             AC_HELP_STRING([--without-libpng], [Do not use libpng.]),
             [], [with_libpng=yes])
+AC_ARG_WITH(dga,
+	    AC_HELP_STRING([--without-dga], [Do not use dga.]),
+	    [], [with_dga=yes])
+AC_ARG_WITH(gtk,
+	    AC_HELP_STRING([--without-gtk], [Do not use gtk.]),
+	    [], [with_gtk=yes])
+AC_ARG_WITH(libsdl,
+	    AC_HELP_STRING([--without-libsdl], [Do not use libsdl.]),
+	    [], [with_libsdl=yes])
 AC_GNU_SOURCE
 
 dnl Initialize libtool
@@ -260,29 +269,42 @@
 dnl ********************************************************************
 dnl Check for DGA (for v4l-conf)
 dnl ********************************************************************
-AC_SUBST(V4LCONF_LIBS)
-AC_CHECK_LIB(Xxf86dga, XF86DGAQueryExtension,
-	V4LCONF_LIBS="$X_LIBS -lXxf86dga" 
-	AC_DEFINE(HAVE_LIBXXF86DGA,1, [libxf86dga is present]),,
-	$X_LIBS $X_PRE_LIBS -lXext -lX11 $X_EXTRA_LIBS)
+have_dga=false
+if test x$with_dga != xno ; then
+	AC_SUBST(V4LCONF_LIBS)
+	AC_CHECK_LIB(Xxf86dga, XF86DGAQueryExtension,
+		     V4LCONF_LIBS="$X_LIBS -lXxf86dga"
+		     have_dga="true"
+		     AC_DEFINE(HAVE_LIBXXF86DGA,1, [libxf86dga is present]),
+		     have_dga="false",
+		     $X_LIBS $X_PRE_LIBS -lXext -lX11 $X_EXTRA_LIBS)
+fi
+AM_CONDITIONAL(HAVE_LIBXXF86DGA, test x$have_dga = xtrue)
 
 dnl ********************************************************************
 dnl Check for Gtk+/glib (for glav).  2.4.0 or greater required (should
 dnl not be a problem on recent distributions).
 dnl   (defines GTK_CFLAGS and GTK_LIBS)
 dnl ********************************************************************
-PKG_CHECK_MODULES(GTK, [gtk+-2.0 >= 2.4.0], have_gtk="true", have_gtk="false")
+have_gtk=false
+if test x$with_gtk != xno ; then
+	PKG_CHECK_MODULES(GTK, [gtk+-2.0 >= 2.4.0],
+			  have_gtk="true", have_gtk="false")
+fi
 AM_CONDITIONAL(HAVE_GTK, test x$have_gtk = xtrue)
 
 dnl ********************************************************************
 dnl Check for the SDL library (for software playback)
 dnl   (defines SDL_CFLAGS and SDL_LIBS)
 dnl ********************************************************************
-AM_PATH_SDL(1.1.3,
-            [have_sdl=true
-             AC_DEFINE(HAVE_SDL, 1, [SDL library present]) ],
-            [have_sdl=false])
-AM_CONDITIONAL(HAVE_SDL, test x$have_sdl = xtrue)
+have_sdl=false
+if test x$with_libsdl != xno ; then
+  PKG_CHECK_MODULES(SDL, [sdl > 1.1.3],
+		    [have_sdl=true
+		     AC_DEFINE(HAVE_SDL, 1, [libsdl > 1.1.3 present])],
+		    [have_sdl=false])
+fi
+AM_CONDITIONAL(HAVE_SDL, test x$have_sdl = xtrue)			  
 
 dnl ***
 dnl Check for SDL_gfx which is used by y4mhist to display a graphical 
