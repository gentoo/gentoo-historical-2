--- fuser.orig/fuser.c	2006-09-10 18:58:37 +0000
+++ fuser/fuser.c	2006-09-10 19:00:12 +0000
@@ -608,6 +608,7 @@
 	char		*ep;
 	char		*kernimg = NULL; /* We are using curr. sys by default */
 	char		*mcore = NULL;
+	int		retval = 1; /* Return 1 unless we find any open files */
 
 	while ((ch = getopt(argc, argv, "C:K:cfkms:u")) != -1)
 		switch(ch) {
@@ -694,6 +695,9 @@
 			ufl = get_uflags(rfile, pinfo);
 
 			if (ufl != 0) {
+				/* Found a file, so return 0 */
+				retval = 0;
+
 				print_file_info(pinfo->pid, \
 				    pinfo->uid, ufl);
 				if ((flags & KFLAG) != 0)
@@ -707,8 +711,7 @@
 	SLIST_FREE(&prclist, next, pinfo_free);
 	(void)kvm_close(kd);

-	return 0;
-		
+	return retval;
 }
 
 /*
