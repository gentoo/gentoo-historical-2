diff -aurN gnome-vfs-2.8.1-orig/configure.in gnome-vfs-2.8.1/configure.in
--- gnome-vfs-2.8.1-orig/configure.in	2004-09-14 12:23:25.000000000 -0400
+++ gnome-vfs-2.8.1/configure.in	2004-09-21 17:48:34.136579880 -0400
@@ -676,12 +676,16 @@
 dnl Howl
 dnl ****************************
 
-PKG_CHECK_MODULES(HOWL, howl >= 0.9.6,
-		  [AM_CONDITIONAL(HAVE_HOWL, true)
-		   AC_DEFINE(HAVE_HOWL, [], [Set if we can use howl])],
-	          [AM_CONDITIONAL(HAVE_HOWL, false)])
-AC_SUBST(HOWL_CFLAGS)
-AC_SUBST(HOWL_LIBS)
+AM_CONDITIONAL(HAVE_HOWL, false)
+AC_ARG_ENABLE(howl, [  --disable-howl     build without howl support])
+if test "x$enable_howl" != "xno"; then
+	PKG_CHECK_MODULES(HOWL, howl >= 0.9.6,
+		  	[AM_CONDITIONAL(HAVE_HOWL, true)
+		   	AC_DEFINE(HAVE_HOWL, [], [Set if we can use howl])],
+	          	[AM_CONDITIONAL(HAVE_HOWL, false)])
+	AC_SUBST(HOWL_CFLAGS)
+	AC_SUBST(HOWL_LIBS)
+fi
 
 dnl ****************************
 dnl HAL stuff
diff -aurN gnome-vfs-2.8.1-orig/modules/Makefile.am gnome-vfs-2.8.1/modules/Makefile.am
--- gnome-vfs-2.8.1-orig/modules/Makefile.am	2004-09-14 12:24:15.000000000 -0400
+++ gnome-vfs-2.8.1/modules/Makefile.am	2004-09-21 17:48:34.137579728 -0400
@@ -50,6 +50,11 @@
 SMB_LTLIBS = 
 endif
 
+if HAVE_HOWL
+HOWL_LTLIBS = libdns-sd.la
+else
+HOWL_LTLIBS = 
+endif
 
 if BUILD_CDEMENU_MODULE
 CDEMENU_LTLIBS = libcdemenu-desktop.la
@@ -63,7 +68,7 @@
 modules_LTLIBRARIES =				\
 	$(CDDA_LTLIBS)				\
 	libcomputer.la				\
-	libdns-sd.la				\
+	$(HOWL_LTLIBS)				\
 	libfile.la				\
 	libnetwork.la				\
 	libnntp.la				\
@@ -90,13 +95,16 @@
 if HAVE_SAMBA
 SMB_CONF = smb-module.conf
 endif
+if HAVE_HOWL
+HOWL_CONF = dns-sd-module.conf
+endif
 if HAVE_SSL
 SSL_CONF = ssl-modules.conf
 endif
 if BUILD_CDEMENU_MODULE
 CDE_CONF = cdemenu-module.conf
 endif
-modulesconf_DATA = default-modules.conf $(CDDA_CONF) $(SMB_CONF) $(SSL_CONF) $(CDE_CONF)
+modulesconf_DATA = default-modules.conf $(CDDA_CONF) $(SMB_CONF) $(HOWL_CONF) $(SSL_CONF) $(CDE_CONF)
 
 ###  `cdda' method
 
diff -aurN gnome-vfs-2.8.1-orig/modules/default-modules.conf gnome-vfs-2.8.1/modules/default-modules.conf
--- gnome-vfs-2.8.1-orig/modules/default-modules.conf	2004-08-13 02:52:12.000000000 -0400
+++ gnome-vfs-2.8.1/modules/default-modules.conf	2004-09-21 17:49:12.957678176 -0400
@@ -12,8 +12,6 @@
 
 computer: computer
 
-dns-sd: dns-sd
-
 file: file
 
 test: vfs-test
diff -aurN gnome-vfs-2.8.1-orig/modules/dns-sd-module.conf gnome-vfs-2.8.1/modules/dns-sd-module.conf
--- gnome-vfs-2.8.1-orig/modules/dns-sd-module.conf	1969-12-31 19:00:00.000000000 -0500
+++ gnome-vfs-2.8.1/modules/dns-sd-module.conf	2004-09-21 17:48:34.138579576 -0400
@@ -0,0 +1 @@
+dns-sd: dns-sd
