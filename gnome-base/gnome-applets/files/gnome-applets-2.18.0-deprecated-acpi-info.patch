--- gnome-applets-2.16.2-orig/battstat/acpi-linux.c	2007-05-01 21:44:17.000000000 -0500
+++ gnome-applets-2.16.2/battstat/acpi-linux.c	2007-05-01 21:45:50.000000000 -0500
@@ -200,22 +200,21 @@
   acpiinfo->max_capacity = 0;
   acpiinfo->low_capacity = 0;
   acpiinfo->critical_capacity = 0;
+  acpiinfo->ac_state_state = "state";
+  acpiinfo->batt_state_state = "state";
+  acpiinfo->charging_state = "charging state";
 
   hash = read_file ("/proc/acpi/info", buf, sizeof (buf));
-  if (!hash)
-    return FALSE;
-
-  acpi_ver = read_ulong (hash, "version");
-  g_hash_table_destroy (hash);
-
-  if (acpi_ver < (gulong)20020208) {
-    acpiinfo->ac_state_state = "status";
-    acpiinfo->batt_state_state = "status";
-    acpiinfo->charging_state = "state";
-  } else {
-    acpiinfo->ac_state_state = "state";
-    acpiinfo->batt_state_state = "state";
-    acpiinfo->charging_state = "charging state";
+  if (hash)
+  {
+	  acpi_ver = read_ulong (hash, "version");
+	  g_hash_table_destroy (hash);
+
+	  if (acpi_ver < (gulong)20020208) {
+		  acpiinfo->ac_state_state = "status";
+		  acpiinfo->batt_state_state = "status";
+		  acpiinfo->charging_state = "state";
+	  }
   }
 
   procdir=opendir("/proc/acpi/battery/");
