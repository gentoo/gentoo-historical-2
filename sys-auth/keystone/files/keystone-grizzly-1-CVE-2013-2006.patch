From c5037dd6b82909efaaa8720e8cfa8bdb8b4a0edd Mon Sep 17 00:00:00 2001
From: Xuhan Peng <xuhanp@cn.ibm.com>
Date: Fri, 12 Apr 2013 16:19:37 +0800
Subject: [PATCH] Mark LDAP password and admin_token secret

Add secret=True to LDAP password and admin_token
of keystone configuration.

Fix bug #1172195

Change-Id: I8ef7f705e3f6b374ff427c20eb761892d5146a75
(cherry picked from commit d43e2a51a1ed7adbed3c5ddf001d46bc4a824ae8)
---
 keystone/common/config.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/keystone/common/config.py b/keystone/common/config.py
index edecee0..82c31e6 100644
--- a/keystone/common/config.py
+++ b/keystone/common/config.py
@@ -188,7 +188,7 @@ def configure():
     register_cli_str('pydev-debug-host', default=None)
     register_cli_int('pydev-debug-port', default=None)
 
-    register_str('admin_token', default='ADMIN')
+    register_str('admin_token', secret=True, default='ADMIN')
     register_str('bind_host', default='0.0.0.0')
     register_int('compute_port', default=8774)
     register_int('admin_port', default=35357)
@@ -271,7 +271,7 @@ def configure():
     # ldap
     register_str('url', group='ldap', default='ldap://localhost')
     register_str('user', group='ldap', default=None)
-    register_str('password', group='ldap', default=None)
+    register_str('password', group='ldap', secret=True, default=None)
     register_str('suffix', group='ldap', default='cn=example,cn=com')
     register_bool('use_dumb_member', group='ldap', default=False)
     register_str('dumb_member', group='ldap', default='cn=dumb,dc=nonexistent')
-- 
1.8.1.5

