diff -ru Makefile magic-7.1/Makefile
--- Makefile	2001-01-14 20:22:26.000000000 +0100
+++ magic-7.1/Makefile	2003-11-17 17:05:41.000000000 +0100
@@ -56,7 +56,7 @@
 
 install-real: install-dirs
 	for dir in ${INSTALL_CAD_DIRS}; do \
-		(cd $$dir && ${MAKE} install); done
+		(cd $$dir && ${MAKE} DESTDIR="${DESTDIR}" install); done
 
 install-dirs:
 	${MAGICDIR}/scripts/mkdirs ${BINDIR} ${MANDIR} ${SYSDIR} ${SCMDIR}
diff -ru misc/paths.h magic-7.1/misc/paths.h
--- misc/paths.h	2003-11-17 17:01:50.000000000 +0100
+++ magic-7.1/misc/paths.h	2003-11-17 17:09:29.000000000 +0100
@@ -27,18 +27,18 @@
  *
  */
 
-#define	EXT_PATH	"~cad/share/lib/magic/%s ~cad/share/lib/magic/tutorial"
-#define DOT_MAGIC_PATH	"~cad/share/lib/magic/sys ~ ."
+#define	EXT_PATH	"/usr/share/magic/%s /usr/share/magic/tutorial"
+#define DOT_MAGIC_PATH	"/usr/share/magic/sys ~ ."
 
 /*
  * Paths used by 'magic'.
  *
  */
-#define MAGIC_CMOS_PATH	"~cad/share/lib/magic/cmos ~cad/share/lib/magic/tutorial"
-#define MAGIC_NMOS_PATH	"~cad/share/lib/magic/nmos ~cad/share/lib/magic/tutorial"
-#define MAGIC_SYS_PATH	". ~cad/share/lib/magic/sys ~cad/share/lib/magic/sys/current"
-#define MAGIC_SYS_DOT	"~cad/share/lib/magic/sys/.magic"
-#define MAGIC_LIB_PATH	"~cad/share/lib/magic/%s ~cad/share/lib/magic/tutorial"
+#define MAGIC_CMOS_PATH	"/usr/share/magic/cmos /usr/share/magic/tutorial"
+#define MAGIC_NMOS_PATH	"/usr/share/magic/nmos /usr/share/magic/tutorial"
+#define MAGIC_SYS_PATH	". /usr/share/magic/sys /usr/share/magic/sys/current"
+#define MAGIC_SYS_DOT	"/usr/share/magic/sys/.magic"
+#define MAGIC_LIB_PATH	"/usr/share/magic/%s /usr/share/magic/tutorial"
 #define HELPER_PATH	". ~cad/bin"	/* Used by graphics drivers */
 
 /*
diff -ru utils/flock.c magic-7.1/utils/flock.c
--- utils/flock.c	2003-11-17 17:59:45.000000000 +0100
+++ utils/flock.c	2003-11-17 18:01:01.000000000 +0100
@@ -123,7 +123,7 @@
     struct timeval name_time;
     struct timezone dtime;
     char cur_path[400];
-    char *cad_path;
+    /* char *cad_path; */
     char cad_buf[400];
     FILE *lfile, *mfile;	/* local file and master file */
     char *normal_cad = "~cad";
@@ -132,7 +132,7 @@
     /* environment variable CAD_HOME overrides, otherwise do tilde expansion	*/
     /* on "~cad".								*/
 
-    if ((cad_path = getenv("CAD_HOME")) == NULL)
+    /* if ((cad_path = getenv("CAD_HOME")) == NULL)
     {
 	cad_path = cad_buf;
 	if (PaConvertTilde (&normal_cad, &cad_path, 400) == -1)
@@ -145,7 +145,7 @@
 	}
     }
 
-    sprintf(lock_buf, "%s/flock", cad_path);
+    */ strcpy(lock_buf,"/var/lock/magic");
     dir = stat(lock_buf, &dirstat);
     if((dir == -1) || !(( dirstat.st_mode) & S_IFDIR))
     {
@@ -161,7 +161,7 @@
 
     /* Open the master file to create a link in CAD_HOME/flock */
 
-    sprintf(lock_buf, "%s/flock/lock_%u%u", cad_path,
+    sprintf(lock_buf, "/var/lock/magic/lock_%u%u",
 		name_time.tv_sec, name_time.tv_usec);
 
     if ((mfile = fopen(lock_buf, "w")) == NULL)
