--- setup.py.orig	2012-07-17 08:31:53.346133430 +0200
+++ setup.py	2012-07-17 08:32:08.296813785 +0200
@@ -8,6 +8,16 @@
     raise Exception('Celery requires Python 2.5 or higher.')
 
 try:
+    from setuptools import setup, find_packages
+    from setuptools.command.test import test
+except ImportError:
+    raise
+    from ez_setup import use_setuptools
+    use_setuptools()
+    from setuptools import setup, find_packages           # noqa
+    from setuptools.command.test import test              # noqa
+
+try:
     orig_path = sys.path[:]
     for path in (os.path.curdir, os.getcwd()):
         if path in sys.path:
@@ -32,17 +42,6 @@
 except:
     pass
 
-
-try:
-    from setuptools import setup, find_packages
-    from setuptools.command.test import test
-except ImportError:
-    raise
-    from ez_setup import use_setuptools
-    use_setuptools()
-    from setuptools import setup, find_packages           # noqa
-    from setuptools.command.test import test              # noqa
-
 NAME = 'celery'
 entrypoints = {}
 extra = {}
