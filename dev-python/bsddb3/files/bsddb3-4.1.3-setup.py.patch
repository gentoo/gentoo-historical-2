--- setup.py	2003-02-03 02:28:52.000000000 +0000
+++ /root/setup.py	2004-09-26 13:00:58.000000000 +0100
@@ -46,37 +46,13 @@
     # If we were not told where it is, go looking for it.
     incdir = libdir = None
     if not BERKELEYDB_DIR:
-        for dir in ('/usr/local', '/usr'):
-            for version in ('', '.4.1', '.4.0', '.3.3', '.3.2', '.3.1'):
-                instdir = os.path.join(dir, "BerkeleyDB"+version)
-                if os.path.exists(instdir):
-                    BERKELEYDB_DIR = instdir
-                    print "Found BerkeleyDB installation at " + instdir
+        for dir in ('/usr',):
+            for version in ('4.1', '4.0', '3.3', '3.2', '3.1'):
+                incdir = os.path.join(dir, "include/db" + version)
+                if os.path.exists(incdir):
+                    libdir = os.path.join(dir, "lib")
+                    libname = ['db-' + version]
                     break
-
-            incdir = os.path.join(instdir, "include/db3")
-            if os.path.exists(incdir):
-                libdir = os.path.join(dir, "lib")
-                print "Found db3 header files at " + incdir
-                break
-            else:
-                incdir = None
-
-
-    if not BERKELEYDB_DIR and not incdir and not libdir:
-        print "Can't find a local BerkeleyDB installation."
-        print "(suggestion: try the --berkeley-db=/path/to/bsddb option)"
-        sys.exit(1)
-
-    # figure out from the base setting where the lib and .h are
-    if not incdir:
-        incdir = os.path.join(BERKELEYDB_DIR, 'include')
-    if not libdir:
-        libdir = os.path.join(BERKELEYDB_DIR, 'lib')
-    if not '-ldb' in LIBS:
-        libname = ['db']
-    else:
-        libname = []
     utils = []
 
     # Test if the old bsddb is built-in
