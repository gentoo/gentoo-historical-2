--- configure.orig	2004-01-07 17:47:46.322558032 +0100
+++ configure	2004-01-07 17:58:38.759564632 +0100
@@ -3575,7 +3575,7 @@
   lt_cv_file_magic_cmd='/usr/bin/file -L'
   case "$host_os" in
   rhapsody* | darwin1.[012])
-    lt_cv_file_magic_test_file=`echo /System/Library/Frameworks/System.framework/Versions/*/System | head -1`
+    lt_cv_file_magic_test_file=`echo /System/Library/Frameworks/System.framework/Versions/*/System | head -n 1`
     ;;
   *) # Darwin 1.3 on
     lt_cv_file_magic_test_file='/usr/lib/libSystem.dylib'
@@ -9713,15 +9713,15 @@
 if test -r /proc/cpuinfo ; then
     # Linux with /proc mounted, extract CPU information from it
     _cpuinfo="cat /proc/cpuinfo"
-  pname=`$_cpuinfo | grep 'model name' | cut -d ':' -f 2 | head -1`
-  pvendor=`$_cpuinfo | grep 'vendor_id' | cut -d ':' -f 2  | cut -d ' ' -f 2 | head -1`
-  pfamily=`$_cpuinfo | grep 'cpu family' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -1`
-  pmodel=`$_cpuinfo | grep -v 'model name' | grep 'model' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -1`
-  pstepping=`$_cpuinfo | grep 'stepping' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -1`
+  pname=`$_cpuinfo | grep 'model name' | cut -d ':' -f 2 | head -n 1`
+  pvendor=`$_cpuinfo | grep 'vendor_id' | cut -d ':' -f 2  | cut -d ' ' -f 2 | head -n 1`
+  pfamily=`$_cpuinfo | grep 'cpu family' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -n 1`
+  pmodel=`$_cpuinfo | grep -v 'model name' | grep 'model' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -n 1`
+  pstepping=`$_cpuinfo | grep 'stepping' | cut -d ':' -f 2 | cut -d ' ' -f 2 | head -n 1`
 
-  pparam=`$_cpuinfo | grep 'features' | cut -d ':' -f 2 | head -1`
+  pparam=`$_cpuinfo | grep 'features' | cut -d ':' -f 2 | head -n 1`
   if test -z "$pparam" ; then
-    pparam=`$_cpuinfo | grep 'flags' | cut -d ':' -f 2 | head -1`
+    pparam=`$_cpuinfo | grep 'flags' | cut -d ':' -f 2 | head -n 1`
   fi
 
   _mmx=no
@@ -12640,7 +12640,7 @@
 if test "$enable_alsa" != "no"; then
     check_alsa_version=no
 
-    # snd_pcm_readi is only 0.9.x (?)
+    # snd_pcm_readi is only 0.9.x / 1.0.x (?)
     echo "$as_me:$LINENO: checking for snd_pcm_readi in -lasound" >&5
 echo $ECHO_N "checking for snd_pcm_readi in -lasound... $ECHO_C" >&6
 if test "${ac_cv_lib_asound_snd_pcm_readi+set}" = set; then
@@ -12706,8 +12706,8 @@
     if test "$check_alsa_version" = "yes"; then
 
       asoundlib="none"
-      echo "$as_me:$LINENO: checking for alsa 0.9 with alsa/asoundlib.h" >&5
-echo $ECHO_N "checking for alsa 0.9 with alsa/asoundlib.h... $ECHO_C" >&6
+      echo "$as_me:$LINENO: checking for alsa 0.9.x or 1.0.x with alsa/asoundlib.h" >&5
+echo $ECHO_N "checking for alsa 0.9.x or 1.0.x with alsa/asoundlib.h... $ECHO_C" >&6
       if test "$cross_compiling" = yes; then
   { { echo "$as_me:$LINENO: error: cannot run test program while cross compiling
 See \`config.log' for more details." >&5
@@ -12724,7 +12724,7 @@
 /* end confdefs.h.  */
 
       #include <alsa/asoundlib.h>
-      int main(void) { return (!(SND_LIB_MAJOR==0 && SND_LIB_MINOR==9)); }
+      int main(void) { return (!((SND_LIB_MAJOR==0 && SND_LIB_MINOR==9) || (SND_LIB_MAJOR == 1))); }
 
 _ACEOF
 rm -f conftest$ac_exeext
@@ -12766,8 +12766,8 @@
 fi
 
       if test "$asoundlib" != "alsa"; then
-        echo "$as_me:$LINENO: checking for alsa 0.9 with sys/asoundlib.h" >&5
-echo $ECHO_N "checking for alsa 0.9 with sys/asoundlib.h... $ECHO_C" >&6
+        echo "$as_me:$LINENO: checking for alsa 0.9.x or 1.0.x with sys/asoundlib.h" >&5
+echo $ECHO_N "checking for alsa 0.9.x or 1.0.x with sys/asoundlib.h... $ECHO_C" >&6
         if test "$cross_compiling" = yes; then
   { { echo "$as_me:$LINENO: error: cannot run test program while cross compiling
 See \`config.log' for more details." >&5
@@ -12784,7 +12784,7 @@
 /* end confdefs.h.  */
 
         #include <sys/asoundlib.h>
-        int main(void) { return (!(SND_LIB_MAJOR==0 && SND_LIB_MINOR==9)); }
+        int main(void) { return (!((SND_LIB_MAJOR==0 && SND_LIB_MINOR==9) || (SND_LIB_MAJOR == 1))); }
 
 _ACEOF
 rm -f conftest$ac_exeext
