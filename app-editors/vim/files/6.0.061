To: vim-dev@vim.org
Subject: Patch 6.0.061
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
------------

Patch 6.0.061
Problem:    The toolbar buttons to load and save a session do not correctly
	    use v:this_session.
Solution:   Check for v:this_session to be empty instead of existing.
Files:	    runtime/menu.vim


*** ../vim60.60/runtime/menu.vim	Thu Nov  1 14:37:02 2001
--- runtime/menu.vim	Wed Oct 31 16:47:20 2001
***************
*** 839,858 ****
  
  " Select a session to load; default to current session name if present
  fun! s:LoadVimSesn()
!   if exists("this_session")
!     let name = this_session
    else
!     let name = "session.vim"
    endif
    execute "browse so " . name
  endfun
  
  " Select a session to save; default to current session name if present
  fun! s:SaveVimSesn()
!   if !exists("this_session")
!     let this_session = "session.vim"
    endif
!   execute "browse mksession! " . this_session
  endfun
  
  endif
--- 839,858 ----
  
  " Select a session to load; default to current session name if present
  fun! s:LoadVimSesn()
!   if strlen(v:this_session) > 0
!     let name = v:this_session
    else
!     let name = "Session.vim"
    endif
    execute "browse so " . name
  endfun
  
  " Select a session to save; default to current session name if present
  fun! s:SaveVimSesn()
!   if strlen(v:this_session) == 0
!     let v:this_session = "Session.vim"
    endif
!   execute "browse mksession! " . v:this_session
  endfun
  
  endif
*** ../vim60.60/src/version.c	Thu Nov  1 15:03:42 2001
--- src/version.c	Thu Nov  1 15:21:01 2001
***************
*** 608,609 ****
--- 608,611 ----
  {   /* Add new patch number below this line */
+ /**/
+     61,
  /**/

-- 
SECOND SOLDIER: It could be carried by an African swallow!
FIRST SOLDIER:  Oh  yes! An African swallow maybe ... but not a European
                swallow. that's my point.
                 "Monty Python and the Holy Grail" PYTHON (MONTY) PICTURES LTD

 ///  Bram Moolenaar -- Bram@moolenaar.net -- http://www.moolenaar.net  \\\
(((   Creator of Vim -- http://vim.sf.net -- ftp://ftp.vim.org/pub/vim   )))
 \\\  Help me helping AIDS orphans in Uganda - http://iccf-holland.org  ///
