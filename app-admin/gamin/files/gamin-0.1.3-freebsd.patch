diff -ur gamin-0.1.3/libgamin/gam_api.c gamin-0.1.3-fbsd/libgamin/gam_api.c
--- gamin-0.1.3/libgamin/gam_api.c	2005-06-15 12:53:25.000000000 +0200
+++ gamin-0.1.3-fbsd/libgamin/gam_api.c	2005-08-02 23:09:22.416835112 +0200
@@ -421,7 +421,7 @@
 {
     char data[2] = { 0, 0 };
     int written;
-#if defined(HAVE_CMSGCRED) && !defined(LOCAL_CREDS)
+#if defined(HAVE_CMSGCRED) && (!defined(LOCAL_CREDS) || defined(__FreeBSD__))
     struct {
 	    struct cmsghdr hdr;
 	    struct cmsgcred cred;
@@ -445,7 +445,7 @@
 #endif
 
 retry:
-#if defined(HAVE_CMSGCRED) && !defined(LOCAL_CREDS)
+#if defined(HAVE_CMSGCRED) && (!defined(LOCAL_CREDS) || defined(__FreeBSD__))
     written = sendmsg(fd, &msg, 0);
 #else
     written = write(fd, &data[0], 1);
@@ -655,7 +655,7 @@
 
     s_uid = getuid();
 
-#if defined(LOCAL_CREDS) && defined(HAVE_CMSGCRED)
+#if defined(LOCAL_CREDS) && defined(HAVE_CMSGCRED) && !defined(__FreeBSD__)
     /* Set the socket to receive credentials on the next message */
     {
         int on = 1;
diff -ur gamin-0.1.3/libgamin/gam_data.c gamin-0.1.3-fbsd/libgamin/gam_data.c
--- gamin-0.1.3/libgamin/gam_data.c	2005-05-18 16:45:04.000000000 +0200
+++ gamin-0.1.3-fbsd/libgamin/gam_data.c	2005-08-02 23:09:22.416835112 +0200
@@ -17,6 +17,10 @@
 #ifdef HAVE_PTHREAD_H
 #include <pthread.h>
 
+# ifdef __GLIBC__
+#  define PTHREAD_MUTEX_RECURSIVE PTHREAD_MUTEX_RECURSIVE_NP
+# endif
+
 static int is_threaded = -1;
 #endif
 
@@ -471,7 +475,7 @@
     }
     if (is_threaded > 0) {
 	pthread_mutexattr_init(&attr);
-	pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE_NP);
+	pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE);
 	pthread_mutex_init(&ret->lock, &attr);
 	pthread_mutexattr_destroy(&attr);
     }
diff -ur gamin-0.1.3/server/gam_channel.c gamin-0.1.3-fbsd/server/gam_channel.c
--- gamin-0.1.3/server/gam_channel.c	2005-08-01 23:04:50.000000000 +0200
+++ gamin-0.1.3-fbsd/server/gam_channel.c	2005-08-02 23:09:22.417834960 +0200
@@ -30,7 +30,7 @@
 {
     char data[2] = { 0, 0 };
     int written;
-#if defined(HAVE_CMSGCRED) && !defined(LOCAL_CREDS)
+#if defined(HAVE_CMSGCRED) && (!defined(LOCAL_CREDS) || defined(__FreeBSD__))
     struct {
 	    struct cmsghdr hdr;
 	    struct cmsgcred cred;
@@ -54,7 +54,7 @@
 #endif
 
 retry:
-#if defined(HAVE_CMSGCRED) && !defined(LOCAL_CREDS)
+#if defined(HAVE_CMSGCRED) && (!defined(LOCAL_CREDS) || defined(__FreeBSD__))
     written = sendmsg(fd, &msg, 0);
 #else
     written = write(fd, &data[0], 1);
@@ -103,7 +103,7 @@
 
     s_uid = getuid();
 
-#if defined(LOCAL_CREDS) && defined(HAVE_CMSGCRED)
+#if defined(LOCAL_CREDS) && defined(HAVE_CMSGCRED) && !defined(__FreeBSD__)
     /* Set the socket to receive credentials on the next message */
     {
         int on = 1;
Only in gamin-0.1.3-fbsd/server: gam_channel.c.orig
diff -ur gamin-0.1.3/server/gam_pidname.c gamin-0.1.3-fbsd/server/gam_pidname.c
--- gamin-0.1.3/server/gam_pidname.c	2005-08-01 17:27:19.000000000 +0200
+++ gamin-0.1.3-fbsd/server/gam_pidname.c	2005-08-02 23:05:34.795438824 +0200
@@ -7,9 +7,9 @@
 
 char *gam_get_pidname (int pid)
 {
+    gchar *pidname = NULL;
 #ifdef HAVE_LINUX
     gchar *procname;
-    gchar *pidname = NULL;
     FILE *fp;
 #endif
 
diff -ur gamin-0.1.3/tests/testing.c gamin-0.1.3-fbsd/tests/testing.c
--- gamin-0.1.3/tests/testing.c	2005-06-13 10:59:29.000000000 +0200
+++ gamin-0.1.3-fbsd/tests/testing.c	2005-08-02 23:09:22.417834960 +0200
@@ -436,9 +436,9 @@
             return (-1);
         }
         /*
-         * wait at most 3 secs before declaring failure
+         * wait at most 7 secs before declaring failure
          */
-        while ((delay < 30) && (testState.nb_events < nb_events + count)) {
+        while ((delay < 70) && (testState.nb_events < nb_events + count)) {
             debugLoop(100);
 
 /*	    printf("+"); fflush(stdout); */
