--- apg.c	2007-03-08 17:32:40.000000000 +0300
+++ apg.c	2007-03-08 17:34:07.000000000 +0300
@@ -100,6 +100,7 @@
 #else /* CLISERV */
 #if defined(APG_USE_CRACKLIB)
 #define APG_PROGRAMM_OPTIONS "M:E:a:r:b:p:n:m:x:vkt"
+#include <crack.h>
 #else /* CRACKLIB */
 #define APG_PROGRAMM_OPTIONS "M:E:a:r:b:p:n:m:x:vt"
 #endif /* CRACKLIB */
@@ -709,7 +710,7 @@
 */
 char * crypt_passstring (const char *p)
 {
- char salt[10];
+ char salt[11];
  gen_rand_pass (salt, 10, 10, S_SL|S_CL|S_NB);
  return (crypt(p, salt));
 }
