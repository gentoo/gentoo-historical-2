--- src/libtcp-portmon.c.old	2005-12-05 22:27:16.000000000 -0500
+++ src/libtcp-portmon.c	2006-02-13 00:22:25.000000000 -0500
@@ -3,7 +3,7 @@
  *
  * Copyright (C) 2005  Philip Kovacs kovacsp3@comcast.net
  * 
- * $Id: portmon-mpd.patch,v 1.1 2006/02/18 22:50:36 dragonheart Exp $
+ * $Id: portmon-mpd.patch,v 1.1 2006/02/18 22:50:36 dragonheart Exp $
  *
  * This library is free software; you can redistribute it and/or
  * modify it under the terms of the GNU Lesser General Public
@@ -231,8 +231,8 @@
    p_monitor1 = (tcp_port_monitor_t *)p_data1;
    p_monitor2 = (tcp_port_monitor_t *)p_data2;
 
-   return (p_monitor1->port_range_begin == p_monitor1->port_range_begin &&
-	   p_monitor2->port_range_end == p_monitor2->port_range_end);
+   return (p_monitor1->port_range_begin == p_monitor2->port_range_begin &&
+	   p_monitor1->port_range_end == p_monitor2->port_range_end);
 }
 
 /* ---------------------------------------------------------------------------
--- src/mpd.c.old	2006-02-12 23:11:15.000000000 -0500
+++ src/mpd.c	2006-02-14 13:23:14.000000000 -0500
@@ -42,22 +42,14 @@
 			current_info->mpd.name = malloc(TEXT_BUFFER_SIZE);
 		if (current_info->mpd.file == NULL)
 			current_info->mpd.file = malloc(TEXT_BUFFER_SIZE);
-		strncpy(current_info->mpd.name, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.file, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.artist, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.album, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.title, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.random, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.repeat, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.track, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
+		*current_info->mpd.name=0;
+		*current_info->mpd.file=0;
+		*current_info->mpd.artist=0;
+		*current_info->mpd.album=0;
+		*current_info->mpd.title=0;
+		*current_info->mpd.random=0;
+		*current_info->mpd.repeat=0;
+		*current_info->mpd.track=0;
 		strncpy(current_info->mpd.status, "MPD not responding",	TEXT_BUFFER_SIZE - 1);
 		current_info->mpd.bitrate = 0;
 		current_info->mpd.progress = 0;
@@ -97,22 +89,14 @@
 			current_info->mpd.name = malloc(TEXT_BUFFER_SIZE);
 		if (current_info->mpd.file == NULL)
 			current_info->mpd.file = malloc(TEXT_BUFFER_SIZE);
-		strncpy(current_info->mpd.name, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.file, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.artist, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.album, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.title, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.random, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.repeat, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.track, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
+		*current_info->mpd.name=0;
+		*current_info->mpd.file=0;
+		*current_info->mpd.artist=0;
+		*current_info->mpd.album=0;
+		*current_info->mpd.title=0;
+		*current_info->mpd.random=0;
+		*current_info->mpd.repeat=0;
+		*current_info->mpd.track=0;
 		strncpy(current_info->mpd.status, "MPD not responding", TEXT_BUFFER_SIZE - 1);
 		current_info->mpd.bitrate = 0;
 		current_info->mpd.progress = 0;
@@ -158,23 +142,15 @@
 			current_info->mpd.name = malloc(TEXT_BUFFER_SIZE);
 		if (current_info->mpd.file == NULL)
 			current_info->mpd.file = malloc(TEXT_BUFFER_SIZE);
-		strncpy(current_info->mpd.name, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.file, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.artist, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.album, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.title, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.random, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.repeat, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.track, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.status, "Unknown",
+		*current_info->mpd.name=0;
+		*current_info->mpd.file=0;
+		*current_info->mpd.artist=0;
+		*current_info->mpd.album=0;
+		*current_info->mpd.title=0;
+		*current_info->mpd.random=0;
+		*current_info->mpd.repeat=0;
+		*current_info->mpd.track=0;
+		strncpy(current_info->mpd.status, "Stopped",
 			TEXT_BUFFER_SIZE - 1);
 	}
 	if (status->state == MPD_STATUS_STATE_PAUSE) {
@@ -211,24 +187,15 @@
 			current_info->mpd.name = malloc(TEXT_BUFFER_SIZE);
 		if (current_info->mpd.file == NULL)
 			current_info->mpd.file = malloc(TEXT_BUFFER_SIZE);
-		strncpy(current_info->mpd.name, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.file, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.artist, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.album, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.title, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.random, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.repeat, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.track, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
-		strncpy(current_info->mpd.status, "Unknown",
-			TEXT_BUFFER_SIZE - 1);
+		*current_info->mpd.name=0;
+		*current_info->mpd.file=0;
+		*current_info->mpd.artist=0;
+		*current_info->mpd.album=0;
+		*current_info->mpd.title=0;
+		*current_info->mpd.random=0;
+		*current_info->mpd.repeat=0;
+		*current_info->mpd.track=0;
+		*current_info->mpd.status=0;
 	}
 	if (status->state == MPD_STATUS_STATE_PLAY ||
 	    status->state == MPD_STATUS_STATE_PAUSE) {
@@ -248,14 +215,14 @@
 		} else if (status->random == 1) {
 			strcpy(current_info->mpd.random, "On");
 		} else {
-			strcpy(current_info->mpd.random, "Unknown");
+			*current_info->mpd.random=0;
 		}
 		if (status->repeat == 0) {
 			strcpy(current_info->mpd.repeat, "Off");
 		} else if (status->repeat == 1) {
 			strcpy(current_info->mpd.repeat, "On");
 		} else {
-			strcpy(current_info->mpd.repeat, "Unknown");
+			*current_info->mpd.repeat=0;
 		}
 	}
 
@@ -292,37 +259,37 @@
 			strncpy(current_info->mpd.artist, song->artist,
 				TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.artist, "Unknown");
+			*current_info->mpd.artist=0;
 		}
 		if (song->album) {
 			strncpy(current_info->mpd.album, song->album,
 				TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.album, "Unknown");
+			*current_info->mpd.album=0;
 		}
 		if (song->title) {
 			strncpy(current_info->mpd.title, song->title,
 				TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.title, "Unknown");
+			*current_info->mpd.title=0;
 		}
 		if (song->track) {
 			strncpy(current_info->mpd.track, song->track,
 				TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.track, "Unknown");
+			*current_info->mpd.track=0;
 		}
 		if (song->name) {
 			strncpy(current_info->mpd.name, song->name,
 				TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.name, "Unknown");
+			*current_info->mpd.name=0;
 		}
 		if (song->file) {
 			strncpy(current_info->mpd.file,
 				song->file, TEXT_BUFFER_SIZE - 1);
 		} else {
-			strcpy(current_info->mpd.file, "Unknown");
+			*current_info->mpd.file=0;
 		}
 		if (entity != NULL) {
 			mpd_freeInfoEntity(entity);
