Index: metalog-0.8-rc1/configure.ac
===================================================================
--- metalog-0.8-rc1.orig/configure.ac
+++ metalog-0.8-rc1/configure.ac
@@ -148,7 +148,7 @@ AC_FUNC_GETGROUPS
 
 AC_CHECK_FUNCS(initgroups setgroups)
 AC_CHECK_FUNCS(seteuid setreuid setresuid setegid setregid setresgid)
-AC_CHECK_FUNCS(setrlimit waitpid setproctitle)
+AC_CHECK_FUNCS(setrlimit waitpid setproctitle setprogname)
 AC_CHECK_FUNCS(memset strdup)
 AC_CHECK_FUNCS(strtoull strtoq)
 AC_CHECK_FUNCS(putenv klogctl)
Index: metalog-0.8-rc1/src/metalog.c
===================================================================
--- metalog-0.8-rc1.orig/src/metalog.c
+++ metalog-0.8-rc1/src/metalog.c
@@ -361,6 +361,7 @@ static void clearargs(int argc, char **a
 #endif
 }
 
+#ifndef HAVE_SETPROGNAME
 static void setprogname(const char * const title)
 {
 #ifndef NO_PROCNAME_CHANGE
@@ -382,6 +383,7 @@ static void setprogname(const char * con
 #endif
     (void) title;
 }
+#endif
 
 static int getDataSources(int sockets[])
 {
