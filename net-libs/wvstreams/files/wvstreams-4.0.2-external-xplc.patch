diff -Nru wvstreams-4.0.2.orig/configure.ac wvstreams-4.0.2/configure.ac
--- wvstreams-4.0.2.orig/configure.ac	2005-09-06 23:20:51.000000000 +0300
+++ wvstreams-4.0.2/configure.ac	2005-09-06 23:23:37.277564368 +0300
@@ -546,32 +546,25 @@
 
 # xplc
 if test "$with_xplc" != "no"; then
-    if test "$with_xplc" = ""; then
-	if pkg-config --modversion xplc-0.3.10 2>/dev/null >/dev/null; then
-            WV_APPEND(CPPFLAGS, [`pkg-config --cflags xplc-0.3.10`])
-	    WV_APPEND(LDFLAGS, [`pkg-config --libs xplc-0.3.10`])
+	if pkg-config --modversion xplc-${xplc_version}; then
+            WV_APPEND(CPPFLAGS, [`pkg-config --cflags xplc-${xplc_version}`])
+	    WV_APPEND(LDFLAGS, [`pkg-config --libs xplc-${xplc_version}`])
 	    AC_CHECK_HEADERS(xplc/core.h,, [with_xplc=no], [#define UNSTABLE])
 	    AC_CHECK_LIB(xplc, XPLC_getServiceManager,, [with_xplc=no])
 	    xplc_pc="xplc-${xplc_version}"
 	else
 	    with_xplc='no'
 	fi
-    else
-        WV_APPEND(CPPFLAGS, [-I$with_xplc/include])
-	WV_APPEND(LDFLAGS, [-L$with_xplc])
-	AC_CHECK_HEADERS(xplc/core.h,, [with_xplc=no], [#define UNSTABLE])
-	AC_CHECK_LIB(xplc, XPLC_getServiceManager,, [with_xplc=no])
-	xplc_pc="xplc-${xplc_version}"
-    fi
-    # What if we can't find it?
-    if test "$with_xplc" = "no" && test -d xplc; then
+
+	# What if we can't find it?
+	if test "$with_xplc" = "no" && test -d xplc; then
         WV_APPEND(CPPFLAGS, [-I\$(WVSTREAMS)/xplc/include])
         WV_APPEND(LDFLAGS, [-L\$(WVSTREAMS)/xplc])
         AC_CONFIG_SUBDIRS(xplc)
         build_xplc=yes
         with_xplc='$(WVSTREAMS)/xplc'
-	xplc_pc='wvxplc'
-    fi
+        xplc_pc='wvxplc'
+	fi
 fi
 
 # zlib
