diff --git a/test/test_primitives.cpp b/test/test_primitives.cpp
index 22efb0a..b0d11d1 100644
--- a/test/test_primitives.cpp
+++ b/test/test_primitives.cpp
@@ -17,6 +17,9 @@
 using namespace libtorrent;
 using namespace boost::tuples;
 using boost::bind;
+namespace libtorrent {
+	fs::path sanitize_path(fs::path const& p);
+}
 
 tuple<int, int> feed_bytes(http_parser& parser, char const* str)
 {
@@ -255,7 +258,7 @@ int test_main()
  	torrent["info"] = info;
  	torrent_info ti2(torrent);
  	std::cerr << ti2.name() << std::endl;
- 	TEST_CHECK(ti2.name() == "test3");
+ 	TEST_CHECK(ti2.name() == "test1/test2/test3");
  
  	info["name.utf-8"] = "test2/../test3/.././../../test4";
  	torrent["info"] = info;
