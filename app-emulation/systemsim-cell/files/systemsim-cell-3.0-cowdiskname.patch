--- opt/ibm/systemsim-cell/lib/cell/systemsim.tcl.orig	2008-02-12 17:45:10.000000000 +0100
+++ opt/ibm/systemsim-cell/lib/cell/systemsim.tcl	2008-02-12 17:52:09.000000000 +0100
@@ -17,6 +17,12 @@
 
 set IMAGES $env(IMAGES_DIR)/cell
 
+if { [info exists ::env(COWDISKNAME) ] } {
+    set cowdiskname $env(COWDISKNAME)
+} else {
+    set cowdiskname $env(HOME)/sysroot_disk.cow
+}
+
 # Initialize the systemsim tcl environment
 source $env(LIB_DIR)/cell/mambo_init.tcl
 
@@ -78,7 +84,7 @@
 mysim mcm 0 load vmlinux $imagefile 0x1000000
 
 # Setup the bogus disk that Linux will use
-if {[catch {mysim bogus disk init 0 $sysrootfile newcow sysroot_disk.cow 1024}]} {
+if {[catch {mysim bogus disk init 0 $sysrootfile newcow $cowdiskname 1024}]} {
   puts "bogus disk init for $sysrootfile failed"
   exit
 }
