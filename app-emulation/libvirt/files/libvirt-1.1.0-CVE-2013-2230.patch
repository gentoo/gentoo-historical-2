X-Git-Url: http://libvirt.org/git/?p=libvirt.git;a=blobdiff_plain;f=src%2Fqemu%2Fqemu_driver.c;h=b0180c9497da8579d3b2228a76e1579d26cdcaaa;hp=571d1f8c6b0866e2701b3b075cb6d2c53dffa75e;hb=f38c8185f97720ecae7ef2291fbaa5d6b0209e17;hpb=5744d96f211160d406ec0498c2f814a67d1a3fc8

diff --git a/src/qemu/qemu_driver.c b/src/qemu/qemu_driver.c
index 571d1f8..b0180c9 100644
--- a/src/qemu/qemu_driver.c
+++ b/src/qemu/qemu_driver.c
@@ -10043,9 +10043,7 @@ qemuConnectDomainEventRegisterAny(virConnectPtr conn,
                                       driver->domainEventState,
                                       dom, eventID,
                                       callback, opaque, freecb, &ret) < 0)
-        goto cleanup;
-
-    ret = 0;
+        ret = -1;
 
 cleanup:
     return ret;
