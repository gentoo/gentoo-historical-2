diff -ur xen-4.2.0.orig/xen/arch/x86/Makefile xen-4.2.0/xen/arch/x86/Makefile
--- xen/arch/x86/Makefile	2012-09-17 18:21:19.000000000 +0800
+++ xen/arch/x86/Makefile	2013-02-23 20:37:30.679918815 +0800
@@ -112,7 +112,7 @@
 	    $(@D)/.$(@F).1.o -o $@
 	rm -f $(@D)/.$(@F).[0-9]*
 
-EFI_LDFLAGS = $(patsubst -m%,-mi386pep,$(LDFLAGS)) --subsystem=10
+EFI_LDFLAGS = -mi386pep $(patsubst -m%,-mi386pep,$(LDFLAGS)) --subsystem=10
 EFI_LDFLAGS += --image-base=$(1) --stack=0,0 --heap=0,0 --strip-debug
 EFI_LDFLAGS += --section-alignment=0x200000 --file-alignment=0x20
 EFI_LDFLAGS += --major-image-version=$(XEN_VERSION)
diff -ur xen-4.2.0.orig/xen/Makefile xen-4.2.0/xen/Makefile
--- xen/Makefile	2012-09-17 18:21:19.000000000 +0800
+++ xen/Makefile	2013-02-23 21:26:41.396771995 +0800
@@ -12,7 +12,7 @@
 export BASEDIR := $(CURDIR)
 export XEN_ROOT := $(BASEDIR)/..
 
-EFI_MOUNTPOINT ?= /boot/efi
+export EFI_MOUNTPOINT = /boot/efi
 
 .PHONY: default
 default: build
@@ -43,6 +43,8 @@
 		ln -sf $(notdir $(TARGET))-$(XEN_FULLVERSION).efi $(DESTDIR)$(EFI_DIR)/$(notdir $(TARGET)).efi; \
 		if [ -n '$(EFI_MOUNTPOINT)' -a -n '$(EFI_VENDOR)' ]; then \
 			$(INSTALL_DATA) $(TARGET).efi $(DESTDIR)$(EFI_MOUNTPOINT)/efi/$(EFI_VENDOR)/$(notdir $(TARGET))-$(XEN_FULLVERSION).efi; \
+		elif [ -n '$(EFI_MOUNTPOINT)' ]; then \
+                       $(INSTALL_DATA) $(TARGET).efi $(DESTDIR)$(EFI_MOUNTPOINT)/$(notdir $(TARGET))-$(XEN_FULLVERSION).efi; \
 		elif [ "$(DESTDIR)" = "$(patsubst $(shell cd $(XEN_ROOT) && pwd)/%,%,$(DESTDIR))" ]; then \
 			echo 'EFI installation only partially done (EFI_VENDOR not set)' >&2; \
 		fi; \

