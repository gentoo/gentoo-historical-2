# Copyright 1999-2010 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: /var/cvsroot/gentoo-x86/dev-lang/php/files/eblits/pkg_postinst-v2.eblit,v 1.2 2010/10/09 11:48:26 olemarkus Exp $

eblit-php-pkg_postinst() {
	# Output some general info to the user
	if use apache2 ; then
		APACHE2_MOD_DEFINE="PHP5"
		APACHE2_MOD_CONF="70_mod_php5"
		apache-module_pkg_postinst
	fi

	
	# Create the symlinks for php
	local m modules="cli apache2"
	for m in $modules; do
		if use $m ; then
			local ci=$(eselect php show $m)
			if [[ -z $ci ]]; then
				eselect php set $m php${SLOT}
			elif [[ $ci != "php{$SLOT}" ]] ; then
				ewarn "To switch $m to use php-${SLOT}, run"
				ewarn "    eselect php set $m php${SLOT}"
				ewarn
			fi
		fi
	done

	ewarn "You may have to recompile third-party extensions now"
	ewarn "(includes every dev-php5/pecl-* package and probably others in that category)"
	if ! use readline && use cli ; then
		ewarn "Note that in order to use php interactivly, you need to enable"
		ewarn "the readline USE flag or php -a will hang"
	fi
	ewarn
}

