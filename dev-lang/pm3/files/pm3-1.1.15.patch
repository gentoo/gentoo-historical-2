--- pm3-1.1.15.orig/language/modula3/m3compiler/m3build/src/m3makefile
+++ pm3-1.1.15/language/modula3/m3compiler/m3build/src/m3makefile
@@ -12,7 +12,7 @@
 
 implementation ("Main")
 
-option("standalone","T")
+%option("standalone","T")
 
 include_dir("html")
 HtmlFile("index")
--- pm3-1.1.15.orig/libs/m3core/src/runtime/LINUXLIBC6/RTHeapDepC.c
+++ pm3-1.1.15/libs/m3core/src/runtime/LINUXLIBC6/RTHeapDepC.c
@@ -564,7 +564,7 @@
   return result;
 }
 
-int getitimer(__itimer_which_t which, struct itimerval *value)
+int getitimer(int which, struct itimerval *value)
 { int result;
 
   ENTER_CRITICAL;
@@ -610,7 +610,7 @@
   return result;
 }
 
-int getrlimit(__rlimit_resource_t resource, struct rlimit *rlp)
+int getrlimit(int resource, struct rlimit *rlp)
 { int result;
 
   ENTER_CRITICAL;
@@ -1272,7 +1272,7 @@
   return result;
 }
 
-int setitimer(__itimer_which_t which, const struct itimerval *value, 
+int setitimer(int which, const struct itimerval *value, 
    struct itimerval *ovalue)
 { int result;
 
@@ -1299,7 +1299,7 @@
 }
 */
 
-int setrlimit(__rlimit_resource_t resource, const struct rlimit *rlp)
+int setrlimit(int resource, const struct rlimit *rlp)
 { int result;
 
   ENTER_CRITICAL;
--- pm3-1.1.15.orig/m3config/src/LINUXLIBC6
+++ pm3-1.1.15/m3config/src/LINUXLIBC6
@@ -12,10 +12,36 @@
 LINK_suffix += GCWRAPFLAGS
 MAKESHLIB += GCWRAPFLAGS
 % Debian settings
-%INSTALL_ROOT="/usr"
-%INSTALL_IMPLS = ""
-%EXPORTRPATH="EXPORTS"
-%RPATH_FLAG=""
+INSTALL_ROOT="/usr"
+INSTALL_IMPLS = ""
+EXPORTRPATH="EXPORTS"
+RPATH_FLAG=""
+
+% Debian requires a version number on each shared library.
+SHLIB_VERSION = "1"
+
+proc m3_make_shared_lib (lib, objects, imported_libs) is
+  local lib_so = format ("lib%s.so", lib)
+  local lib_sox = format ("%s.%s", lib_so, SHLIB_VERSION)
+  local cmd = [MAKESHLIB_CMD, "-o", lib_so, "-Wl,-soname," & lib_sox, objects]
+
+  if VERBOSE write(cmd, CR) end
+  return exec(cmd)
+end
+
+proc m3_note_shlib(lib) is
+  if Options{"shared_lib"}[0] and PLATFORM_SUPPORTS_SHARED_LIB
+    local lib_so = format ("lib%s.so", lib)
+    local lib_sox = format ("%s.%s", lib_so, SHLIB_VERSION)
+
+    if defined ("_all")
+      install_derived(lib_so)
+      install_alias_link(lib_so,
+        LIB_TO_PKG_USE & SL & PACKAGE & SL & BUILD_DIR, lib_sox, LIB_INSTALL)
+    end
+    deriveds (lib_so, [""])
+  end
+end
 
 setDefault("","")
 
--- pm3-1.1.15.orig/network/www/webvbt/src/m3makefile
+++ pm3-1.1.15/network/www/webvbt/src/m3makefile
@@ -8,7 +8,7 @@
 import ("formsvbt")
 import ("web")
 
-UseOblets = "defined"
+UseOblets = ""
 
 if defined(UseOblets)
   include_dir("oblet")
--- pm3-1.1.15.orig/src/PACKAGES
+++ pm3-1.1.15/src/PACKAGES
@@ -147,8 +147,8 @@
 PkgInfo("coverage","language/modula3/m3tools","","coverage",tProg,"T",3,[],
     ["ALL"],["POSIX"],"A line-based coverage analyzer/profiler")
 
-PkgInfo("m3gdb","language/modula3/m3tools","","m3gdb",tProg,"T",3,[],["ALL"],
-    ["M3GDB"],"Modula-3 aware debugger based on gdb")
+%PkgInfo("m3gdb","language/modula3/m3tools","","m3gdb",tProg,"T",3,[],["ALL"],
+%    ["M3GDB"],"Modula-3 aware debugger based on gdb")
 
 PkgInfo("pp","language/modula3/m3tools","","pp",tProg,"T",3,[],["ALL"],
     ["POSIX"],"Modula-3 pretty-printer")
@@ -460,14 +460,14 @@
 PkgInfo("webvbt","network/www","","webvbt",tLib,"T",3,[],["ALL"],[],
     "A library for displaying HTML pages inside a VBT")
 
-PkgInfo("webscape","network/www","","webscape",tProg,"T",3,[],["ALL"],[],
-    "A web browser with support for interactive content")
+%PkgInfo("webscape","network/www","","webscape",tProg,"T",3,[],["ALL"],[],
+%    "A web browser with support for interactive content")
 
-PkgInfo("deckscape","network/www","","deckscape",tProg,"T",3,[],["ALL"],[],
-    "A web browser that uses a new metaphor: decks of web pages")
+%PkgInfo("deckscape","network/www","","deckscape",tProg,"T",3,[],["ALL"],[],
+%    "A web browser that uses a new metaphor: decks of web pages")
 
-PkgInfo("webcard","network/www","","webcard",tProg,"T",3,[],["ALL"],
-    ["POSIX","ST_SPARE"],"An integrated mail/news/web client")
+%PkgInfo("webcard","network/www","","webcard",tProg,"T",3,[],["ALL"],
+%    ["POSIX","ST_SPARE"],"An integrated mail/news/web client")
 
 PkgInfo("ocr","graphics/lecternpkg","","ocr",tLib,"T",3,[],["ALL"],[],
     "Interface to optical character recognition library (DECstation only)")
--- pm3-1.1.15.orig/debian/libpm3-static.dirs
+++ pm3-1.1.15/debian/libpm3-static.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/changelog
+++ pm3-1.1.15/debian/changelog
@@ -0,0 +1,80 @@
+pm3 (1.1.15-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Mike Goldman <whig@debian.org>  Thu,  4 Oct 2001 06:11:14 -0400
+
+pm3 (1.1.13-11) frozen unstable; urgency=high
+
+  * Mentor now depends on netobjd (closes: #67117).
+  * NO OTHER CHANGES.
+
+ -- Mike Goldman <whig@by.net>  Fri, 14 Jul 2000 14:04:00 -0400
+
+pm3 (1.1.13-10) unstable; urgency=low
+
+  * Split off netobjd.
+
+ -- Mike Goldman <whig@by.net>  Sat, 16 Oct 1999 16:52:00 -0400
+
+pm3 (1.1.13-9) unstable; urgency=low
+
+  * Reformatted obliq description (closes: #47278).
+
+ -- Mike Goldman <whig@by.net>  Wed, 13 Oct 1999 00:11:43 -0400
+
+pm3 (1.1.13-8) unstable; urgency=low
+
+  * No longer conflicts with the pm3-boot package.
+
+ -- Mike Goldman <whig@by.net>  Mon, 11 Oct 1999 23:40:23 -0400
+
+pm3 (1.1.13-7) unstable; urgency=low
+
+  * Build procedure now works with separate pm3-boot package.
+
+ -- Mike Goldman <whig@by.net>  Sun, 10 Oct 1999 15:05:33 -0400
+
+pm3 (1.1.13-6) unstable; urgency=low
+
+  * Split off mentor as a separate package.
+
+ -- Mike Goldman <whig@by.net>  Fri,  8 Oct 1999 04:11:47 -0400
+
+pm3 (1.1.13-5) unstable; urgency=low
+
+  * Split off obliq as a separate package.
+
+ -- Mike Goldman <whig@by.net>  Tue, 21 Sep 1999 14:37:51 -0400
+
+pm3 (1.1.13-4) unstable; urgency=low
+
+  * Split off m3gdb as a separate package.
+  * Removed .html files (for now - perhaps add a separate package later).
+  * Created new pm3-extra and libpm3-extra to contain all optional files.
+  * Merged libpm3-dev back into main pm3 package.
+
+ -- Mike Goldman <whig@by.net>  Sun, 29 Aug 1999 05:04:16 -0400
+
+pm3 (1.1.13-3) unstable; urgency=low
+
+  * Set Architecture i386 only.
+
+ -- Mike Goldman <whig@by.net>  Tue, 17 Aug 1999 09:27:07 -0400
+
+pm3 (1.1.13-2) unstable; urgency=low
+
+  * Some runtime compatibility issues with glibc2.1.1 resolved.
+  * Libraries reorganized - static libs split into separate package.
+
+ -- Mike Goldman <whig@by.net>  Thu,  5 Aug 1999 06:37:59 -0400
+
+pm3 (1.1.13-1) unstable; urgency=low
+
+  * Initial Release.
+
+ -- Mike Goldman <whig@by.net>  Sat, 31 Jul 1999 03:43:55 -0400
+
+Local variables:
+mode: debian-changelog
+End:
--- pm3-1.1.15.orig/debian/copyright
+++ pm3-1.1.15/debian/copyright
@@ -0,0 +1,200 @@
+This package was debianized by Mike Goldman <whig@debian.org> on
+Sat, 31 Jul 1999 03:43:55 -0400.
+
+It was downloaded from:
+  ftp://m3.polymtl.ca/pub/m3/targzip/
+  [Note: win32 source files removed due to copyright concerns.]
+
+Upstream Author(s):
+  Michel Dagenais <michel.dagenais@polymtl.ca>
+  Anthony Hosking <hosking@cs.purdue.edu>
+  Louis-Dominique Dubeau <ldd@step.polymtl.ca>
+
+Copyright:
+
+The Modula-3 release of Ecole Polytechnique de Montreal (PM3) contains
+numerous packages from several sources, all freely redistributable. Each
+package describes its detailed licensing terms. Our interpretation of these
+terms, without any specific legal value, is exposed below.
+
+The bulk of the distribution originates from DEC SRC and allows free
+modification and redistribution, provided that you do not hold DEC liable for
+anything related to SRC Modula-3 and that you pay any fee incurred because of
+claims of damage arising from your possession or use or inability to use the
+software. By passing along this copyright with any redistribution, you prevent
+the situation where someone else would sue DEC and you would be required to
+indemnify DEC for such action. 
+
+A few packages or portions of packages are copyrighted by other industrial
+research laboratories from Olivetti (m3tk), Xerox (regex), and Sun
+Microsystems (m3tk). They may be freely modified and redistributed provided
+that the copyright notice is preserved and that you do not assume any
+liability on their part. 
+
+A few programs are available under the GNU GPL. These may be freely
+redistributed provided that you make the modified source code available. A few
+libraries are available under the GNU LGPL. These may be freely redistributed
+provided that you make the modified library source code available and allow
+relinking with a newer version of the library. 
+
+Our understanding of all the copyrights involved in PM3 is that you can safely
+distribute any program or library developed with PM3 provided that you pass
+along the copyrights, the source code of the PM3 libraries used (at least for
+the LPGL libraries), and the relinkable binaries for the rest (if you are
+using any LGPL libraries). 
+
+==============================================================================
+
+                     Digital License Agreement
+
+                          SRC Modula-3
+
+ 1. Grant Of License.  Digital Equipment Corporation, having a principal
+    office at 146 Main Street, Maynard, MA 01754 ("DIGITAL") grants to
+    you ("LICENSEE") the non-exclusive, non-transferable, royalty free
+    right to use, modify, reproduce and distribute SRC Modula-3 ("SOFTWARE")
+    subject to the terms set forth herein.  Any distribution of SOFTWARE
+    shall include this Digital License Agreement in human readable form.
+
+ 2. Title to Intellectual Property and Software.  Subject to the limited
+    rights and licenses granted under this License Agreement, all rights,
+    title and interests including patent, copyright, and trademark rights
+    in SOFTWARE are and shall remain vested in DIGITAL to the exclusion
+    of LICENSEE.  DIGITAL represents and warrants that DIGITAL has the
+    legal right to grant such licenses as are expressly granted under
+    this Agreement.
+
+ 3. Copyright.  The SOFTWARE is owned by DIGITAL or its suppliers and is
+    protected by United States copyright laws and international treaty
+    provisions.  Therefore, you must treat the SOFTWARE like any other
+    copyrighted material (e.g., a book or musical recording) except
+    that you may use the SOFTWARE as provided in this Digital License
+    Agreement.
+
+ 4. Improvements.  LICENSEE hereby grants to DIGITAL a non-exclusive,
+    non-transferable, royalty free right to use, modify, reproduce
+    and distribute with the right to sublicense at any tier, any
+    improvements, enhancements, extensions, or modifications that
+    LICENSEE make to SOFTWARE, provided such are returned to DIGITAL
+    by LICENSEE.
+
+ 5. DISCLAIMER OF WARRANTY.  Because the SOFTWARE is a research work and
+    not a released product, it is provided "AS IS" WITHOUT WARRANTY OF ANY
+    KIND AND WITHOUT ANY SUPPORT SERVICES.  EXCEPT AS SPECIFICALLY PROVIDED
+    ABOVE IN SECTION 2, DIGITAL FURTHER DISCLAIMS ALL OTHER EXPRESS OR
+    IMPLIED WARRANTIES OF MERCHANTABILITY OR OF FITNESS FOR A PARTICULAR
+    PURPOSE.  THE ENTIRE RISK ARISING OUT OF THE USE OR PERFORMANCE OF
+    THE SOFTWARE REMAINS WITH YOU.
+
+ 6. Limitation of Liability.  IN NO EVENT SHALL DIGITAL OR ITS SUPPLIERS BE
+    LIABLE IN AN AMOUNT THAT EXCEEDS THE LICENSE FEE PAID BY LICENSEE FOR
+    ANY DAMAGES (INCLUDING, WITH LIMITATION, DAMAGES FOR LOSS OF BUSINESS
+    PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR OTHER
+    PECUNIARY LOSS), REGARDLESS OF THE FORM OF CLAIM OR ACTIONS, ARISING
+    OUT OF THE USE OF OR INABILITY TO USE THE SOFTWARE OR DOCUMENTATION,
+    EVEN IF DIGITAL HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+    BECAUSE SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF LIABILITY
+    FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES, THE ABOVE LIMITATION MAY NOT
+    APPLY TO YOU.
+
+ 7. Acknowledgement of Allocation of Risk.  LICENSEE acknowledges and agrees
+    that the fees charged by DIGITAL in this Agreement reflect the allocation
+    of risks provided by the foregoing limitation of liability.  LICENSEE
+    acknowledges and represents that it has read and understands these
+    allocations of risk limiting the liability of DIGITAL and that it
+    understands that a modification of the allocation of risks set forth
+    in this agreement would affect the fees charged by DIGITAL, and that
+    LICENSEE, in consideration of such fees, agrees to such allocations
+    of risk.
+
+ 8. LICENSEE INDEMNIFICATION.  LICENSEE SHALL INDEMNIFY DIGITAL AGAINST
+    ALL COSTS AND DAMAGE JUDGEMENTS, INCLUDING ATTORNEY'S FEES AND COSTS
+    OF DEFENSE, INCURRED BECAUSE OF CLAIMS OF DAMAGE ARISING FROM LICENSEE'S
+    POSSESSION OR USE OR INABILITY TO USE SOFTWARE.
+
+ 9. GOVERNMENT RESTRICTED RIGHTS.  The SOFTWARE and documentation are provided
+    with RESTRICTED RIGHTS.  Use duplication, or disclosure by the Government
+    is subject to restrictions as set forth in subparagraph (c)(1)(ii) of The
+    Rights in Technical Data and Computer Software clause in DFARS
+    252.227-7013, or subparagraphs (c)(i) and (2) of the Commercial Computer
+    Software -- Restricted Rights at 48 CFR 52.227-19, as applicable.
+    Manufacturer is Digital Equipment Corporation, 130 Lytton Avenue,
+    Palo Alto, CA 94301-1044.
+
+10. Severability.  If any provision of the Agreement is held illegal or
+    unenforceable by any court of competent jurisdiction, such provision
+    shall be deemed separable from the remaining provisions of this Agreement
+    and shall not affect or impair the validity or enforceability of the
+    remaining provisions of this Agreement.
+
+11. Governing Law.  This Agreement is governed by the laws of the
+    Commonwealth of Massachusetts.
+
+12. Publicity.  You may not use the name of DIGITAL in any advertisement,
+    press release or other publicity with reference to SRC Modula-3
+    without prior written consent of DIGITAL.
+
+13. Should you have any questions concerning this Agreement, or if you
+    desire to contact Digital for any reason, please do so via E-mail:
+    M3-REQUEST@SRC.DEC.COM.
+
+==============================================================================
+
+(***************************************************************************)
+(*                      Copyright (C) Olivetti 1989                        *)
+(*                          All Rights reserved                            *)
+(*                                                                         *)
+(* Use and copy of this software and preparation of derivative works based *)
+(* upon this software are permitted to any person, provided this same      *)
+(* copyright notice and the following Olivetti warranty disclaimer are     *)
+(* included in any copy of the software or any modification thereof or     *)
+(* derivative work therefrom made by any person.                           *)
+(*                                                                         *)
+(* This software is made available AS IS and Olivetti disclaims all        *)
+(* warranties with respect to this software, whether expressed or implied  *)
+(* under any law, including all implied warranties of merchantibility and  *)
+(* fitness for any purpose. In no event shall Olivetti be liable for any   *)
+(* damages whatsoever resulting from loss of use, data or profits or       *)
+(* otherwise arising out of or in connection with the use or performance   *)
+(* of this software.                                                       *)
+(***************************************************************************)
+
+==============================================================================
+
+(* Copyright (c) 1991, 1992 Xerox Corporation.  All rights reserved.
+ 
+    Use and copying of this software and preparation of derivative works
+    based upon this software are permitted.  Any distribution of this
+    software or derivative works must comply with all applicable United
+    States export control laws.  This software is made available AS IS, and
+    Xerox Corporation makes no warranty about the software, its performance
+    or its conformity to any specification. *)
+
+==============================================================================
+
+(************************************************************************
+!                                                                       *
+!*                                                                      *
+!*         Copyright 1994 Sun Microsystems, Inc. All Rights Reserved.   *
+!*                                                                      *
+!*      Permission to use, copy, modify, and distribute this software   *
+!*      and its documentation for any purpose and without fee is hereby *
+!*      granted, provided that the above copyright notice appear in all *
+!*      copies and that both that copyright notice and this permission  *
+!*      notice appear in supporting documentation, and that the name of *
+!*      Sun Microsystems, Inc. (SMI) not be used in advertising or      *
+!*      publicity pertaining to distribution of the software without    *
+!*      specific, written prior permission.                             *
+!*                                                                      *
+!*                                                                      *
+!*      SMI DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,      *
+!*      INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY,            *
+!*      FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT.           *
+!*      IN NO EVENT SHALL SMI BE LIABLE FOR ANY SPECIAL, INCIDENTAL,    *
+!*      INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER     *
+!*      RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN      *
+!*      ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,        *
+!*      ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE     *
+!*      OF THIS SOFTWARE.                                               *
+!*                                                                      *
+!***********************************************************************)
--- pm3-1.1.15.orig/debian/TODO
+++ pm3-1.1.15/debian/TODO
@@ -0,0 +1 @@
+This thing is huge!  Should be broken into lots of smaller packages.
--- pm3-1.1.15.orig/debian/m3gdb.files
+++ pm3-1.1.15/debian/m3gdb.files
@@ -0,0 +1,3 @@
+usr/bin/m3gdb
+usr/man/man1/m3gdb.1
+usr/lib/m3/pkg/m3gdb
--- pm3-1.1.15.orig/debian/libpm3.files
+++ pm3-1.1.15/debian/libpm3.files
@@ -0,0 +1,28 @@
+usr/lib/libTempFiles.so.1
+usr/lib/libm3.so.1
+usr/lib/libm3back.so.1
+usr/lib/libm3config.so.1
+usr/lib/libm3core.so.1
+usr/lib/libm3driver.so.1
+usr/lib/libm3front.so.1
+usr/lib/libm3link.so.1
+usr/lib/libm3middle.so.1
+usr/lib/libm3objfile.so.1
+usr/lib/libm3quake.so.1
+usr/lib/libm3templates.so.1
+usr/lib/libsgml.so.1
+usr/lib/m3/LINUXLIBC6/libTempFiles.so.1
+usr/lib/m3/LINUXLIBC6/libm3.so.1
+usr/lib/m3/LINUXLIBC6/libm3back.so.1
+usr/lib/m3/LINUXLIBC6/libm3config.so.1
+usr/lib/m3/LINUXLIBC6/libm3core.so.1
+usr/lib/m3/LINUXLIBC6/libm3driver.so.1
+usr/lib/m3/LINUXLIBC6/libm3front.so.1
+usr/lib/m3/LINUXLIBC6/libm3link.so.1
+usr/lib/m3/LINUXLIBC6/libm3middle.so.1
+usr/lib/m3/LINUXLIBC6/libm3objfile.so.1
+usr/lib/m3/LINUXLIBC6/libm3quake.so.1
+usr/lib/m3/LINUXLIBC6/libm3templates.so.1
+usr/lib/m3/LINUXLIBC6/libsgml.so.1
+usr/lib/m3/LINUXLIBC6/m3cgc1
+usr/lib/m3/LINUXLIBC6/report_coverage.o
--- pm3-1.1.15.orig/debian/libpm3.postinst
+++ pm3-1.1.15/debian/libpm3.postinst
@@ -0,0 +1,8 @@
+#!/bin/sh
+set -e
+ 
+if [ "$1" = "configure" ] ; then
+        ldconfig
+fi
+ 
+#DEBHELPER#
--- pm3-1.1.15.orig/debian/control
+++ pm3-1.1.15/debian/control
@@ -0,0 +1,121 @@
+Source: pm3
+Section: devel
+Priority: optional
+Maintainer: Mike Goldman <whig@debian.org>
+Build-Depends: pm3-boot, debhelper, libxaw-dev
+Standards-Version: 3.5.6
+
+Package: pm3-extra
+Section: devel
+Architecture: i386
+Depends: ${shlibs:Depends}, libpm3-extra (= ${Source-Version})
+Description: Polytechnique Montreal Modula-3 Extra Files
+ The Modula-3 distribution of Ecole Polytechnique de Montreal is based
+ on the DEC SRC Modula-3 programming environment.  This package contains
+ tools and demonstrations not actually part of the base compiler itself, but
+ nonetheless probably very useful for Modula-3 development.
+
+Package: libpm3-extra
+Section: libs
+Architecture: i386
+Depends: ${shlibs:Depends}
+Description: Polytechnique Montreal Modula-3 Extra Libraries
+ The Modula-3 distribution of Ecole Polytechnique de Montreal is based
+ on the DEC SRC Modula-3 programming environment.  This package contains
+ libraries not actually part of the base compiler itself, but nonetheless
+ probably very useful for Modula-3 development.
+
+Package: pm3
+Section: devel
+Architecture: i386
+Suggests: m3gdb
+Depends: ${shlibs:Depends}, libpm3 (= ${Source-Version})
+Description: Polytechnique Montreal Modula-3
+ The Modula-3 distribution of Ecole Polytechnique de Montreal is based
+ on the DEC SRC Modula-3 programming environment.
+ .
+ Modula-3 is a systems programming language that descends from Mesa,
+ Modula-2, Cedar, and Modula-2+. It also resembles its cousins Object
+ Pascal, Oberon, and Euclid.
+ .
+ The goal of Modula-3 is to be as simple and safe as it can be while
+ meeting the needs of modern systems programmers. Instead of exploring new
+ features, they studied the features of the Modula family of languages
+ that have proven themselves in practice and tried to simplify them into
+ a harmonious language. They found that most of the successful features
+ were aimed at one of two main goals: greater robustness, and a simpler,
+ more systematic type system.
+ .
+ Modula-3 retains one of Modula-2's most successful features, the
+ provision for explicit interfaces between modules. It adds objects and
+ classes, exception handling, garbage collection, lightweight processes
+ (or threads), and the isolation of unsafe features.
+ .
+ A large number of platform independent libraries are available for easily
+ constructing distributed, graphical, multi-threaded applications.
+
+Package: libpm3
+Section: libs
+Architecture: i386
+Depends: ${shlibs:Depends}
+Description: Polytechnique Montreal Modula-3 Libraries
+ The Modula-3 distribution of Ecole Polytechnique de Montreal is based
+ on the DEC SRC Modula-3 programming environment.  Programs built with
+ PM3 require this library.
+
+Package: libpm3-static
+Section: devel
+Architecture: i386
+Recommends: pm3 (= ${Source-Version})
+Description: Polytechnique Montreal Modula-3 Static Libraries
+ The Modula-3 distribution of Ecole Polytechnique de Montreal is based
+ on the DEC SRC Modula-3 programming environment.  This package contains
+ the static link libraries needed to build standalone executables.
+
+Package: netobjd
+Section: net
+Architecture: i386
+Depends: ${shlibs:Depends}, libpm3, libpm3-extra
+Description: the Network Object agent daemon
+ The Network Objects package provides a simple but powerful facility for
+ remote method invocation in the context of Modula-3.  Under Network
+ Objects, all subtypes of the object type NetObj.T are treated specially
+ in that they can be passed to remote address spaces by reference.  This
+ remote reference appears at the destination as a surrogate object which
+ is a subtype of the original object type.  If the original type has
+ methods, these methods can be remotely invoked through the surrogate.
+
+Package: obliq
+Section: interpreters
+Architecture: i386
+Recommends: netobjd
+Depends: ${shlibs:Depends}, libpm3, libpm3-extra
+Description: An interactive interpreter for the Obliq language.
+ Obliq is a small, statically scoped, untyped language. It is object-oriented,
+ higher-order, and distributed. State is local to an address space, while
+ computation can migrate over the network. The distributed computation
+ mechanism is based on Modula-3 Network Objects.
+ .
+ This package includes several versions of Obliq:
+  obliq:         Obliq interpreter
+  obliq-3D:      Obliq interpreter with full 3D animation support
+  obliq-anim:    Obliq interpreter with full animation support
+  obliq-min:     Obliq interpreter with minimal runtime hooks
+  obliq-std:     Obliq interpreter with the standard runtime hooks
+  obliq-ui:      Obliq interpreter with ui support
+  obliqsrv:      Obliq server
+  obliqsrv-std:  Obliq server with the standard runtime hooks
+  obliqsrv-ui:   Obliq server with ui support
+  visobliq:      Prototype of an easy-to-use distributed programming
+                 environment using Obliq
+
+Package: mentor
+Section: graphics
+Architecture: i386
+Depends: ${shlibs:Depends}, obliq, libpm3, libpm3-extra, netobjd
+Description: A collection of algorithm animations
+ Mentor encapsulates the Zeus animation library for Modula-3 into a single
+ application. Zeus itself is not very well documented, but a summary of the
+ animations which are part of the mentor application is available at:
+ .
+ http://www.research.digital.com/SRC/zeus/home.html
--- pm3-1.1.15.orig/debian/rules
+++ pm3-1.1.15/debian/rules
@@ -0,0 +1,151 @@
+#!/usr/bin/make -f
+#-*- makefile -*-
+# Made with the aid of dh_make, by Craig Small
+# Sample debian/rules that uses debhelper. GNU copyright 1997 by Joey Hess.
+# Also some stuff taken from debmake scripts, by Christoph Lameter.
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+build: build-stamp
+build-stamp:
+	@if [ ! -f /usr/bin/m3build-static -o ! -f /usr/bin/m3ship-static ]; \
+	then \
+	  echo "You must install pm3-boot before you can build this package."; \
+	  exit 1; \
+	fi
+
+	dh_testdir
+
+	# Add here commands to compile the package.
+	install -d boot-LINUXLIBC6/m3build/LINUXLIBC6
+	install -d boot-LINUXLIBC6/m3ship/LINUXLIBC6
+	-ln -s /usr/bin/m3build-static \
+		boot-LINUXLIBC6/m3build/LINUXLIBC6/m3build
+	-ln -s /usr/bin/m3ship-static \
+		boot-LINUXLIBC6/m3ship/LINUXLIBC6/m3ship
+	LD_LIBRARY_PATH=`pwd`/EXPORTS/usr/lib/m3/LINUXLIBC6:${LD_LIBRARY_PATH} \
+		PATH=`pwd`/EXPORTS/usr/bin:${PATH} \
+		m3build-static -T ../m3config/src -DBOOTSTRAP=TRUE
+
+	touch build-stamp
+
+clean:
+	dh_testdir
+	dh_testroot
+	rm -f build-stamp install-stamp
+
+	# Add here commands to clean up after the build process.
+	m3build-static -T ../m3config/src -DBOOTSTRAP=TRUE -DCLEAN_ALL
+	rm -rf boot-LINUXLIBC6 LINUXLIBC6 EXPORTS list
+
+	dh_clean
+
+install: install-stamp
+install-stamp: build-stamp
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+	dh_installdirs
+
+	# Add here commands to install the package into debian/tmp.
+	(cd EXPORTS; tar cf - *) | (cd debian/tmp; tar xvf -)
+# Replace shared library symlinks with actual files
+	(cd debian/tmp; for file in \
+	  `find usr/lib/m3/LINUXLIBC6 -type l`; \
+	do \
+	  BASENAME=`basename $${file}`; \
+	  cp $${file} usr/lib/$${BASENAME}; \
+	  rm $${file}; \
+	  ln -s ../../$${BASENAME} $${file}; \
+	done)
+# Now replace the original shared libs with symlinks
+	(cd debian/tmp; for file in \
+	  `find usr/lib/m3/pkg -name '*.so'`; \
+	do \
+	  BASENAME=`basename $${file}`; \
+	  rm $${file}; \
+	  ln -s ../../../LINUXLIBC6/$${BASENAME}.1 $$file; \
+	done)
+# Install the emacs helper files
+	(cd debian/tmp; mv usr/lib/elisp usr/share/emacs/site-lisp/pm3)
+# Move the games and demo files
+	for file in \
+	  tetris columns solitaire BadBricks Fours Calculator Cube; \
+	do \
+	  (cd debian/tmp; \
+	   mv usr/bin/$${file} usr/games); \
+	done
+# Fix a couple weird executable perms
+	chmod -x debian/tmp/usr/lib/m3/LINUXLIBC6/scan.llscan
+	chmod +x debian/tmp/usr/lib/m3/pkg/vorun/LINUXLIBC6/vorun
+# Remove html files (for now - perhaps create a separate package later)
+	-rm -f `find debian/tmp/usr/lib -name '*.html'`
+# libpm3-static includes all *.a files (for now, anyhow)
+	(cd debian/tmp; for file in \
+	  `find usr/lib/m3/pkg -name '*.a'`; \
+	do \
+	  install -D $${file} ../libpm3-static/$${file} && rm -f $${file}; \
+	done)
+
+	dh_movefiles
+# libpm3-extra should be those not moved to libpm3
+	mv debian/tmp/usr/lib/*.so* debian/libpm3-extra/usr/lib
+	mv debian/tmp/usr/lib/m3/LINUXLIBC6 debian/libpm3-extra/usr/lib/m3
+# Move the docs
+	(cd debian; for docdir in */usr/doc; \
+	do \
+	  NEWDIR=`echo $${docdir} | sed 's;doc$$;share/doc;'`; \
+	  mv $${docdir} $${NEWDIR}; \
+	done)
+# Move the man pages
+	(cd debian; for mandir in */usr/man; \
+	do \
+	  NEWDIR=`echo $${mandir} | sed 's;man$$;share/man;'`; \
+	  mv $${mandir} $${NEWDIR}; \
+	done)
+
+	touch install-stamp
+
+# Build architecture-independent files here.
+binary-indep: build install
+# We have nothing to do by default.
+
+# Build architecture-dependent files here.
+binary-arch: build install
+#	dh_testversion
+	dh_testdir
+	dh_testroot
+	dh_installdocs
+#	dh_installexamples
+#	dh_installmenu
+#	dh_installemacsen
+	dh_installinit
+#	dh_installcron
+#	dh_installmanpages
+	dh_undocumented
+	dh_installchangelogs
+	dh_strip
+	dh_link
+	dh_compress
+	dh_fixperms
+	# You may want to make some executables suid here
+	dh_suidregister
+	dh_installdeb
+#	dh_perl
+
+# dpkg-shlibdeps dies on non-dynamic executables
+	chmod -x `find debian -name report_coverage.o`
+	dh_shlibdeps
+	chmod +x `find debian -name report_coverage.o`
+
+	dh_gencontrol
+	dh_makeshlibs
+	dh_md5sums
+	dh_builddeb
+
+source diff:                                                                  
+	@echo >&2 'source and diff are obsolete - use dpkg-source -b'; false
+
+binary: binary-indep binary-arch
+.PHONY: build clean binary-indep binary-arch binary install
--- pm3-1.1.15.orig/debian/m3gdb.dirs
+++ pm3-1.1.15/debian/m3gdb.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/pm3-extra.undocumented
+++ pm3-1.1.15/debian/pm3-extra.undocumented
@@ -0,0 +1,4 @@
+WebCard.1
+m3ide.1
+m3tohtmlf.1
+m3where.1
--- pm3-1.1.15.orig/debian/netobjd.dirs
+++ pm3-1.1.15/debian/netobjd.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/pm3.files
+++ pm3-1.1.15/debian/pm3.files
@@ -0,0 +1,41 @@
+usr/bin/analyze_coverage
+usr/bin/m3build
+usr/bin/m3bundle
+usr/bin/m3coco
+usr/bin/m3ship
+usr/bin/m3tosgml
+usr/bin/sgmlconv
+usr/bin/sgmllinear
+usr/bin/sgmlnormalize
+usr/bin/sgmlstructure
+usr/bin/sgmltom3
+usr/man/man1/analyze_coverage.1
+usr/man/man1/m3bundle.1
+usr/lib/m3/pkg/coverage
+usr/lib/m3/pkg/libm3
+usr/lib/m3/pkg/m3back
+usr/lib/m3/pkg/m3build
+usr/lib/m3/pkg/m3bundle
+usr/lib/m3/pkg/m3coco
+usr/lib/m3/pkg/m3config
+usr/lib/m3/pkg/m3core
+usr/lib/m3/pkg/m3doc
+usr/lib/m3/pkg/m3driver
+usr/lib/m3/pkg/m3front
+usr/lib/m3/pkg/m3linker
+usr/lib/m3/pkg/m3middle
+usr/lib/m3/pkg/m3objfile
+usr/lib/m3/pkg/m3quake
+usr/lib/m3/pkg/m3ship
+usr/lib/m3/pkg/m3templates
+usr/lib/m3/pkg/m3tosgml
+usr/lib/m3/pkg/mtex
+usr/lib/m3/pkg/sgml
+usr/lib/m3/pkg/sgmlconv
+usr/lib/m3/pkg/sgmllinear
+usr/lib/m3/pkg/sgmlnormalize
+usr/lib/m3/pkg/sgmlstructure
+usr/lib/m3/pkg/sgmltom3
+usr/lib/m3/pkg/sgmltools
+usr/lib/m3/pkg/tempfiles
+usr/doc/pm3
--- pm3-1.1.15.orig/debian/pm3.dirs
+++ pm3-1.1.15/debian/pm3.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/libpm3.dirs
+++ pm3-1.1.15/debian/libpm3.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/obliq.files
+++ pm3-1.1.15/debian/obliq.files
@@ -0,0 +1,58 @@
+usr/bin/obliq
+usr/bin/obliq-3D
+usr/bin/obliq-anim
+usr/bin/obliq-min
+usr/bin/obliq-std
+usr/bin/obliq-ui
+usr/bin/obliqsrv
+usr/bin/obliqsrv-std
+usr/bin/obliqsrv-ui
+usr/bin/visobliq
+usr/bin/voquery
+usr/bin/vocgi
+usr/man/man1/obliq.1
+usr/man/man1/obliq-3D.1
+usr/man/man1/obliq-anim.1
+usr/man/man1/obliq-min.1
+usr/man/man1/obliq-std.1
+usr/man/man1/obliq-ui.1
+usr/man/man1/obliqsrv.1
+usr/man/man1/obliqsrv-std.1
+usr/man/man1/obliqsrv-ui.1
+usr/man/man1/visobliq.1
+usr/lib/libobliq.so.1
+usr/lib/libobliqlib3D.so.1
+usr/lib/libobliqlibanim.so.1
+usr/lib/libobliqlibm3.so.1
+usr/lib/libobliqlibui.so.1
+usr/lib/libobliqparse.so.1
+usr/lib/libobliqprint.so.1
+usr/lib/libobliqrt.so.1
+usr/lib/m3/LINUXLIBC6/libobliq.so.1
+usr/lib/m3/LINUXLIBC6/libobliqlib3D.so.1
+usr/lib/m3/LINUXLIBC6/libobliqlibanim.so.1
+usr/lib/m3/LINUXLIBC6/libobliqlibm3.so.1
+usr/lib/m3/LINUXLIBC6/libobliqlibui.so.1
+usr/lib/m3/LINUXLIBC6/libobliqparse.so.1
+usr/lib/m3/LINUXLIBC6/libobliqprint.so.1
+usr/lib/m3/LINUXLIBC6/libobliqrt.so.1
+usr/lib/m3/pkg/obliq
+usr/lib/m3/pkg/obliqbin3D
+usr/lib/m3/pkg/obliqbinanim
+usr/lib/m3/pkg/obliqbinmin
+usr/lib/m3/pkg/obliqbinstd
+usr/lib/m3/pkg/obliqbinui
+usr/lib/m3/pkg/obliqsrvstd
+usr/lib/m3/pkg/obliqsrvui
+usr/lib/m3/pkg/visualobliq
+usr/lib/m3/pkg/voquery
+usr/lib/m3/pkg/vocgi
+usr/lib/m3/pkg/vorun
+usr/lib/m3/pkg/m3obliq
+usr/lib/m3/pkg/obliqlib3D
+usr/lib/m3/pkg/obliqlibanim
+usr/lib/m3/pkg/obliqlibm3
+usr/lib/m3/pkg/obliqlibui
+usr/lib/m3/pkg/obliqparse
+usr/lib/m3/pkg/obliqprint
+usr/lib/m3/pkg/obliqrt
--- pm3-1.1.15.orig/debian/libpm3-extra.dirs
+++ pm3-1.1.15/debian/libpm3-extra.dirs
@@ -0,0 +1,2 @@
+usr/lib/m3
+usr/share
--- pm3-1.1.15.orig/debian/pm3.undocumented
+++ pm3-1.1.15/debian/pm3.undocumented
@@ -0,0 +1,9 @@
+m3build.1
+m3coco.1
+m3ship.1
+m3tosgml.1
+sgmlconv.1
+sgmllinear.1
+sgmlnormalize.1
+sgmlstructure.1
+sgmltom3.1
--- pm3-1.1.15.orig/debian/obliq.dirs
+++ pm3-1.1.15/debian/obliq.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/obliq.postinst
+++ pm3-1.1.15/debian/obliq.postinst
@@ -0,0 +1,8 @@
+#!/bin/sh
+set -e
+ 
+if [ "$1" = "configure" ] ; then
+        ldconfig
+fi
+ 
+#DEBHELPER#
--- pm3-1.1.15.orig/debian/libpm3-extra.postinst
+++ pm3-1.1.15/debian/libpm3-extra.postinst
@@ -0,0 +1,8 @@
+#!/bin/sh
+set -e
+ 
+if [ "$1" = "configure" ] ; then
+        ldconfig
+fi
+ 
+#DEBHELPER#
--- pm3-1.1.15.orig/debian/mentor.dirs
+++ pm3-1.1.15/debian/mentor.dirs
@@ -0,0 +1 @@
+usr/share
--- pm3-1.1.15.orig/debian/pm3-extra.dirs
+++ pm3-1.1.15/debian/pm3-extra.dirs
@@ -0,0 +1,2 @@
+usr/games
+usr/share/emacs/site-lisp
--- pm3-1.1.15.orig/debian/mentor.files
+++ pm3-1.1.15/debian/mentor.files
@@ -0,0 +1,3 @@
+usr/bin/mentor
+usr/man/man1/mentor.1
+usr/lib/m3/pkg/mentor
--- pm3-1.1.15.orig/debian/obliq.undocumented
+++ pm3-1.1.15/debian/obliq.undocumented
@@ -0,0 +1,2 @@
+vocgi.1
+voquery.1
--- pm3-1.1.15.orig/debian/netobjd.postinst
+++ pm3-1.1.15/debian/netobjd.postinst
@@ -0,0 +1,8 @@
+#!/bin/sh
+set -e
+ 
+if [ "$1" = "configure" ] ; then
+        ldconfig
+fi
+ 
+#DEBHELPER#
--- pm3-1.1.15.orig/debian/netobjd.files
+++ pm3-1.1.15/debian/netobjd.files
@@ -0,0 +1,8 @@
+usr/bin/netobjd
+usr/man/man1/netobjd.1
+usr/lib/libm3netobj.so.1
+usr/lib/m3/LINUXLIBC6/libm3netobj.so.1
+usr/lib/m3/pkg/netobj
+usr/lib/m3/pkg/netobjd
+usr/lib/m3/pkg/netobjects
+usr/lib/m3/pkg/network
--- pm3-1.1.15.orig/debian/netobjd.init
+++ pm3-1.1.15/debian/netobjd.init
@@ -0,0 +1,38 @@
+#!/bin/sh -e
+#
+# Start and stop the Modula-3 Network Object agent daemon
+
+PATH=/sbin:/bin:/usr/sbin:/usr/bin
+DAEMON=/usr/bin/netobjd
+NAME=netobjd
+DESC="Network Object agent daemon"
+
+test -f $DAEMON || exit 0
+
+ssd=`which start-stop-daemon`
+
+case "$1" in
+  start)
+	echo -n "Starting $DESC: "
+	su nobody -c "$ssd --start --quiet --exec $DAEMON" &
+	echo "$NAME."
+	;;
+  stop)
+	echo -n "Stopping $DESC: "
+	start-stop-daemon --stop --quiet --exec $DAEMON \
+		--user nobody --name $NAME
+	echo "$NAME."
+	;;
+  restart|force-reload)
+  	$0 stop
+	sleep 1
+	$0 start
+	;;
+  *)
+	N=/etc/init.d/$NAME
+	echo "Usage: $N {start|stop|restart|force-reload}" >&2
+	exit 1
+	;;
+esac
+
+exit 0
--- pm3-1.1.15.orig/debian/netobjd.conffiles
+++ pm3-1.1.15/debian/netobjd.conffiles
@@ -0,0 +1 @@
+/etc/init.d/netobjd
