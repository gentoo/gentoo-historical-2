--- pl-5.6.28.orig/src/pl-file.c	2007-01-24 08:25:14.000000000 +1300
+++ pl-5.6.28/src/pl-file.c	2007-02-25 16:34:14.000000000 +1300
@@ -3611,7 +3611,7 @@
     releaseStream(in);
   if ( out )
     releaseStream(out);
-  if ( error && error != out )
+  if ( error && PL_compare(A2, A3) != 0 )
     releaseStream(error);
 
   return rval;
