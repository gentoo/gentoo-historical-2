--- parse.c.orig	2005-07-07 18:51:15.000000000 +0200
+++ parse.c	2005-07-07 18:53:35.000000000 +0200
@@ -39,7 +39,7 @@
 #include <sys/mman.h>
 #endif
 
-const struct fieldinfo *fieldinfos = {
+const struct fieldinfo fieldinfos[]= {
   /* NB: capitalisation of these strings is important. */
   { "Package",          f_name,            w_name                                     },
   { "Essential",        f_boolean,         w_booleandefno,   PKGIFPOFF(essential)     },
@@ -96,7 +96,7 @@
   const char *fieldstart, *valuestart;
   char *value= NULL;
   int fieldlen= 0, valuelen= 0;
-  int *ip, c;
+  int *ip, c, i;
   struct stat stat;
 
   if (warncount) *warncount= 0;
@@ -194,9 +194,10 @@
 	fieldstart= nick->canon;
 	fieldlen= strlen(fieldstart);
       }
-      for (fip= fieldinfos, ip= fieldencountered;
-           fip->name && strncasecmp(fieldstart,fip->name, fieldlen);
-           fip++, ip++);
+      for (i=0, ip=fieldencountered;
+           fieldinfos[i].name && strncasecmp(fieldstart,fieldinfos[i].name, fieldlen);
+	   i++, ip++);
+      fip = &(fieldinfos[i]);
       if (fip->name) {
 	value= realloc(value,valuelen+1);
 	memcpy(value,valuestart,valuelen);
