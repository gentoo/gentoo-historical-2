--- lib/parse.c.orig	2004-11-11 04:16:33.000000000 +0100
+++ lib/parse.c	2005-07-03 02:13:34.000000000 +0200
@@ -96,7 +96,7 @@
   const char *fieldstart, *valuestart;
   char *value= NULL;
   int fieldlen= 0, valuelen= 0;
-  int *ip, c;
+  int *ip, c, i;
   struct stat stat;
 
   if (warncount) *warncount= 0;
@@ -194,9 +194,13 @@
 	fieldstart= nick->canon;
 	fieldlen= strlen(fieldstart);
       }
-      for (fip= fieldinfos, ip= fieldencountered;
+      /*for (fip= fieldinfos, ip= fieldencountered;
            fip->name && strncasecmp(fieldstart,fip->name, fieldlen);
-           fip++, ip++);
+           fip++, ip++);*/
+      for (i=0, ip=fieldencountered;
+           fieldinfos[i].name && strncasecmp(fieldstart,fieldinfos[i].name, fieldlen);
+	   i++, ip++);
+      fip = &(fieldinfos[i]);
       if (fip->name) {
 	value= realloc(value,valuelen+1);
 	memcpy(value,valuestart,valuelen);
