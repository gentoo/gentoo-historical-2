--- eject-2.0.12/eject.c.orig	2003-03-06 22:38:27.000000000 +0200
+++ eject-2.0.12/eject.c	2003-03-06 22:41:07.000000000 +0200
@@ -56,7 +56,13 @@
 #include <sys/ioctl.h>
 #include <sys/wait.h>
 #include <sys/mtio.h>
-#include <linux/types.h>
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,5,0) /* 2.5.x breaks things again */
+# define __KERNEL__
+# include <linux/types.h>
+# undef __KERNEL__
+#else
+# include <linux/types.h>
+#endif
 #include <linux/cdrom.h>
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,1,0)
 #include <linux/ucdrom.h>
