--- eject.c.orig	2002-12-09 22:28:08.000000000 +0000
+++ eject.c	2003-11-08 17:06:43.000000000 +0000
@@ -58,7 +58,13 @@
 #include <sys/ioctl.h>
 #include <sys/wait.h>
 #include <sys/mtio.h>
-#include <linux/types.h>
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,5,0) /* 2.5.x breaks things again */
+# define __KERNEL__
+# include <linux/types.h>
+# undef __KERNEL__
+#else
+# include <linux/types.h>
+#endif
 #include <linux/cdrom.h>
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,1,0)
 #include <linux/ucdrom.h>
