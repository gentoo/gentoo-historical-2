--- archival/libunarchive/data_extract_all.c.orig	2007-01-24 16:34:38.000000000 -0500
+++ archival/libunarchive/data_extract_all.c	2007-02-11 17:22:14.000000000 -0500
@@ -111,6 +111,12 @@
 		lchown(file_header->name, file_header->uid, file_header->gid);
 	}
 
+	if (!(archive_handle->flags & ARCHIVE_NOPRESERVE_PERM) &&
+		 (file_header->mode & S_IFMT) != S_IFLNK)
+	{
+		chmod(file_header->name, file_header->mode);
+	}
+
 	if (archive_handle->flags & ARCHIVE_PRESERVE_DATE) {
 		struct utimbuf t;
 		t.actime = t.modtime = file_header->mtime;
