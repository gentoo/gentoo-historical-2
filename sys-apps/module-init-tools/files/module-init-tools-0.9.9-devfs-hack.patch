--- module-init-tools-0.9.9/modprobe.c.orig	2003-01-30 04:17:53.000000000 +0200
+++ module-init-tools-0.9.9/modprobe.c	2003-02-18 01:05:59.000000000 +0200
@@ -1139,9 +1139,9 @@
 
 	/* This is a horrible hack to allow devfsd, which calls
 	   modprobe with -C /etc/modules.conf, to work.  FIXME. */
-	if (config && strcmp(config, "/etc/modules.conf") == 0
+	if (config && strcmp(config, "/etc/modules.devfs") == 0
 	    && !dump_only && strncmp(argv[optind], "/dev/", 5) == 0)
-		config = NULL;
+		config = "/etc/modprobe.devfs";
 
 	/* -r only allows certain restricted options */
 	if (remove) {
