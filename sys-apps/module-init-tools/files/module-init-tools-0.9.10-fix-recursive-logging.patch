--- module-init-tools-0.9.10/modprobe.c.orig	2003-03-09 11:46:19.000000000 +0200
+++ module-init-tools-0.9.10/modprobe.c	2003-03-09 11:50:23.000000000 +0200
@@ -1135,6 +1135,7 @@
 			fail_if_missing = 0;
 			break;
 		case 's':
+			setenv("MODPROBE_LOG", "1", 1);
 			log = 1;
 			break;
 		case 'i':
@@ -1162,6 +1163,11 @@
 			fail_if_missing = 0;
 		}
 
+	/* Check MODPROBE_LOG */
+	if (getenv("MODPROBE_LOG"))
+		if (0 == strcmp(getenv("MODPROBE_LOG"), "1"))
+			log = 1;
+
 	/* If stderr not open, go to syslog */
 	if (log || fstat(STDERR_FILENO, &statbuf) != 0) {
 		openlog("modprobe", LOG_CONS, LOG_DAEMON);
