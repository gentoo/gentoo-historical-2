diff -uNr lilo-21.7.4/geometry.c lilo-21.7.4.patched/geometry.c
--- lilo-21.7.4/geometry.c	Mon Apr 30 01:55:01 2001
+++ lilo-21.7.4.patched/geometry.c	Mon Apr 30 01:59:15 2001
@@ -14,10 +14,21 @@
 #define	_I386_STATFS_H	/* two versions of statfs is not good ... */
 #endif
 
-#include <linux/fs.h>
-#include <linux/hdreg.h>
-#include <linux/fd.h>
 #include <string.h>
+#include <linux/kdev_t.h>	/* for major and minor macros */
+#ifndef BMAP_IOCTL
+#define BMAP_IOCTL 1		/* obsolete - kept for compatibility */
+#endif
+#ifndef FIBMAP
+#define FIBMAP     _IO(0x00,1)  /* bmap access */
+#endif
+#ifndef FIGETBSZ
+#define FIGETBSZ   _IO(0x00,2)
+#endif
+
+#include <sys/statfs.h>
+#include <linux/fd.h>		/* for fdgetprm */
+#include <linux/hdreg.h>	/* for hdio_getgeo */
 
 #include "config.h"
 #include "lilo.h"
diff -uNr lilo-21.7.5.orig/partition.c lilo-21.7.5/partition.c
--- lilo-21.7.5.orig/partition.c	Tue Apr 10 19:48:57 2001
+++ lilo-21.7.5/partition.c	Sat Feb  2 18:52:14 2002
@@ -17,8 +17,15 @@
 #include <limits.h>
 #include <errno.h>
 #include <sys/stat.h>
-#include <linux/fs.h>
 #include <string.h>
+
+#if 0
+#define _LINUX_STRING_H_
+#include <linux/fs.h>
+#else
+#include <linux/kdev_t.h>
+#endif
+
 #include "config.h"
 #include "lilo.h"
 #include "common.h"
@@ -28,9 +35,9 @@
 #include "partition.h"
 #include "boot.h"
 
-
 /* For older kernels ... */
- 
+/* hrmph... Gentoo is 2.4 kernel based anyway... */
+/*
 #ifndef DOS_EXTENDED_PARTITION
 #define DOS_EXTENDED_PARTITION EXTENDED_PARTITION
 #endif
@@ -38,7 +45,7 @@
 #ifndef LINUX_EXTENDED_PARTITION
 #define LINUX_EXTENDED_PARTITION EXTENDED_PARTITION
 #endif
-
+*/
 
 void part_verify(int dev_nr,int type)
 {
