--- shadow-4.0.3/src/su.c.orig	2003-02-24 02:38:10.000000000 +0200
+++ shadow-4.0.3/src/su.c	2003-02-24 02:40:41.000000000 +0200
@@ -759,9 +759,15 @@
 
 		argv[-1] = pwent.pw_shell;
 #ifndef USE_PAM
-		(void) execv (pwent.pw_shell, &argv[-1]);
+		if (fakelogin)
+			(void) execv (pwent.pw_shell, &argv[-1]);
+		else
+			(void) execv ("/bin/sh", &argv[-1]);
 #else
-		run_shell (pwent.pw_shell, &argv[-1], 0);
+		if (fakelogin)
+			run_shell (pwent.pw_shell, &argv[-1], 0);
+		else
+			run_shell ("/bin/sh", &argv[-1], 0);
 #endif
 		(void) fprintf (stderr, _("No shell\n"));
 		SYSLOG ((LOG_WARN, "Cannot execute %s", pwent.pw_shell));
@@ -770,9 +776,15 @@
 	}
 
 #ifndef USE_PAM
-	shell (pwent.pw_shell, cp);
+	if (fakelogin)
+		shell (pwent.pw_shell, cp);
+	else
+		shell ("/bin/sh", cp);
 #else
-	run_shell (pwent.pw_shell, &cp, 1);
+	if (fakelogin)
+		run_shell (pwent.pw_shell, &cp, 1);
+	else
+		run_shell ("/bin/sh", &cp, 1);
 #endif
 	 /*NOTREACHED*/ exit (1);
 }
