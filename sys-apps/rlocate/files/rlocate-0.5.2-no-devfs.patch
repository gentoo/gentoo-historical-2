--- src/rlocate-module/rlocate.c
+++ src/rlocate-module/rlocate.c
@@ -42,7 +42,6 @@
 #include <linux/rwsem.h>
 #include <linux/spinlock.h>
 #include <linux/device.h>
-#include <linux/devfs_fs_kernel.h>
 #include <linux/namei.h>
 #include <linux/jiffies.h>
 
@@ -673,8 +672,6 @@
         }
         class_device_create(rlocate_class, NULL, MKDEV(Major, 0), NULL, 
                                 DEVICE_NAME);
-        // devfs
-        devfs_mk_cdev(MKDEV(Major, 0), S_IFCHR|S_IRUSR|S_IWUSR, DEVICE_NAME);
         goto out;
 
 no_simple_class:
@@ -688,7 +685,6 @@
  */
 void rlocate_dev_unregister(void)
 {
-        devfs_remove(DEVICE_NAME);
         class_device_destroy(rlocate_class, MKDEV(Major, 0));
         class_destroy(rlocate_class);
         unregister_chrdev(Major, DEVICE_NAME);
