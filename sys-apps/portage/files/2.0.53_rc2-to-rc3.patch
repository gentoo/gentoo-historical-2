diff -uNr portage-2.0.53_rc2/bin/emerge portage-2.0.53_rc3/bin/emerge
--- portage-2.0.53_rc2/bin/emerge	2005-10-02 13:21:56.000000000 +0900
+++ portage-2.0.53_rc3/bin/emerge	2005-10-02 23:50:57.000000000 +0900
@@ -1489,7 +1489,7 @@
 			else:
 				if (x[0]!="binary") and ("fetch" in string.split(portage.portdb.aux_get(x[2],["RESTRICT"])[0])):
 					fetch = red("F")
-					if portage.portdb.fetch_check(x[2], portage.settings):
+					if portage.portdb.fetch_check(x[2], self.applied_useflags[x[2]]):
 						fetch = green("f")
 
 				#we need to use "--emptrytree" testing here rather than "empty" param testing because "empty"
diff -uNr portage-2.0.53_rc2/pym/portage.py portage-2.0.53_rc3/pym/portage.py
--- portage-2.0.53_rc2/pym/portage.py	2005-10-02 13:32:43.000000000 +0900
+++ portage-2.0.53_rc3/pym/portage.py	2005-10-02 23:52:46.000000000 +0900
@@ -4,7 +4,7 @@
 # $Id: /var/cvsroot/gentoo-src/portage/pym/portage.py,v 1.524.2.76 2005/05/29 12:40:08 jstubbs Exp $
 
 
-VERSION="2.0.53_rc2"
+VERSION="2.0.53_rc3"
 
 # ===========================================================================
 # START OF IMPORTS -- START OF IMPORTS -- START OF IMPORTS -- START OF IMPORT
@@ -2759,7 +2759,7 @@
 			print "!!! mydo=qmerge, but install phase hasn't been ran"
 			sys.exit(1)
 		#qmerge is specifically not supposed to do a runtime dep check
-		return merge(mysettings["CATEGORY"],mysettings["PF"],mysettings["D"],mysettings["BUILDDIR"]+"/build-info",myroot,mysettings)
+		return merge(mysettings["CATEGORY"],mysettings["PF"],mysettings["D"],mysettings["BUILDDIR"]+"/build-info",myroot,mysettings,myebuild=mysettings["EBUILD"])
 	elif mydo=="merge":
 		retval=spawnebuild("install",actionmap,mysettings,debug,alwaysdep=1,logfile=logfile)
 		if retval:
@@ -5367,7 +5367,7 @@
 
 			if metadata["EAPI"] != portage_const.EAPI:
 				# intentionally wipe keys.
-				map(lambda x: metadata.setdefault("x", ''), auxdbkeys)
+				map(lambda x: metadata.setdefault(x, ''), auxdbkeys)
 				metadata["EAPI"] == -1
 
 			else:
