Index: repoman
===================================================================
RCS file: /home/cvsroot/gentoo-src/portage/bin/repoman,v
retrieving revision 1.17
retrieving revision 1.19
diff -u -r1.17 -r1.19
--- repoman	28 Mar 2003 05:15:16 -0000	1.17
+++ repoman	28 Mar 2003 17:13:34 -0000	1.19
@@ -1,7 +1,7 @@
 #!/usr/bin/python2.2
 # Copyright 1999-2003 Gentoo Technologies, Inc.
 # Distributed under the terms of the GNU General Public License v2
-# $Header: /var/cvsroot/gentoo-x86/sys-apps/portage/files/repoman-headers.diff,v 1.1 2003/03/29 18:01:27 carpaski Exp $
+# $Header: /var/cvsroot/gentoo-x86/sys-apps/portage/files/repoman-headers.diff,v 1.1 2003/03/29 18:01:27 carpaski Exp $
 
 # Next to do: dep syntax checking in mask files
 # Then, check to make sure deps are satisfiable (to avoid "can't find match for" problems)
@@ -624,7 +624,8 @@
 					myout=[0]
 					mysplit=[0,string.split(string.split(mysplit[0],"\t")[1]," ")[1]]
 				else:
-					myout=getstatusoutput("egrep -q '\$Header: /var/cvsroot/gentoo-x86/sys-apps/portage/files/repoman-headers.diff,v 1.1 2003/03/29 18:01:27 carpaski Exp $|\$Id: repoman-headers.diff,v 1.1 2003/03/29 18:01:27 carpaski Exp $' "+mysplit[1])
+					headerstart="'\$Header: .*"
+					myout=getstatusoutput("egrep -q "+headerstart+"\$' "+mysplit[1])
 				if myout[0]==0:
 					myheaders.append(mysplit[1])
 				myupdates.append(mysplit[1])
