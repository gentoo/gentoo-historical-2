#!/usr/bin/spython

import portage
import sys
import os
"""
ALMOST done, but not quite.
def pkgmerge_recurse(mypkg):
	if not os.path.exists(mypkg):
	print "!!! Error:",mypkg,"not found."
	mydeps=portage.pkgmerge(mypkg)
	if not mydeps:
		return
	mycheck=portage.roottree.depcheck(mydeps)
	if mycheck[0]==0:
		print "!!! Error: RDEPEND string formatted incorrectly:",mydeps
	if mycheck[1]==None:
		#no deps, package installed
		return
	#we have deps
	for mydep in mycheck[1]:
		matches=portage.bintree.dep_match(mydep)
		if len(matches)==0:
			#some way to abort this package merge process is needed, like a boolean return value
			print "!!! Error: can't find a package that satisfies this dependency:",mydep
			return
		elif len(matches)==1:
			#single match, install it (call pkgmerge_recurse again)
		else:
			#multiple matches, prompt user, then call pkgmerge_recurse again
"""
for x in sys.argv[1:]:
	x=os.path.abspath(x)

	if not os.path.exists(x):
		print "!!! Error:",x,"not found."
		continue
	print portage.pkgmerge(x)

