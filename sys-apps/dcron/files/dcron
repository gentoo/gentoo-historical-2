#!/bin/sh
#RCUPDATE:2 3 4:80:This line is required for script management

. /etc/rc.d/config/basic
. /etc/rc.d/config/functions

SERVICE=dcron
EXE="/usr/sbin/crond"
SVCDIR=/etc/supervise/dcron
opts="start stop"

start() {
		ebegin "Starting ${SERVICE}"
		start-stop-daemon --start --quiet --exec $EXE 1>&2
		eend $? "Error starting ${SERVICE}."
}

stop() {
		ebegin "Stopping ${SERVICE}"
		start-stop-daemon --stop --quiet -u root -n $SERVICE 1>&2
		eend $? "Error stopping ${SERVICE}."
}

supervise_start() {
		ebegin "Starting supervised ${SERVICE}"
		/usr/bin/svc -u ${SVCDIR} 
		/usr/bin/svc -u ${SVCDIR}/log
		eend $? "Error starting ${SERVICE} supervised."
}

supervise_stop() {
		ebegin "Stopping supervised ${SERVICE}"
		/usr/bin/svc -d ${SVCDIR}
		/usr/bin/svc -d ${SVCDIR}/log
		eend $? "Error stopping ${SERVICE} supervised"
}

doservice ${@}

