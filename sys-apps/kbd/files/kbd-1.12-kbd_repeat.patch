--- kbd-1.12/src/kbdrate.c	Fri Jan 16 20:45:31 2004
+++ kbd-1.12.kbdrate/src/kbdrate.c	Sun Feb  8 14:52:04 2004
@@ -84,11 +84,13 @@
 /* usually defined in <linux/kd.h> */
 #define KDKBDREP        0x4B52  /* set keyboard delay/repeat rate;
 				 * actually used values are returned */
-struct kbd_repeat {
+#endif
+
+/* Equal to kernel version, but field names vary. */
+struct my_kbd_repeat {
         int delay;        /* in msec; <= 0: don't change */
         int period;       /* in msec; <= 0: don't change */
 };
-#endif
 
 #include "nls.h"
 #include "version.h"
@@ -104,9 +106,12 @@
 
 static int
 KDKBDREP_ioctl_ok(double rate, int delay, int silent) {
-	/* This ioctl is defined in <linux/kd.h> but is not
-	   implemented anywhere - must be in some m68k patches. */
-	struct kbd_repeat kbdrep_s;
+	/*
+	 * This ioctl is defined in <linux/kd.h> but is not
+	 * implemented anywhere - must be in some m68k patches.
+	 * Since 2.4.9 also on i386.
+	 */
+	struct my_kbd_repeat kbdrep_s;
 
 	/* don't change, just test */
 	kbdrep_s.period = -1;
