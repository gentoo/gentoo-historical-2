Index: etc/fstab
===================================================================
--- etc/fstab	(revision 2558)
+++ etc/fstab	(working copy)
@@ -17,7 +17,7 @@
 /dev/BOOT		/boot		ext2		noauto,noatime	1 2
 /dev/ROOT		/		ext3		noatime		0 1
 /dev/SWAP		none		swap		sw		0 0
-/dev/cdrom		/mnt/cdrom	audo		noauto,ro	0 0
+/dev/cdrom		/mnt/cdrom	auto		noauto,ro	0 0
 #/dev/fd0		/mnt/floppy	auto		noauto		0 0
 
 # glibc 2.2 and above expects tmpfs to be mounted at /dev/shm for 
Index: lib/rcscripts/net/system.sh
===================================================================
--- lib/rcscripts/net/system.sh	(revision 2558)
+++ lib/rcscripts/net/system.sh	(working copy)
@@ -19,7 +19,7 @@
 }
 
 system_dns() {
-	local iface="$1" ifvar=$(bash_variable "$1") x= domain= search=
+	local iface="$1" ifvar=$(bash_variable "$1") x= domain= search= sortlist= options=
 	local buffer=
 	local -a servers=()
 
@@ -31,8 +31,14 @@
 
 	search="dns_search_${ifvar}"
 	[[ -z ${!search} ]] && search="dns_search"
-	
-	[[ -z ${!servers} && -z ${!domain} && -z ${!search} ]] && return 0
+
+	sortlist="dns_sortlist_${ifvar}"
+	[[ -z ${!sortlist} ]] && sortlist="dns_sortlist"
+
+	options="dns_options_${ifvar}"
+	[[ -z ${!options} ]] && options="dns_options"
+
+	[[ -z ${!servers} && -z ${!domain} && -z ${!search} && -z ${!sortlist} && -z ${!options} ]] && return 0
 
 	buffer="# Generated by net-scripts for interface ${iface}\n"
 	[[ -n ${!domain} ]] && buffer="${buffer}domain ${!domain}\n"
@@ -42,6 +48,9 @@
 		buffer="${buffer}nameserver ${x}\n"
 	done
 
+	[[ -n ${!sortlist} ]] && buffer="${buffer}sortlist ${!sortlist}\n"
+	[[ -n ${!options} ]] && buffer="${buffer}options ${!options}\n"
+
 	# Support resolvconf if we have it.
 	if [[ -x /sbin/resolvconf ]] ; then
 		echo -e "${buffer}" | resolvconf -a "${iface}"
Index: lib/rcscripts/net/ip6to4.sh
===================================================================
--- lib/rcscripts/net/ip6to4.sh	(revision 2558)
+++ lib/rcscripts/net/ip6to4.sh	(working copy)
@@ -25,7 +25,7 @@
 # addresses on a pre-configured interface.
 # Returns 0 on success, otherwise 1.
 ip6to4_start() {
-	local iface="$1" addr=""
+	local iface="$1" addr="" localip=""
 	local ifvar=$(bash_variable "${iface}")
 
 	# Ensure the interface is sit0 if we're using ifconfig
@@ -71,6 +71,12 @@
 
 		# Now apply our IPv6 address to our config
 		new=( "${new[@]}" "${ip6}/16" )
+
+		if [[ -n ${localip} ]] ; then
+			localip="any"
+		else
+			localip="${ip}"
+		fi
 	done	
 
 	if [[ -z ${new} ]] ; then
@@ -80,7 +86,7 @@
 
 	if [[ ${iface} != "sit0" ]] ; then
 		ebegin "Creating 6to4 tunnel on ${iface}"
-		interface_tunnel add "${iface}" mode sit ttl 255 remote any local "${ip}"
+		interface_tunnel add "${iface}" mode sit ttl 255 remote any local "${localip}"
 		eend $? || return 1
 	fi
 	
Index: lib/rcscripts/net/iwconfig.sh
===================================================================
--- lib/rcscripts/net/iwconfig.sh	(revision 2558)
+++ lib/rcscripts/net/iwconfig.sh	(working copy)
@@ -232,7 +232,7 @@
 	fi
 
 	# Then set the ESSID
-	if ! eval iwconfig "${iface}" essid "${ESSID}" ; then
+	if ! iwconfig "${iface}" essid "${ESSID}" ; then
 		eerror "${iface} does not support setting ESSID to \"${dessid}\""
 		return 1
 	fi
@@ -378,7 +378,7 @@
 		[[ ${key} != "off" ]] && w=$(iwconfig_get_wep_status "${iface}")
 	fi
 
-	if ! eval iwconfig "${iface}" essid "${ESSID}" ; then
+	if ! iwconfig "${iface}" essid "${ESSID}" ; then
 		if [[ ${ESSID} != "any" ]]; then
 			ewarn "${iface} does not support setting ESSID to \"${dessid}\""
 		fi
--- /var/tmp/portage/sys-apps/baselayout-1.12.10-r4/work/baselayout-1.12.10/lib/rcscripts/net/system.sh	2007-01-03 10:43:37 +0000
+++ /local/baselayout/branches/baselayout-1_12/net-scripts/net/system.sh	2007-05-03 12:19:48 +0100
