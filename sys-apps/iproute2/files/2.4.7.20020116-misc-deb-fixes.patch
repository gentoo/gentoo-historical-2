--- iproute-20010824.orig/tc/tc_qdisc.c
+++ iproute-20010824/tc/tc_qdisc.c
@@ -245,7 +245,7 @@
 	fprintf(fp, "\n");
 	if (show_stats) {
 		if (tb[TCA_STATS]) {
-			if (RTA_PAYLOAD(tb[TCA_STATS]) < sizeof(struct tc_stats))
+			if (RTA_PAYLOAD(tb[TCA_STATS]) < offsetof(struct tc_stats,backlog)+sizeof(((struct tc_stats*)0)->backlog))
 				fprintf(fp, "statistics truncated");
 			else {
 				struct tc_stats st;
--- iproute-20010824.orig/Makefile
+++ iproute-20010824/Makefile
@@ -35,7 +35,7 @@
 
 CC = gcc
 CCOPTS = -D_GNU_SOURCE -O2 -Wstrict-prototypes -Wall -g
-CFLAGS = $(CCOPTS) $(GLIBCFIX) -I$(KERNEL_INCLUDE) -I../include $(DEFINES)
+CFLAGS = $(CCOPTS) -I../include $(GLIBCFIX) -I$(KERNEL_INCLUDE) $(DEFINES)
 
 LDLIBS += -L../lib -lnetlink -lutil
 
--- iproute-20010824.orig/include-glibc/glibc-bugs.h
+++ iproute-20010824/include-glibc/glibc-bugs.h
@@ -12,9 +12,6 @@
 
 #include <linux/types.h>
 
-typedef __u16 in_port_t;
-typedef __u32 in_addr_t;
-
 #endif
 
 #endif
