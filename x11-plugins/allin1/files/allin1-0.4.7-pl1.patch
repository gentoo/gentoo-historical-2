Index: allin1/src/battery.c
diff -c allin1/src/battery.c:1.4 allin1/src/battery.c:1.5
*** allin1/src/battery.c:1.4	Sun Mar 14 14:08:48 2004
--- allin1/src/battery.c	Wed Jun 23 01:15:26 2004
***************
*** 45,51 ****
    
    int i;
    FILE *f;
!   char s[255];
  
    bm->ac_line_status = 1;
    bm->battery_status = 0xff;
--- 45,51 ----
    
    int i;
    FILE *f;
!   char s[255],*p;
  
    bm->ac_line_status = 1;
    bm->battery_status = 0xff;
***************
*** 58,64 ****
    while (!feof (f)) 
    {
      fgets (s, 254, f);
!     sscanf (s, "%d.%d %d.%d %x %x %x %x %d",&i,&i,&i,&i,&i,
  	&(bm->ac_line_status),&(bm->battery_status),&i,&(bm->battery_percentage));
    }
    fclose(f);
--- 58,65 ----
    while (!feof (f)) 
    {
      fgets (s, 254, f);
!     p = strchr(s,' ');
!     sscanf (p, "%d.%d %x %x %x %x %d",&i,&i,&i,
  	&(bm->ac_line_status),&(bm->battery_status),&i,&(bm->battery_percentage));
    }
    fclose(f);
