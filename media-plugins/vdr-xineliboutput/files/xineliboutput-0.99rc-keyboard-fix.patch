--- xineliboutput-0.99rc/xine_frontend_main.c	2006-04-08 23:42:13.000000000 +0300
+++ xineliboutput/xine_frontend_main.c	2006-05-14 07:46:01.000000000 +0300
@@ -1,6 +1,10 @@
 /*
  * Simple main() routine for stand-alone frontends.
  *
+ * See the main source file 'xineliboutput.c' for copyright information and
+ * how to reach the author.
+ *
+ * $Id: xineliboutput-0.99rc-keyboard-fix.patch,v 1.1 2006/05/14 18:36:32 zzam Exp $
  *
  */
 
@@ -68,7 +72,7 @@
 	  uint64_t code = ch;
 	  char str[64];
 	  while(poll(&pfd,1,0) == 1 && read(STDIN_FILENO,&ch,1) == 1)
-	    code = (code<<8) & ch;
+	    code = (code<<8) | (ch & 0xff);
 	  snprintf(str, sizeof(str), "%016LX", code);
 	  if(find_input((fe_t*)fe))
 	    process_xine_keypress(((fe_t*)fe)->input, "KBD", str, 0, 0);
