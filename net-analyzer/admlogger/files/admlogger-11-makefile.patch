--- Makefile.old	2005-09-15 16:54:47.000000000 +0900
+++ Makefile	2005-09-15 16:58:41.000000000 +0900
@@ -53,20 +53,20 @@
 	test -e logger_v.pc || cp logger.pc logger_v.pc
 	./pconfig.pl logger.pc
 	echo 'Making /var/adm/logger and subdirectories...'
-	test -d /var/adm/logger/doc || $(INSTALL) -d /var/adm/logger/doc
-	test -d /var/adm/logger/handlers || $(INSTALL) -d /var/adm/logger/handlers
-	test -d /var/adm/logger/plugins || $(INSTALL) -d /var/adm/logger/plugins
+	$(INSTALL) -d ${DESTDIR}/var/adm/logger/doc
+	$(INSTALL) -d ${DESTDIR}/var/adm/logger/handlers
+	$(INSTALL) -d ${DESTDIR}/var/adm/logger/plugins
 	echo 'Copying files...'
-	$(INSTALL_OP) logger.pl /var/adm/logger/
-	chmod u+x /var/adm/logger/logger.pl
-	cd doc ; $(INSTALL_OP) README.ADMLogger LICENSE /var/adm/logger/doc/
-	cd handlers ; $(INSTALL_OP) ADMLogHandler.* ADMMailHandler.* ADMNetHandler.* /var/adm/logger/handlers/
+	$(INSTALL_OP) logger.pl ${DESTDIR}/var/adm/logger/
+	chmod u+x ${DESTDIR}/var/adm/logger/logger.pl
+	cd doc ; $(INSTALL_OP) README.ADMLogger LICENSE ${DESTDIR}/var/adm/logger/doc/
+	cd handlers ; $(INSTALL_OP) ADMLogHandler.* ADMMailHandler.* ADMNetHandler.* ${DESTDIR}/var/adm/logger/handlers/
 	echo 'Automated installation complete... be sure to check README.ADMLogger for more instructions!'
 
 fireparse:
 	# If you are writing your own plugin, I suggest cut and paste from this IF YOU USE PCONFIG.
 	echo -n Checking if admlogger is installed...
-	test -x /var/adm/logger/logger.pl || exit 1
+	test -x ${DESTDIR}/var/adm/logger/logger.pl || exit 1
 	echo ' success!'
 	echo -n 'Checking for source file fireparse.pc (if it does not exist, try "make clean")...'
 	test -e ./plugins/fireparse.pc || exit 2
@@ -75,23 +75,23 @@
 	cd plugins ; ../pconfig.pl fireparse.pc
 	echo 'Copying files...'
 	# Don't overwrite /etc/services.fake if it exists! (Previous fireparse users)
-	test -e /etc/services.fake || $(INSTALL_OP) services.fake /var/adm/logger/
-	cd doc ; $(INSTALL_OP) README.$@ /var/adm/logger/doc/
-	cd plugins ; $(INSTALL_OP) $@.pm /var/adm/logger/plugins/
+	$(INSTALL_OP) services.fake ${DESTDIR}/var/adm/logger/
+	cd doc ; $(INSTALL_OP) README.$@ ${DESTDIR}/var/adm/logger/doc/
+	cd plugins ; $(INSTALL_OP) $@.pm ${DESTDIR}/var/adm/logger/plugins/
 	echo 'Automated installation complete... be sure to check README.fireparse for more instructions!'
 
 dhcpd pam_unix pureftp zcleanup:
 	# If you are writing your own plugin, I suggest cut and paste from this IF YOU DO NOT USE PCONFIG.
 	echo -n Checking if admlogger is installed...
-	test -x /var/adm/logger/logger.pl || exit 1
+	test -x ${DESTDIR}/var/adm/logger/logger.pl || exit 1
 	echo ' success!'
 	echo -n 'Checking for source file...'
 	test -e ./plugins/$@.pm || exit 2
 	echo ' success!'
 	echo 'Copying files...'
-	cd doc ; $(INSTALL_OP) README.$@ /var/adm/logger/doc/
-	cd plugins ; $(INSTALL_OP) $@.pm /var/adm/logger/plugins/
+	cd doc ; $(INSTALL_OP) README.$@ ${DESTDIR}/var/adm/logger/doc/
+	cd plugins ; $(INSTALL_OP) $@.pm ${DESTDIR}/var/adm/logger/plugins/
 	echo Automated installation complete... be sure to check README.$@ for more instructions.
 
 logrotate:
-	$(INSTALL) -v admlogger.rotate /etc/logrotate.d/
+	$(INSTALL) -v admlogger.rotate ${DESTDIR}/etc/logrotate.d/
