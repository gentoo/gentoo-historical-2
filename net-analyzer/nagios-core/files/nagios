#!/sbin/runscript
# Copyright 1999-2004 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: /var/cvsroot/gentoo-x86/net-analyzer/nagios-core/files/nagios,v 1.5 2004/07/14 23:04:37 agriffis Exp $

depend() {
	need net
	use dns logger
}

start() {
	ebegin "Starting nagios"
	touch /var/nagios/nagios.log /var/nagios/status.sav
	chown nagios:nagios /var/nagios/nagios.log /var/nagios/status.sav
	rm -f /var/nagios/rw/nagios.cmd
	start-stop-daemon -o --quiet --start --startas /usr/nagios/bin/nagios \
		--pidfile /var/nagios/nagios.lock -- -d /etc/nagios/nagios.cfg
	eend $?
}

stop() {
	ebegin "Stopping nagios"
	start-stop-daemon -o --quiet --stop --pidfile /var/nagios/nagios.lock
	rm -f /var/nagios/status.log /var/nagios/nagios.tmp /var/nagios/nagios.lock /var/nagios/rw/nagios.cmd
	eend $?
}

svc_restart() {
	ebegin "Restarting nagios"
	svc_stop
	svc_start
	eend $?
}
