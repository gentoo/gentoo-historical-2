--- gwenhywfar-3.8.1/configure.ac	2009-05-09 18:08:48.000000000 +0200
+++ gwenhywfar-3.8.1-1/configure.ac	2009-05-12 10:33:00.000000000 +0200
@@ -844,11 +844,11 @@
 if test "$enable_visibility" = "yes"; then
   AC_MSG_CHECKING(if symbol visibility is supported)
   visibility_cflags=""
-  case `basename $CC` in 
+  case `$CC --version|head -n1|cut -f1 -d " "` in 
     gcc*)
        dnl Determine version number (watch out: the outside square
        dnl parenteses are vitally important here!)
-       gccversion=["` ${CC} --version | head -1 | ${SED} 's/.*\([0-9]\.[0-9]\.[0-9]*\).*/\1/' `"]
+       gccversion=["` ${CC} -dumpversion `"]
        case $gccversion in
          4.*)
            # Activate -fvisibility=hidden only for explicit 4.x gcc
