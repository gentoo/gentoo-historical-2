--- procmime.c.orig	2003-01-10 01:21:35.000000000 +0100
+++ procmime.c	2003-01-10 02:19:06.000000000 +0100
@@ -1187,7 +1187,7 @@
 
 	if (mime_type_list) 
 		return mime_type_list;
-
+	if ((fp = fopen("/usr/share/mime/globs", "rb")) == NULL) 
 	if ((fp = fopen("/etc/mime.types", "rb")) == NULL) {
 		if ((fp = fopen(SYSCONFDIR "/mime.types", "rb")) == NULL) {
 			FILE_OP_ERROR(SYSCONFDIR "/mime.types", "fopen");
@@ -1201,11 +1201,12 @@
 		g_strstrip(buf);
 
 		p = buf;
-		while (*p && !isspace(*p)) p++;
+		while (*p && !isspace(*p)&& (*p!=':')) p++;
 		if (*p) {
 			*p = '\0';
 			p++;
 		}
+		g_print("%s ",buf);
 		delim = strchr(buf, '/');
 		if (delim == NULL) continue;
 		*delim = '\0';
@@ -1214,7 +1215,8 @@
 		mime_type->type = g_strdup(buf);
 		mime_type->sub_type = g_strdup(delim + 1);
 
-		while (*p && isspace(*p)) p++;
+		while (*p && (isspace(*p)||(*p=='*')||(*p=='.'))) p++;
+		g_print("%s\n",p);
 		if (*p)
 			mime_type->extension = g_strdup(p);
 		else
