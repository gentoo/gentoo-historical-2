--- amavisd	2004-03-08 18:21:43.000000000 -0800
+++ amavisd	2004-04-08 11:25:37.000000000 -0700
@@ -6985,7 +6985,9 @@
 	my($err) = $@;
 	do_log(0, "lookup_sql: $DBI::err, $DBI::errstr");
 	if ($sth && ($sth->err eq '2006' ||        # MySQL server has gone away
-		     $sth->errstr =~ /\bserver has gone away\b/)) {
+		     $sth->errstr =~ /\bserver has gone away\b/ ||
+		     $sth->err eq '2013' ||
+		     $sth->errstr =~ /\bLost connection to\b/)) {
 	    do_log(0,"NOTICE: Disconnected from SQL server");
 	    $sql_connected = 0;  $self->{dbh}->disconnect;
 	}
