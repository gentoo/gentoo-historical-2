--- makefile.orig	2003-08-12 23:21:29.000000000 -0400
+++ makefile	2003-08-12 23:22:30.000000000 -0400
@@ -310,13 +310,13 @@
 ifdef LINUX
 
 	# subdirectory for objects
-	O=../objs
-	BIN=../bin
+	O=objs
+	BIN=bin
 	MUSSERV=linux_x/musserv
 	SNDSERV=linux_x/sndserv
 
 	#use the x86 asm code
-	USEASM=1
+	#USEASM=1
 
 	OPTS=-DLINUX -DOLD_SOUND_DRIVER -DMUSSERV -DSNDSERV -DHWRENDER -DDIRECTFULLSCREEN
 	X=1
@@ -360,7 +360,7 @@
 	SNDSERV=linux_x/sndserv
 
 	#use the x86 asm code
-	USEASM=1
+	#USEASM=1
 ifndef FBSD_SDL
 	OPTS=-DLINUX -DFREEBSD -DOLD_SOUND_DRIVER -DSNDSERV -DHWRENDER -DDIRECTFULLSCREEN
 ifndef FBSD_GGI
@@ -444,7 +444,7 @@
 
 	#use the x86 asm code
 	NASM=nasm
-	USEASM=1
+	#USEASM=1
 	PROFILEMODE=1
 	# options
 	OPTS=-Zmt -D__OS2__ -I.. -I. -Ios2
@@ -473,7 +473,7 @@
 	ifdef PGCC
 		CFLAGS = -g -pg -DPARANOIA -fwritable-strings $(OPTS)
 	else
-		CFLAGS = -g -pg -m486 -O3 -ffast-math -fwritable-strings $(OPTS)
+		CFLAGS = -g -pg $(EXTRAOPTS) $(OPTS)
 	endif
 	LDFLAGS = -g -pg -L/usr/X11R6/lib
 else
@@ -481,13 +481,13 @@
 
 	# build a normal optimised version
 	ifdef PGCC
-		CFLAGS = $(OPTS) -mpentium -O6 -ffast-math -fomit-frame-pointer -fwritable-strings
+		CFLAGS = $(OPTS) $(EXTRAOPTS)
 		# -fgcse -fcse-follow-jumps -fcse-skip-blocks -frerun-cse-after-loop -ffunction-cse \
 		# -fexpensive-optimizations -fforce-mem -fstrength-reduce -fthread-jumps  \
 		# -fregmove -fschedule-insns -fschedule-insns2 -fmove-all-movables \
 		# -fcaller-saves -finline-functions -mieee-fp -mfp-ret-in-387 -m80387 -mhard-float -finline
 	else
-		CFLAGS = -m486 -O3 -ffast-math -fomit-frame-pointer -fwritable-strings $(OPTS)
+		CFLAGS = $(EXTRAOPTS) $(OPTS)
 	endif
 endif
 
@@ -644,7 +644,7 @@
 
 #dll
 dll : $(O)/r_opengl.o $(O)/ogl_x11.o
-	$(CC) -mpentium -O6 -o $(BIN)/r_opengl.so -shared -nostartfiles $(O)/r_opengl.o $(O)/ogl_x11.o -L/usr/X11R6/lib -L/usr/local/lib -lX11 -lXext -lGL -lGLU -lm
+	$(CC) $(CFLAGS) -o $(BIN)/r_opengl.so -shared -nostartfiles $(O)/r_opengl.o $(O)/ogl_x11.o -L/usr/X11R6/lib -L/usr/local/lib -lX11 -lXext -lGL -lGLU -lm
 
 musserv:
 	@mkdir -p $(MUSSERV)/linux
@@ -658,7 +658,7 @@
 
 ifdef LINUX
 $(O)/r_opengl.o:	hardware/r_opengl/r_opengl.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
+	$(CC) $(CFLAGS) -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
 endif
 
 ifdef SDL
@@ -672,16 +672,16 @@
 	$(CC) $(CFLAGS) $(LDFLAGS) $(WFLAGS) -I/usr/X11R6/include -c $< -o $@
 else  #FBSD_SDL
 $(O)/r_opengl.o:	hardware/r_opengl/r_opengl.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX -DFREEBSD $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
+	$(CC) $(CFLAGS) -o $(O)/r_opengl.o	-DHWRENDER -DVID_X11 -DLINUX -DFREEBSD $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/r_opengl.c
 endif #FBSD_SDL
 endif #FREEBSD
 
 ifndef FREEBSD
 $(O)/ogl_x11.o:  hardware/r_opengl/ogl_x11.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
+	$(CC) $(CFLAGS) -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
 else
 $(O)/ogl_x11.o:  hardware/r_opengl/ogl_x11.c hardware/r_opengl/r_opengl.h
-	$(CC) -mpentium -O6 -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX -DFREEBSD $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
+	$(CC) $(CFLAGS) -o $(O)/ogl_x11.o -DHWRENDER -DVID_X11 -DLINUX -DFREEBSD $(POLL_POINTER) -shared -nostartfiles -I/usr/X11R6/include -c hardware/r_opengl/ogl_x11.c
 endif
 
 
--- linux_x/musserv/Makefile.linux.orig	2003-08-12 23:23:27.000000000 -0400
+++ linux_x/musserv/Makefile.linux	2003-08-12 23:23:43.000000000 -0400
@@ -3,7 +3,7 @@
 #
 
 CC	= gcc
-CFLAGS	= -I. -Wall -O2 -m486
+CFLAGS	= -I. -Wall $(EXTRAOPTS)
 LDFLAGS	=
 #LDFLAGS	= -static
 
--- linux_x/sndserv/Makefile.orig	2003-08-12 23:23:52.000000000 -0400
+++ linux_x/sndserv/Makefile	2003-08-12 23:24:05.000000000 -0400
@@ -22,7 +22,7 @@
 #
 
 CC=gcc
-CFLAGS=-O2 -m486 -Wall -DNORMALUNIX -DLINUX
+CFLAGS=-O2 -Wall -DNORMALUNIX -DLINUX
 ifdef FREEBSD
 CFLAGS:=${CFLAGS} -DFREEBSD
 endif
