Index: kdebase-3.5.0/kwin/kompmgr/configure.in.in
===================================================================
--- kdebase-3.5.0/kwin/kompmgr/configure.in.in	(revision 497003)
+++ kdebase-3.5.0/kwin/kompmgr/configure.in.in	(working copy)
@@ -1,5 +1,11 @@
-compile_kompmgr=yes
-KDE_CHECK_HEADERS(X11/extensions/Xdamage.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
-KDE_CHECK_HEADERS(X11/extensions/Xcomposite.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
-KDE_CHECK_HEADERS(X11/extensions/Xrender.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
-AM_CONDITIONAL(include_kompmgr, test "$compile_kompmgr" = "yes" )
+AC_ARG_WITH([composite],
+  AS_HELP_STRING([--without-composite], [Disable Xcomposite support (default: check)]) )
+
+if test "x$with_composite" != "xno"; then
+  KDE_CHECK_HEADERS(X11/extensions/Xdamage.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
+  KDE_CHECK_HEADERS(X11/extensions/Xcomposite.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
+  KDE_CHECK_HEADERS(X11/extensions/Xrender.h,,compile_kompmgr=no,[#include <X11/Xlib.h>])
+else
+  compile_kompmgr=no
+fi
+AM_CONDITIONAL(include_kompmgr, test x"$compile_kompmgr" != x"no" )
