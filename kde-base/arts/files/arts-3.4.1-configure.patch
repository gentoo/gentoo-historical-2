diff -Nur arts-1.4.1.orig/configure.in.in arts-1.4.1/configure.in.in
--- arts-1.4.1.orig/configure.in.in	2005-05-23 13:28:37.000000000 +0200
+++ arts-1.4.1/configure.in.in	2005-06-05 21:54:05.000000000 +0200
@@ -242,7 +242,6 @@
       arts_audiolib_found=yes
       ])
   fi
-  AM_CONDITIONAL(HAVE_WAVSUPPORT,  test "x$arts_audiolib_found" = "xyes")
   AC_SUBST(LIBAUDIOFILE)
   AC_SUBST(LIBAUDIOFILE_LDFLAGS)
   AC_LANG_RESTORE
@@ -491,12 +490,85 @@
 ])
 
 dnl call the tests
-AC_CHECK_LIBAUDIOIO
-AC_CHECK_LIBAUDIONAS
-AC_CHECK_LIBESD
-AC_CHECK_LIBAUDIOFILE
-AC_CHECK_SGILIBAUDIO
-AC_CHECK_LIBMAS
+AC_ARG_WITH(libaudioio,
+  [AS_HELP_STRING(--with-libaudioio,
+    [enable support for libaudioio @<:@default=check@:>@])],
+  [], with_libaudioio=check)
+
+if test "x$with_libaudioio" != xno; then
+  AC_CHECK_LIBAUDIOIO
+
+  if test "x$with_libaudioio" != xcheck && test -z "$LIBAUDIOIO"; then
+    AC_MSG_FAILURE([--with-libaudioio was given, but test for libaudioio failed])
+  fi
+fi
+
+AC_ARG_WITH(nas,
+  [AS_HELP_STRING(--with-nas,
+    [enable support for NAS @<:@default=check@:>@])],
+  [], with_nas=check)
+
+if test "x$with_nas" != xno; then
+  AC_CHECK_LIBAUDIONAS
+
+  if test "x$with_nas" != xcheck && test -z "$LIBAUDIONAS"; then
+    AC_MSG_FAILURE([--with-nas was given, but test for NAS failed])
+  fi
+fi
+
+AC_ARG_WITH(esd,
+  [AS_HELP_STRING(--with-esd,
+    [enable support for EsounD @<:@default=check@:>@])],
+  [], with_esd=check)
+
+if test "x$with_esd" != xno; then
+  AC_CHECK_LIBESD
+
+  if test "x$with_esd" != xcheck && test -z "$LIBESD"; then
+    AC_MSG_FAILURE([--with-esd was given, but test for EsounD failed])
+  fi
+fi
+
+AC_ARG_WITH(audiofile,
+  [AS_HELP_STRING(--with-audiofile,
+    [enable support for audiofile @<:@default=check@:>@])],
+  [], with_audiofile=check)
+
+if test "x$with_audiofile" != xno; then
+  AC_CHECK_LIBAUDIOFILE
+
+  if test "x$with_audiofile" != xcheck && test -z "$LIBAUDIOFILE"; then
+    AC_MSG_FAILURE([--with-audiofile was given, but test for audiofile failed])
+  fi
+fi
+AM_CONDITIONAL(HAVE_WAVSUPPORT, test -n "$LIBAUDIOFILE")
+
+AC_ARG_WITH(sgilibaudio,
+  [AS_HELP_STRING(--with-sgilibaudio,
+    [enable support for SGI libaudio @<:@default=check@:>@])],
+  [], with_sgilibaudio=check)
+
+if test "x$with_sgilibaudio" != xno; then
+  AC_CHECK_SGILIBAUDIO
+
+  if test "x$with_sgilibaudio" != xcheck && test -z "$SGILIBAUDIO"; then
+    AC_MSG_FAILURE([--with-sgilibaudio was given, but test for SGI libaudio failed])
+  fi
+fi
+
+AC_ARG_WITH(mas,
+  [AS_HELP_STRING(--with-mas,
+    [enable support for MAS @<:@default=check@:>@])],
+  [], with_mas=check)
+
+if test "x$with_mas" != xno; then
+  AC_CHECK_LIBMAS
+
+  if test "x$with_mas" != xcheck && test -z "$LIBMAS"; then
+    AC_MSG_FAILURE([--with-mas was given, but test for MAS failed])
+  fi
+fi
+
 AC_CHECK_REALTIME_SCHED
 AC_CHECK_GETDOMAINNAME
 AC_CHECK_IOCTL_TYPE
@@ -704,20 +776,31 @@
 AC_SUBST(GLIB_LIBADD)
 AC_SUBST(GLIB_LDFLAGS)
 
-AC_MSG_CHECKING(for Jack Audio Connection Kit)
-if $PKG_CONFIG --atleast-version 0.90 jack >/dev/null 2>&1 ; then
-  JACK_CFLAGS="`$PKG_CONFIG --cflags jack`"
-  JACK_LIBADD="`$PKG_CONFIG --libs-only-l jack`"
-  JACK_LDFLAGS="`$PKG_CONFIG --libs-only-L jack`"
-  AC_MSG_RESULT(yes)
-  AC_DEFINE(HAVE_LIBJACK, 1,
-        [Define if you have libjack (required if you want Jack support)])
-else
-  AC_MSG_RESULT(not installed)
+AC_ARG_WITH(jack,
+  [AS_HELP_STRING(--with-jack,
+    [enable support for Jack @<:@default=check@:>@])],
+  [], with_jack=check)
+
+if test "x$with_jack" != xno; then
+  AC_MSG_CHECKING(for Jack Audio Connection Kit)
+  if $PKG_CONFIG --atleast-version 0.90 jack >/dev/null 2>&1 ; then
+    JACK_CFLAGS="`$PKG_CONFIG --cflags jack`"
+    JACK_LIBADD="`$PKG_CONFIG --libs-only-l jack`"
+    JACK_LDFLAGS="`$PKG_CONFIG --libs-only-L jack`"
+    AC_MSG_RESULT(yes)
+    AC_DEFINE(HAVE_LIBJACK, 1,
+          [Define if you have libjack (required if you want Jack support)])
+  else
+    AC_MSG_RESULT(not installed)
+  fi
+  AC_SUBST(JACK_CFLAGS)
+  AC_SUBST(JACK_LIBADD)
+  AC_SUBST(JACK_LDFLAGS)
+
+  if test "x$with_jack" != xcheck && test -z "$JACK_LIBADD"; then
+    AC_MSG_FAILURE([--with-jack was given, but test for Jack failed])
+  fi
 fi
-AC_SUBST(JACK_CFLAGS)
-AC_SUBST(JACK_LIBADD)
-AC_SUBST(JACK_LDFLAGS)
 
 dnl OpenBSD requires an -lossaudio and soundcard.h to provide OSS audio I/O
 AC_CHECK_HEADERS(soundcard.h)
