From 30e6af37a955be25a3030f1430d66a30a4661353 Mon Sep 17 00:00:00 2001
From: Johannes Huber <johu@gentoo.org>
Date: Mon, 14 May 2012 10:16:59 +0200
Subject: [PATCH] Revert "Use a report query to list items for CardDav"

gentoo bug #415401
kde bug #299482

This reverts commit 5e322ff7de454404976368d00049b3b5773538a8.
---
 resources/dav/protocols/carddavprotocol.cpp |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/resources/dav/protocols/carddavprotocol.cpp b/resources/dav/protocols/carddavprotocol.cpp
index 38eca17..d5b9ac9 100644
--- a/resources/dav/protocols/carddavprotocol.cpp
+++ b/resources/dav/protocols/carddavprotocol.cpp
@@ -25,11 +25,11 @@ CarddavProtocol::CarddavProtocol()
 {
   QDomDocument document;
 
-  QDomElement queryElement = document.createElementNS( "urn:ietf:params:xml:ns:carddav", "addressbook-query" );
-  document.appendChild( queryElement );
+  QDomElement propfindElement = document.createElementNS( "DAV:", "propfind" );
+  document.appendChild( propfindElement );
 
   QDomElement propElement = document.createElementNS( "DAV:", "prop" );
-  queryElement.appendChild( propElement );
+  propfindElement.appendChild( propElement );
 
   propElement.appendChild( document.createElementNS( "DAV:", "displayname" ) );
   propElement.appendChild( document.createElementNS( "DAV:", "resourcetype" ) );
@@ -45,7 +45,7 @@ bool CarddavProtocol::supportsPrincipals() const
 
 bool CarddavProtocol::useReport() const
 {
-  return true;
+  return false;
 }
 
 bool CarddavProtocol::useMultiget() const
-- 
1.7.10

