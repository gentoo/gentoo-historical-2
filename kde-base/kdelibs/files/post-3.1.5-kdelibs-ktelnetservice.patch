Index: ktelnetservice.cpp
===================================================================
RCS file: /home/kde/kdelibs/kio/misc/ktelnetservice.cpp,v
retrieving revision 1.3.2.2
diff -u -p -r1.3.2.2 ktelnetservice.cpp
--- kio/misc/ktelnetservice.cpp	31 Mar 2003 09:13:55 -0000	1.3.2.2
+++ kio/misc/ktelnetservice.cpp	13 May 2004 15:12:00 -0000
@@ -68,10 +68,19 @@ int main(int argc, char **argv)
 		cmd << url.user();
 	}
 
+        QString host;
         if (!url.host().isEmpty())
-           cmd << url.host(); // telnet://host
+           host = url.host(); // telnet://host
         else if (!url.path().isEmpty())
-           cmd << url.path(); // telnet:host
+           host = url.path(); // telnet:host
+
+        if (host.isEmpty() || host.startsWith("-"))
+        {
+            kdError() << "Invalid hostname " << host << endl;
+            return 2;
+        }
+
+        cmd << host;
         
 	if (url.port())
 		cmd << QString::number(url.port());
