--- khtml/xml/dom_docimpl.cpp	2002/08/07 13:22:09	1.191
+++ khtml/xml/dom_docimpl.cpp	2002/08/16 00:41:19	1.192
@@ -1412,8 +1412,9 @@ void DocumentImpl::processHttpEquiv(cons
             if(str.find("url", 0,  false ) == 0)  str = str.mid(3);
             str = str.stripWhiteSpace();
             if ( str.length() && str[0] == '=' ) str = str.mid( 1 ).stripWhiteSpace();
-            if ( (pos = str.findRev(';')) > 0) str.setLength(pos);
-            if ( (pos = str.findRev(',')) > 0) str.setLength(pos);
+            while(str.length() && 
+                  (str[str.length()-1] == ';' || str[str.length()-1] == ','))
+                str.setLength(str.length()-1);
             str = parseURL( DOMString(str) ).string();
             if ( ok )
                 v->part()->scheduleRedirection(delay, getDocument()->completeURL( str ));
