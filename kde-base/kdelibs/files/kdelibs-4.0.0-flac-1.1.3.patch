Index: kdelibs/cmake/modules/FindFlac.cmake
===================================================================
--- kdelibs/cmake/modules/FindFlac.cmake        (revision 749960)
+++ kdelibs/cmake/modules/FindFlac.cmake        (working copy)
@@ -5,6 +5,9 @@
 #  FLAC_INCLUDE_DIR - the Flac include directory
 #  FLAC_LIBRARIES - Link these to use Flac
 #  FLAC_OGGFLAC_LIBRARIES - Link these to use OggFlac
+#
+# No version checking is done - use FLAC_API_VERSION_CURRENT to
+# conditionally compile version-dependent code
 
 # Copyright (c) 2006, Laurent Montel, <montel@kde.org>
 # Copyright (c) 2006, Alexander Neundorf, <neundorf@kde.org>
@@ -23,18 +26,16 @@ FIND_LIBRARY(FLAC_LIBRARIES NAMES FLAC )
 
 FIND_LIBRARY(FLAC_OGG_LIBRARY NAMES OggFLAC)
 
-check_library_exists(FLAC FLAC__stream_encoder_set_write_callback "" HAVE_STREAM_ENCODER_WRITE_CALLBACK)
-
 
 
-IF(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES AND HAVE_STREAM_ENCODER_WRITE_CALLBACK)
+IF(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES)
    SET(FLAC_FOUND TRUE)
    IF (FLAC_OGG_LIBRARY)
       SET(FLAC_OGGFLAC_LIBRARIES ${FLAC_OGG_LIBRARY} ${FLAC_LIBRARIES})
    ENDIF (FLAC_OGG_LIBRARY)
-ELSE(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES AND HAVE_STREAM_ENCODER_WRITE_CALLBACK)
+ELSE(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES)
    SET(FLAC_FOUND FALSE)
-ENDIF(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES AND HAVE_STREAM_ENCODER_WRITE_CALLBACK)
+ENDIF(FLAC_INCLUDE_DIR AND FLAC_LIBRARIES)
 
 IF(FLAC_FOUND)
    IF(NOT Flac_FIND_QUIETLY)
