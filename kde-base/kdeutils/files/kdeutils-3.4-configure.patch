diff -Nur kdeutils-3.4.2.orig/kmilo/configure.in.in kdeutils-3.4.2/kmilo/configure.in.in
--- kdeutils-3.4.2.orig/kmilo/configure.in.in	2005-05-23 14:09:22.000000000 +0200
+++ kdeutils-3.4.2/kmilo/configure.in.in	2005-07-26 14:42:57.000000000 +0200
@@ -9,6 +9,15 @@
 dnl ---------------------------------------------------------------------
 dnl PowerBook IPC Library
 
+AC_ARG_WITH(powerbook,
+  [AC_HELP_STRING(--with-powerbook,
+    [enable support for PPC PowerBook @<:@default=check@:>@])],
+  [], with_powerbook=check)
+
+have_pbbipc=""
+have_pbb=""
+if test "x$with_powerbook" != xno; then
+
 KDE_CHECK_LIB(pbbipc, create_msgport,
 [
 KEYBOARD_LIBS="-lpbbipc $KEYBOARD_LIBS"
@@ -23,6 +32,10 @@
 have_pbb=true
 ])
 
+if test "x$with_powerbook" != xcheck && test -z "$have_pbbipc$have_pbb"; then
+  AC_MSG_ERROR([--with-powerbook was given, but test for libpbb failed])
+fi
+fi
 
 AM_CONDITIONAL(include_kmilo_powerbook, test x$have_pbbipc = xtrue)
 AM_CONDITIONAL(include_kmilo_pbb, test x$have_pbb = xtrue)
diff -Nur kdeutils-3.4.2.orig/ksim/monitors/snmp/configure.in.in kdeutils-3.4.2/ksim/monitors/snmp/configure.in.in
--- kdeutils-3.4.2.orig/ksim/monitors/snmp/configure.in.in	2005-05-23 14:09:17.000000000 +0200
+++ kdeutils-3.4.2/ksim/monitors/snmp/configure.in.in	2005-07-26 14:43:14.000000000 +0200
@@ -1,17 +1,20 @@
+AC_ARG_WITH(snmp,
+  [AC_HELP_STRING(--with-snmp,
+    [enable support for SNMP @<:@default=check@:>@])],
+  [], with_snmp=check)
+
+enable_snmp=no
+if test "x$with_snmp" != xno; then
+  KDE_CHECK_HEADER( net-snmp/library/snmp_api.h, [ have_netsnmp_h=yes ], [ have_netsnmp_h=no ] )
 
-KDE_CHECK_HEADER( net-snmp/library/snmp_api.h, [ have_netsnmp_h=yes ], [ have_netsnmp_h=no ] )
-
-enable_snmp=
-
-if test "$have_netsnmp_h" = yes; then
+  if test "$have_netsnmp_h" = yes; then
     KDE_CHECK_LIB( netsnmp, snmp_sess_init, [
         AC_SUBST( LIBSNMP, "-lnetsnmp" )
         enable_snmp=yes
     ], [], [] )
-fi
-
-if test "$enable_snmp" != yes; then
+  fi
 
+  if test "$enable_snmp" != yes; then
     AC_MSG_CHECKING([if libnetsnmp needs -lcrypto])
 
     dnl use a different symbol to prevent autoconf from caching
@@ -22,7 +25,11 @@
     ], [
         AC_MSG_RESULT(no)
     ], [-lcrypto] )
-fi
+  fi
 
-AM_CONDITIONAL(include_ksim_monitors_snmp, test -n "$enable_snmp")
+  if test "x$with_snmp" != xcheck && test "x$enable_snmp" != xyes; then
+    AC_MSG_ERROR([--with-snmp was given, but test for net-snmp failed])
+  fi
+fi
 
+AM_CONDITIONAL(include_ksim_monitors_snmp, test "x$enable_snmp" = xyes)
