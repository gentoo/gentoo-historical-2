Index: kdebase-3.5.0/kxkb/rules.cpp
===================================================================
--- kdebase-3.5.0.orig/kxkb/rules.cpp
+++ kdebase-3.5.0/kxkb/rules.cpp
@@ -17,13 +17,13 @@
 
 #include "rules.h"
 
-const char* X11DirList[3] = {"/usr/X11R6/lib/X11/", "/usr/local/X11R6/lib/X11/", "/usr/share/X11/"};
+const char* X11DirList[6] = {"/usr/share/X11/", "/usr/local/share/X11/", "/usr/X11R6/lib/X11/", "/usr/local/X11R6/lib/X11/", "/usr/lib/X11/", "/usr/local/lib/X11/"};
 const char* rulesFileList[2] = {"xkb/rules/xorg", "xkb/rules/xfree86"};
 
 KeyRules::KeyRules():
     m_layouts(90)
 {
-  for(int ii=0; ii<3; ii++)
+  for(int ii=0; ii<6; ii++)
     if( QDir(X11DirList[ii]).exists() ) {
 	X11_DIR = X11DirList[ii];
 	break;
@@ -292,8 +292,8 @@ KeyRules::getVariants(const QString& lay
 
 void KeyRules::parseVariants(const QStringList& vars, QDict<char>& variants, bool chkVars)
 {
-  static const char* LAYOUT_PATTERN = "[a-z0-9_]*";
-  static const char* VARIANT_PATTERN = "\\([a-z0-9_]*\\)";
+  static const char* LAYOUT_PATTERN = "[a-z0-9_-]*";
+  static const char* VARIANT_PATTERN = "\\([a-z0-9_-]*\\)";
   for (QStringList::ConstIterator it = vars.begin(); it != vars.end(); ++it)
   {
       QString varLine = (*it).stripWhiteSpace();
