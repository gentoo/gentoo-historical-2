Index: kmilo/configure.in.in
===================================================================
--- kmilo/configure.in.in	(revision 433553)
+++ kmilo/configure.in.in	(working copy)
@@ -9,6 +9,15 @@
 dnl ---------------------------------------------------------------------
 dnl PowerBook IPC Library
 
+AC_ARG_WITH(powerbook,
+  [AS_HELP_STRING(--with-powerbook,
+    [enable support for PPC PowerBook @<:@default=check@:>@])],
+  [], with_powerbook=check)
+
+have_pbbipc=""
+have_pbb=""
+if test "x$with_powerbook" != xno; then
+
 KDE_CHECK_LIB(pbbipc, create_msgport,
 [
 KEYBOARD_LIBS="-lpbbipc $KEYBOARD_LIBS"
@@ -23,6 +32,10 @@
 have_pbb=true
 ])
 
+if test "x$with_powerbook" != xcheck && test -z "$have_pbbipc$have_pbb"; then
+  AC_MSG_FAILURE([--with-powerbook was given, but test for libpbb failed])
+fi
+fi
 
 AM_CONDITIONAL(include_kmilo_powerbook, test x$have_pbbipc = xtrue)
 AM_CONDITIONAL(include_kmilo_pbb, test x$have_pbb = xtrue)
