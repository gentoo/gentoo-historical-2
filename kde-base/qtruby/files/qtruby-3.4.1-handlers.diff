--- qtruby/rubylib/qtruby/handlers.cpp	2005/05/30 01:00:52	419599
+++ qtruby/rubylib/qtruby/handlers.cpp	2005/07/09 11:46:54	433005
@@ -863,7 +863,7 @@
 	     	} else {
                *(m->var()) = rstringFromQString(s);
 	     	}
-	     	if(m->cleanup())
+	     	if(m->cleanup() || m->type().isStack())
 	     	delete s;
          } else {
                 *(m->var()) = Qnil;
