Index: kfile-plugins/exr/configure.in.in
===================================================================
--- kfile-plugins/exr/configure.in.in	(revision 428265)
+++ kfile-plugins/exr/configure.in.in	(working copy)
@@ -64,6 +64,17 @@
   AC_SUBST(EXR_FLAGS)
 ])
 
-AC_FIND_LIBEXR
+AC_ARG_WITH([openexr],
+  [AS_HELP_STRING([--with-openexr],
+    [Enable support for OpenEXR @<:@default=check@:>@])],
+  [], with_openexr=check)
+
+if test "x$with_openexr" != xno; then
+  AC_FIND_LIBEXR
+
+  if test "x$with_openexr" != xcheck && test -z "$LIB_EXR"; then
+    AC_MSG_FAILURE([--with-openexr was given, but test for OpenEXR failed])
+  fi
+fi
+
 AM_CONDITIONAL(include_EXR_MODULES, test -n "$LIB_EXR")
-
