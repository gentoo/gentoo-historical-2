diff -ru kdemultimedia-2.2.1.orig/kmidi/TIMIDITY/motif_p.c kdemultimedia-2.2.1/kmidi/TIMIDITY/motif_p.c
--- kmidi/TIMIDITY/motif_p.c	Mon Feb 28 19:07:37 2000
+++ kmidi/TIMIDITY/motif_p.c	Fri Oct 19 04:00:10 2001
@@ -22,6 +22,7 @@
     pipe communication between motif interface and sound generator
 
     */
+#include <sys/errno.h>
 #ifdef IA_MOTIF
 
 #include <stdio.h>
diff -ru kdemultimedia-2.2.1.orig/kmidi/alsa_a.cpp kdemultimedia-2.2.1/kmidi/alsa_a.cpp
--- kmidi/alsa_a.cpp	Thu Aug 24 21:49:04 2000
+++ kmidi/alsa_a.cpp	Fri Oct 19 04:01:06 2001
@@ -254,7 +254,7 @@
                == 1 warning
                == -1 fails
  */
-static int set_playback_info (void* handle__,
+static int set_playback_info (snd_pcm_t* handle__,
 			      uint32* encoding__, uint32* rate__,
 			      const int32 extra_param[5])
 {
@@ -426,13 +426,13 @@
     playback_params.fragments_max = extra_param[0];
 #endif
   playback_params.buf.block.frags_min = 1;
-  snd_pcm_plugin_flush(handle__, SND_PCM_CHANNEL_PLAYBACK);
+  snd_pcm_plugin_flush((snd_pcm_t *)handle__, SND_PCM_CHANNEL_PLAYBACK);
 
   playback_params.start_mode = SND_PCM_START_FULL;
   playback_params.stop_mode = SND_PCM_STOP_STOP;
   //playback_params.stop_mode = SND_PCM_STOP_ROLLOVER;
 
-  tmp = snd_pcm_channel_params (handle__, &playback_params);
+  tmp = snd_pcm_channel_params ((snd_pcm_t *)handle__, &playback_params);
 
 //fprintf(stderr,"tmp = %d from snd_pcm_channel_params\n",tmp);
   if (tmp != 0)
@@ -448,7 +448,7 @@
     }
 
 
-  if (snd_pcm_plugin_prepare(handle__, SND_PCM_CHANNEL_PLAYBACK) < 0) {
+  if (snd_pcm_plugin_prepare((snd_pcm_t *)handle__, SND_PCM_CHANNEL_PLAYBACK) < 0) {
       fprintf(stderr, "unable to prepare channel\n");
       return -1;
   } 
@@ -456,7 +456,7 @@
   memset(&setup, 0, sizeof(setup));
   setup.channel = SND_PCM_CHANNEL_PLAYBACK;
   setup.mode = SND_PCM_MODE_BLOCK;
-  if (snd_pcm_plugin_setup(handle__, &setup) < 0) {
+  if (snd_pcm_plugin_setup((snd_pcm_t *)handle__, &setup) < 0) {
       fprintf(stderr, "unable to obtain setup\n");
       return -1;
   }
@@ -466,7 +466,7 @@
 //fprintf(stderr, "setup frags = %d\n", setup.buf.block.frags);
 //fprintf(stderr, "setup frag_size = %d\n", setup.buf.block.frag_size);
 
-  if(snd_pcm_plugin_status(handle__, &playback_status) == 0)
+  if(snd_pcm_plugin_status((snd_pcm_t *)handle__, &playback_status) == 0)
     {
       if (setup.format.rate != orig_rate)
 	{
