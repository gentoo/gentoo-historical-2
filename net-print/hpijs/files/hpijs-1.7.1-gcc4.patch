diff -ur hpijs-1.7.1-orig/printerproxy.h hpijs-1.7.1/printerproxy.h
--- hpijs-1.7.1-orig/printerproxy.h	2005-08-18 18:07:18.000000000 -0400
+++ hpijs-1.7.1/printerproxy.h	2005-08-18 18:08:44.000000000 -0400
@@ -46,6 +46,7 @@
     VOTE_EXACT_MATCH = 100                  //!< exact match id on this printer
 };
 
+class Printer;
 
 
 //PrinterProxy
--- hpijs-1.7.1-orig/ljcolor.cpp.orig 2005-11-11 02:03:26.000000000 +0100
+++ hpijs-1.7.1/ljcolor.cpp 2005-11-11 02:04:11.000000000 +0100
@@ -286,7 +286,7 @@
 
     if (thePrinter->IOMode.bStatus)
     {
-        sprintf (res, "@PJL JOB NAME = \"%d\"\015\012", (int) (thePrinter));
+        sprintf (res, "@PJL JOB NAME = \"%ld\"\015\012", (long) (thePrinter));
         err = thePrinter->Send ((const BYTE *) res, strlen (res));
         ERRCHECK;
     }
@@ -396,8 +396,8 @@
     DRIVER_ERROR    err = NO_ERROR;
     if (thePrinter->IOMode.bStatus)
     {
-        sprintf (szBuff, "\033E\033%%-12345X@PJL EOJ NAME = \"%d\"\015\012@PJL RESET\015\012",
-                 (int) (thePrinter));
+        sprintf (szBuff, "\033E\033%%-12345X@PJL EOJ NAME = \"%ld\"\015\012@PJL RESET\015\012",
+                 (long) (thePrinter));
         err = thePrinter->Send ((const BYTE *) szBuff, strlen (szBuff));
         ERRCHECK;
     }
@@ -575,8 +575,8 @@
         tmpStr += 6;
         while (*tmpStr < '0' || *tmpStr > '9')
             tmpStr++;
-        sscanf (tmpStr, "%d", &iErrorCode);
-        if (iErrorCode != (int) (this))
+        sscanf (tmpStr, "%ld", &iErrorCode);
+        if (iErrorCode != (long) (this))
             return DISPLAY_PRINTING;
     }
 
--- hpijs-1.7.1-orig/ljmono.cpp	2004-10-15 01:08:51.000000000 +0200
+++ hpijs-1.7.1/ljmono.cpp	2005-11-11 02:02:22.000000000 +0100
@@ -185,7 +185,7 @@
 
     if (thePrinter->IOMode.bStatus)
     {
-        sprintf (res, "@PJL JOB NAME = \"%d\"\015\012", (int) (thePrinter));
+        sprintf (res, "@PJL JOB NAME = \"%ld\"\015\012", (long) (thePrinter));
         err = thePrinter->Send ((const BYTE *) res, strlen (res));
         ERRCHECK;
 
@@ -270,8 +270,8 @@
     DRIVER_ERROR    err = NO_ERROR;
     if (thePrinter->IOMode.bStatus)
     {
-        sprintf (szBuff, "\033E\033%%-12345X@PJL EOJ NAME = \"%d\"\015\012@PJL RESET\015\012",
-                (int) (thePrinter));
+        sprintf (szBuff, "\033E\033%%-12345X@PJL EOJ NAME = \"%ld\"\015\012@PJL RESET\015\012",
+                (long) (thePrinter));
         err = thePrinter->Send ((const BYTE *) szBuff, strlen (szBuff));
     }
 
@@ -340,8 +340,8 @@
         tmpStr += 6;
         while (*tmpStr < '0' || *tmpStr > '9')
             tmpStr++;
-        sscanf (tmpStr, "%d", &iErrorCode);
-        if (iErrorCode != (int) (this))
+        sscanf (tmpStr, "%ld", &iErrorCode);
+        if (iErrorCode != (long) (this))
             return DISPLAY_PRINTING;
     }
 
