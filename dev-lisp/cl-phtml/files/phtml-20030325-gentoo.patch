diff -u xmlutils.orig/phtml.cl xmlutils/phtml.cl
--- xmlutils.orig/phtml.cl	2003-04-01 00:41:00.000000000 -0600
+++ xmlutils/phtml.cl	2003-10-16 09:40:42.226740320 -0500
@@ -1,3 +1,4 @@
+#+allegro
 (sys:defpatch "phtml" 1
   "parse-html close tag closes consecutive identical open tags."
   :type :system
@@ -48,7 +49,7 @@
 ;
 
 (defpackage net.html.parser
-  (:use :lisp :clos :excl)
+  (:use :common-lisp #+allegro :clos :acl-compat-mp :acl-compat.excl)
   (:export
    #:phtml-internal
    #:parse-html))
@@ -103,7 +104,7 @@
 (defun get-collector ()
   (declare (optimize (speed 3) (safety 1)))
   (let (col)
-    (mp::without-scheduling
+    (acl-compat.mp:without-scheduling
       (do* ((cols *collectors* (cdr cols))
 	    (this (car cols) (car cols)))
 	  ((null cols))
@@ -121,7 +122,7 @@
 
 (defun put-back-collector (col)
   (declare (optimize (speed 3) (safety 1)))
-  (mp::without-scheduling 
+  (acl-compat.mp:without-scheduling 
     (do ((cols *collectors* (cdr cols)))
 	((null cols)
 	 ; toss it away
@@ -533,7 +534,7 @@
 (defun get-tokenbuf ()
   (declare (optimize (speed 3) (safety 1)))
   (let (buf)
-    (mp::without-scheduling
+    (acl-compat.mp:without-scheduling
       (do* ((bufs *tokenbufs* (cdr bufs))
 	    (this (car bufs) (car bufs)))
 	  ((null bufs))
@@ -552,7 +553,7 @@
 
 (defun put-back-tokenbuf (buf)
   (declare (optimize (speed 3) (safety 1)))
-  (mp::without-scheduling 
+  (acl-compat.mp:without-scheduling 
     (do ((bufs *tokenbufs* (cdr bufs)))
 	((null bufs)
 	 ; toss it away
@@ -1390,4 +1391,4 @@
 ;;;	  (parse-response
 ;;;	   (simple-get host path)))))
 
-(provide :phtml)
+#+allegro (provide :phtml)
