https://ntp.isc.org/bugs/show_bug.cgi?id=438

--- ntpdc/ntpdc.c
+++ ntpdc/ntpdc.c
@@ -449,7 +449,11 @@
 	hints.ai_flags = AI_NUMERICHOST;
 
 	a_info = getaddrinfo(hname, service, &hints, &ai);
-	if (a_info == EAI_NONAME || a_info == EAI_NODATA) {
+	if (a_info == EAI_NONAME 
+#ifdef EAI_NODATA
+		|| a_info == EAI_NODATA
+#endif
+	) {
 		hints.ai_flags = AI_CANONNAME;
 #ifdef AI_ADDRCONFIG
 		hints.ai_flags |= AI_ADDRCONFIG;
--- ntpq/ntpq.c
+++ ntpq/ntpq.c
@@ -631,7 +631,11 @@
 	hints.ai_flags = AI_NUMERICHOST;
 
 	a_info = getaddrinfo(hname, service, &hints, &ai);
-	if (a_info == EAI_NONAME || a_info == EAI_NODATA) {
+	if (a_info == EAI_NONAME
+#ifdef EAI_NODATA
+		|| a_info == EAI_NODATA
+#endif
+	) {
 		hints.ai_flags = AI_CANONNAME;
 #ifdef AI_ADDRCONFIG
 		hints.ai_flags |= AI_ADDRCONFIG;
