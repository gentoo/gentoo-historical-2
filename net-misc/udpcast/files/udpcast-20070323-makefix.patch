--- udpcast-20070323/Makefile.in.orig	2007-04-07 00:47:27.000000000 +1000
+++ udpcast-20070323/Makefile.in	2007-04-07 00:49:01.000000000 +1000
@@ -41,7 +41,7 @@
 override CFLAGS += -DNO_BB
 
 all: udp-receiver$(EXESUFFIX) udp-sender$(EXESUFFIX) \
-	udp-receiver.1 udp-sender.1
+	manpages
 #all: fec-test
 
 disk: udpcast.img.gz
@@ -53,10 +53,10 @@
 	udp-sender.1 udp-receiver.1 *~
 
 install: udp-sender udp-receiver
-	install -d $(prefix)/sbin
-	install -m 755 udp-sender udp-receiver $(prefix)/sbin
-	install -d $(mandir)/man1
-	install -m 644 udp-sender.1 udp-receiver.1 $(mandir)/man1
+	install -d $(DESTDIR)$(prefix)/sbin
+	install -m 755 udp-sender udp-receiver $(DESTDIR)$(prefix)/sbin
+	install -d $(DESTDIR)$(mandir)/man1
+	install -m 644 udp-sender.1 udp-receiver.1 $(DESTDIR)$(mandir)/man1
 
 udp-sender$(EXESUFFIX): udp-sender.o socklib.o udpcast.o rate-limit.o \
 	sender-diskio.o senddata.o udps-negotiate.o \
@@ -74,7 +74,7 @@
 cmd.html.man: udp-receiver.txt udp-sender.txt cmd.html
 	cat $^ | m4 >cmd.html.man
 
-udp-receiver.1 udp-sender.1: html2man.pl cmd.html.man
+manpages: html2man.pl cmd.html.man
 	perl $^
 
 fec-test: fec-test.o
@@ -125,3 +125,5 @@
 
 bb: bbcopy
 	make -C $(BUSYBOX)
+
+.PHONY: manpages
