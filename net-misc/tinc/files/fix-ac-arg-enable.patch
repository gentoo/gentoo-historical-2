diff -Naur tinc-1.0.18.orig//configure.in tinc-1.0.18/configure.in
--- tinc-1.0.18.orig//configure.in	2012-03-25 09:46:02.000000000 -0400
+++ tinc-1.0.18/configure.in	2012-03-25 21:24:55.000000000 -0400
@@ -74,29 +74,43 @@
 
 AC_ARG_ENABLE(uml,
   AS_HELP_STRING([--enable-uml], [enable support for User Mode Linux]),
-  [ AC_DEFINE(ENABLE_UML, 1, [Support for UML])
-    uml=true
-  ]
+  [ AS_IF([test "x$enable_uml" = "xyes"],
+      [ AC_DEFINE(ENABLE_UML, 1, [Support for UML])
+        uml=true
+      ],
+      [uml=false])
+  ],
+  [uml=true]
 )
 
 AC_ARG_ENABLE(vde,
   AS_HELP_STRING([--enable-vde], [enable support for Virtual Distributed Ethernet]),
-  [ AC_CHECK_HEADERS(libvdeplug_dyn.h, [], [AC_MSG_ERROR([VDE plug header files not found.]); break])
-    AC_DEFINE(ENABLE_VDE, 1, [Support for VDE])
-    vde=true
-  ]
+  [ AS_IF([test "x$enable_vde" = "xyes"],
+      [ AC_CHECK_HEADERS(libvdeplug_dyn.h, [], [AC_MSG_ERROR([VDE plug header files not found.]); break])
+        AC_DEFINE(ENABLE_VDE, 1, [Support for VDE])
+        vde=true
+      ],
+      [vde=false])
+  ],
+  [vde=true]
 )
 
 AC_ARG_ENABLE(tunemu,
   AS_HELP_STRING([--enable-tunemu], [enable support for the tunemu driver]),
-  [ AC_DEFINE(ENABLE_TUNEMU, 1, [Support for tunemu])
-    tunemu=true
-  ]
+  [ AS_IF([test "x$enable_tunemu" = "xyes"],
+      [ AC_DEFINE(ENABLE_TUNEMU, 1, [Support for tunemu])
+        tunemu=true
+      ],
+      [tunemu=false])
+  ],
+  [tunemu=true]
 )
 
 AC_ARG_WITH(windows2000,
   AS_HELP_STRING([--with-windows2000], [compile with support for Windows 2000. This disables support for tunneling over existing IPv6 networks.]),
-  [AC_DEFINE(WITH_WINDOWS2000, 1, [Compile with support for Windows 2000])]
+  [ AS_IF([test "x$with_windows2000" = "xyes"],
+      [AC_DEFINE(WITH_WINDOWS2000, 1, [Compile with support for Windows 2000])])
+  ]
 )
 
 AM_CONDITIONAL(UML, test "$uml" = true)
@@ -177,7 +191,9 @@
 dnl Check if support for jumbograms is requested 
 AC_ARG_ENABLE(jumbograms,
   AS_HELP_STRING([--enable-jumbograms], [enable support for jumbograms (packets up to 9000 bytes)]),
-  [ AC_DEFINE(ENABLE_JUMBOGRAMS, 1, [Support for jumbograms (packets up to 9000 bytes)]) ]
+  [ AS_IF([test "x$enable_jumbograms" = "xyes"],
+      [ AC_DEFINE(ENABLE_JUMBOGRAMS, 1, [Support for jumbograms (packets up to 9000 bytes)]) ])
+  ]
 )
 
 AC_SUBST(INCLUDES)
