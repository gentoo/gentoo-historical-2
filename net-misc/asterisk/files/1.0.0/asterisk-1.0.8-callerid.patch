--- asterisk-1.0.8/pbx/pbx_config.c.orig	2005-06-26 21:45:36.724546872 +0200
+++ asterisk-1.0.8/pbx/pbx_config.c	2005-06-26 21:50:14.119376448 +0200
@@ -1688,14 +1688,9 @@
 									data = "";
 							}
 							pbx_substitute_variables_helper(NULL, ext, realext, sizeof(realext)-1);	
-							cidmatch = strchr(ext, '/');
-							if (cidmatch) {
-								*cidmatch = '\0';
-								cidmatch++;
-							}
-							stringp=ext;
-							strsep(&stringp, "/");
-
+							stringp = realext;
+							ext = strsep(&stringp, "/");
+							cidmatch = stringp;
 							if (!data)
 								data="";
 							while(*appl && (*appl < 33)) appl++;
