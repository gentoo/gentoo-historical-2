diff -ur hylafax-4.2.1/configure hylafax-4.2.1-fbsd/configure
--- hylafax-4.2.1/configure	2004-12-28 04:45:03 +0000
+++ hylafax-4.2.1-fbsd/configure	2005-06-05 14:45:14 +0000
@@ -1578,11 +1578,9 @@
 if [ "$DISABLE_PAM" != "yes" ]; then
 	Note "Checking for PAM (Pluggable Authentication Module) support"
 	CheckForLibrary pam_authenticate -lpam &&
-		CheckForLibrary misc_conv -lpam_misc -lpam &&
-		CheckForIncludeFile security/pam_appl.h &&
-		CheckForIncludeFile security/pam_misc.h && {
+		CheckForIncludeFile security/pam_appl.h && {
 			HAVE_PAM="#define HAVE_PAM 1"
-			PAMLIBS="-lpam -lpam_misc"
+			PAMLIBS="-lpam"
 		}
 	if [ "x$PAMLIBS" = "x" ]; then
 		Note "... not found. Disabling PAM support"
diff -ur hylafax-4.2.1/hfaxd/HylaFAXServer.h hylafax-4.2.1-fbsd/hfaxd/HylaFAXServer.h
--- hylafax-4.2.1/hfaxd/HylaFAXServer.h	2004-11-23 18:05:02 +0000
+++ hylafax-4.2.1-fbsd/hfaxd/HylaFAXServer.h	2005-06-05 14:45:35 +0000
@@ -43,7 +43,6 @@
 #ifdef HAVE_PAM
 extern "C" {
 #include <security/pam_appl.h>
-#include <security/pam_misc.h>
 #include <grp.h>
 }
 #endif // HAVE_PAM
diff -ur hylafax-4.2.1/hfaxd/Login.c++ hylafax-4.2.1-fbsd/hfaxd/Login.c++
--- hylafax-4.2.1/hfaxd/Login.c++	2004-04-27 20:16:15 +0000
+++ hylafax-4.2.1-fbsd/hfaxd/Login.c++	2005-06-05 15:15:01 +0000
@@ -109,7 +109,7 @@
 	for (i=0; i<num_msg; i++) {
 		switch(msg[i]->msg_style) {
 			case PAM_PROMPT_ECHO_OFF:
-				replies[i].resp = x_strdup(password);
+				replies[i].resp = password ? strdup(password) : NULL;
 				replies[i].resp_retcode = 0;
 				retval = PAM_SUCCESS;
 				break;
