--- scponly-4.2/helper.c.orig	2005-12-26 20:56:20.000000000 +0100
+++ scponly-4.2/helper.c	2005-12-26 23:28:45.000000000 +0100
@@ -36,7 +36,9 @@
 
 extern char *optarg;
 extern int optind;
+#ifdef HAVE_OPTRESET
 extern int optreset;
+#endif
 
 #ifdef UNIX_COMPAT
 char* solaris_needs_strsep(char** str, char* delims)
@@ -156,8 +158,14 @@
 				/* 
 				 *	now use getopt to look for our problem option
 				 */
+				#ifdef HAVE_OPTRESET
 				optreset=1;
+				#endif
+				#ifdef __GLIBC__
+				optind=0;
+				#else
 				optind=1;
+				#endif
 				/*
 				 *	tell getopt to only be strict if the 'opts' is well defined
 				 */
