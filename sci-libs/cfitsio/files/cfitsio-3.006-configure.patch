--- Makefile.in.orig	2006-05-16 20:54:31.000000000 -0700
+++ Makefile.in	2006-05-16 20:56:02.000000000 -0700
@@ -19,8 +19,8 @@
 #
 
 CFITSIO_PREFIX	= @CFITSIO_PREFIX@
-CFITSIO_LIB	= ${CFITSIO_PREFIX}/lib
-CFITSIO_INCLUDE	= ${CFITSIO_PREFIX}/include
+CFITSIO_LIB	= ${CFITSIO_PREFIX}/${LIBDIR}
+CFITSIO_INCLUDE	= ${CFITSIO_PREFIX}/${INCLUDEDIR}
 
 SHELL =		/bin/sh
 RANLIB =	@RANLIB@
@@ -146,4 +146,4 @@
 objs: ${CORE_OBJECTS}
 
 ${CFITSIO_PREFIX} ${CFITSIO_LIB} ${CFITSIO_INCLUDE}:
-	@if [ ! -d $@ ]; then mkdir $@; fi
+	@if [ ! -d $@ ]; then mkdir -p $@; fi
--- configure.orig	2006-05-16 20:54:04.000000000 -0700
+++ configure	2006-05-16 21:13:01.000000000 -0700
@@ -1252,6 +1252,8 @@
     ;;
   lnx)
     SHLIB_LD=":"
+    LD_FLAGS="-shared -Wl,-soname,libcfitsio.so.1"
+    SHLIB_SUFFIX=".so.0"
     ;;
   osf)
     SHLIB_LD="ld -shared -expect_unresolved '*'"
@@ -1271,7 +1273,7 @@
 # Darwin uses gcc (=cc), but needs different flags (see above)
 # if test "x$GCC" = xyes; then
 if test "x$GCC" = xyes && test "x$EXT" != xdarwin && test "x$EXT" != xcygwin; then
-  SHLIB_LD="$CC -shared"
+  SHLIB_LD="gcc -shared -Wl,-soname,libcfitsio.so.1"
   lhea_shlib_cflags='-fPIC'
 fi
 if test "x$lhea_shlib_cflags" != x; then
