diff --git a/Makefile b/Makefile
index 10e9ba2..54a3a89 100644
--- a/Makefile
+++ b/Makefile
@@ -42,7 +42,7 @@
 
 # Version string
 VERSION = 3:0:0
-RELEASE = 2.1.3
+RELEASE = 2.1.4
 
 
 #
@@ -120,8 +120,8 @@ BUILD_COMMAND_STATIC   =  $(LIBTOOL) --mode=link $(CC) $(CFLAGS) -static-libtool
 INSTALL_COMMAND        =  $(LIBTOOL) --mode=install cp
 INSTALL_FINISH_COMMAND =  $(LIBTOOL) --mode=finish
 
-OBJ_EXT                =  lo
-LIB_EXT                =  la
+OBJ_EXT                =  o
+LIB_EXT                =  so
 
 ######################################################################
 #  You should not need to make modifications below this line         #
@@ -218,8 +218,7 @@ endif
 # Compile the library and examples
 #
 all:	$(LIB) $(BIN) $(SOURCE) $(HEADERS) \
-		$(LIB)/libCNearTree.$(LIB_EXT) \
-		$(BIN)/CPPMain $(BIN)/CMain $(BIN)/CPPNearTreeTest $(BIN)/CNearTreeTest
+		$(LIB)/libCNearTree.$(LIB_EXT)
 		
 install:  all $(INSTALL_PREFIX) $(INSTALL_PREFIX)/lib $(INSTALL_PREFIX)/include \
           $(INC) $(LIB)/libCNearTree.$(LIB_EXT)  $(INC)/TNear.h $(INC)/CNearTree.h $(INC)/rhrand.h
@@ -270,8 +269,8 @@ $(BIN):
 # CNearTree library
 #
 $(LIB)/libCNearTree.$(LIB_EXT): $(SRC)/CNearTree.c $(INC)/CNearTree.h $(LIB) $(COMMONDEP)
-	$(COMPILE_COMMAND) -c $(SRC)/CNearTree.c
-	$(LIBRARY_LINK_COMMAND) -o $(LIB)/libCNearTree.$(LIB_EXT) CNearTree.$(OBJ_EXT)  $(INCLUDES) \
+	$(CC) $(CFLAGS) -fPIC -c $(SRC)/CNearTree.c -o CNearTree.o -I.
+	$(CC) $(LDFLAGS) -Wl,--soname,libCNearTree.so.2 -shared -o libCNearTree.so.$(RELEASE) *.$(OBJ_EXT) \
 	$(CLIBRARIES)
 
 #
