--- src/IceRuby/Types.cpp.orig	2007-02-02 12:50:42.000000000 -0500
+++ src/IceRuby/Types.cpp	2007-02-02 12:51:39.000000000 -0500
@@ -547,8 +547,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = INT2FIX(seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindShort:
@@ -560,8 +560,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = INT2FIX(seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindInt:
@@ -573,8 +573,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = INT2FIX(seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindLong:
@@ -586,8 +586,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = callRuby(rb_ll2inum, seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindFloat:
@@ -599,8 +599,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = callRuby(rb_float_new, seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindDouble:
@@ -612,8 +612,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = callRuby(rb_float_new, seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     case PrimitiveInfo::KindString:
@@ -625,8 +625,8 @@
 	for(long i = 0; i < sz; ++i)
 	{
 	    RARRAY(arr)->ptr[i] = createString(seq[i]);
+	    RARRAY(arr)->len++;
 	}
-	RARRAY(arr)->len = sz;
 	break;
     }
     }
