--- Makefile.orig	2006-10-30 08:59:43.000000000 -0500
+++ Makefile	2006-10-30 09:03:30.000000000 -0500
@@ -13,13 +13,13 @@
 
 SUBDIRS		= src ruby
 
-INSTALL_SUBDIRS	= $(install_bindir) $(install_libdir) $(install_rubydir) $(install_slicedir)
+INSTALL_SUBDIRS	= $(install_bindir) $(install_libdir) $(install_rubyarchdir) $(install_slicedir) $(install_rubylibdir)
 
 install::
 	@if test ! -d $(prefix) ; \
 	then \
 	    echo "Creating $(prefix)..." ; \
-	    $(call mkdir,$(prefix)) ; \
+	    mkdir -p $(prefix) ; \
 	fi
 	@for subdir in $(INSTALL_SUBDIRS); \
 	do \
@@ -61,9 +61,5 @@
 	    done \
 	fi
 
-install::
-	$(call installdata,ICE_LICENSE,$(prefix))
-	$(call installdata,LICENSE,$(prefix))
-
 test::
 	@python $(top_srcdir)/allTests.py
--- ruby/Makefile.orig	2006-10-30 08:54:37.000000000 -0500
+++ ruby/Makefile	2006-10-30 08:56:21.000000000 -0500
@@ -125,8 +125,8 @@
 	@echo "Installing generated code"
 	@for i in $(MODULES) ; \
 	do \
-	    $(INSTALL_DATA) $${i}.rb $(install_rubydir) ; \
-	    $(INSTALL_DATA) -r $$i $(install_rubydir) ; \
+	    $(INSTALL_DATA) $${i}.rb $(install_rubylibdir) ; \
+	    $(INSTALL_DATA) -r $$i $(install_rubylibdir) ; \
 	done
 
 clean::
--- src/IceRuby/Makefile.orig	2006-10-30 08:56:33.000000000 -0500
+++ src/IceRuby/Makefile	2006-10-30 08:56:48.000000000 -0500
@@ -38,6 +38,6 @@
 	$(call mkshlib,$@,$(SONAME),$(OBJS),$(LINKWITH))
 
 install:: all
-	$(call installrubylib,$(rubydir)/$(LIBNAME),$(install_rubydir))
+	$(call installrubylib,$(rubydir)/$(LIBNAME),$(install_rubyarchdir))
 
 include .depend
--- config/Make.rules.orig	2006-10-30 09:21:53.000000000 -0500
+++ config/Make.rules	2006-10-30 09:23:59.000000000 -0500
@@ -18,7 +18,7 @@
 # if it does not exist.
 #
 
-prefix			= /opt/IceRuby-$(VERSION)
+prefix			= $(DESTDIR)/usr
 
 #
 # Define OPTIMIZE as yes if you want to build with optimization.
@@ -52,8 +52,10 @@
     endif
 endif
 
-RUBY_INCLUDE_DIR	= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(archdir)")')
-RUBY_LIB_DIR		= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(libdir)")')
+RUBY_ARCH_DIR		= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(archdir)")')
+RUBY_LIB_DIR		= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(rubylibdir)")')
+RUBY_SITEARCH_DIR	= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(sitearchdir)")')
+RUBY_SITELIB_DIR	= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("$$(sitelibdir)")')
 
 RUBY_SHARED		= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::MAKEFILE_CONFIG["ENABLE_SHARED"]')
 
@@ -63,7 +65,7 @@
     RUBY_LIB		= $(shell $(RUBY) -e 'require "rbconfig"; puts Config::expand("-l$$(RUBY_SO_NAME)-static")')
 endif
 
-RUBY_FLAGS		= -I$(RUBY_INCLUDE_DIR)
+RUBY_FLAGS		= -I$(RUBY_ARCH_DIR)
 RUBY_LIBS		= -L$(RUBY_LIB_DIR) $(RUBY_LIB)
 
 ifneq ($(ICE_HOME),)
@@ -109,8 +111,9 @@
 endif
 
 install_bindir		= $(prefix)/bin
-install_slicedir	= $(prefix)/slice
-install_rubydir		= $(prefix)/ruby
+install_slicedir	= $(prefix)/share/IceRuby-$(VERSION)/slice
+install_rubylibdir	= $(DESTDIR)/$(RUBY_SITELIB_DIR)
+install_rubyarchdir	= $(DESTDIR)/$(RUBY_SITEARCH_DIR)
 
 INSTALL			= cp -fp
 INSTALL_PROGRAM		= ${INSTALL}
