--- CMakeLists.txt.old  2009-02-25 10:26:47.000000000 +0100
+++ CMakeLists.txt      2009-02-25 10:33:07.000000000 +0100
@@ -287,14 +287,24 @@
     INCLUDE(Find3rdPartyDependencies)
 ENDIF(WIN32)
 
+OPTION(ENABLE_XUL "Enable gecko plugin" ON)
+OPTION(ENABLE_PDF "Enable pdf plugin" ON)
+OPTION(ENABLE_XINE "Enable xine plugin" ON)
+OPTION(ENABLE_JPEG2K "Enable jp2 plugin" ON)
+OPTION(ENABLE_SVG "Enable svg plugin" ON)
+
 # Common to all platforms:
 FIND_PACKAGE(FreeType)
 FIND_PACKAGE(Inventor)
+IF(ENABLE_JPEG2K)
 FIND_PACKAGE(Jasper)
+ENDIF(ENABLE_JPEG2K)
 FIND_PACKAGE(OpenEXR)
 FIND_PACKAGE(COLLADA)
 FIND_PACKAGE(ZLIB)
+IF(ENABLE_XINE)
 FIND_PACKAGE(Xine)
+ENDIF(ENABLE_XINE)
 FIND_PACKAGE(OpenVRML)
 FIND_PACKAGE(Performer)
 FIND_PACKAGE(GDAL)
@@ -302,7 +312,9 @@
 FIND_PACKAGE(ITK)
 FIND_PACKAGE(LibVNCServer)
 FIND_PACKAGE(OurDCMTK)
+IF(ENABLE_XUL)
 FIND_PACKAGE(XUL)
+ENDIF(ENABLE_XUL)
 
 #use pkg-config to find various modues
 INCLUDE(FindPkgConfig OPTIONAL)
@@ -319,9 +331,13 @@
         KG_CHECK_MODULES(GTKGL gtkglext-x11-1.0)
     ENDIF(WIN32)
 
+    IF(ENABLE_SVG)
     PKG_CHECK_MODULES(RSVG librsvg-2.0)
+    ENDIF(ENABLE_SVG)
     PKG_CHECK_MODULES(CAIRO cairo)
+    IF(ENABLE_PDF)
     PKG_CHECK_MODULES(POPPLER poppler-glib)
+    ENDIF(ENABLE_PDF)
 
 ENDIF(PKG_CONFIG_FOUND)

