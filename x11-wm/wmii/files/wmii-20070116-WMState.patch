diff -uN wmii-3.5.1.old/client.c wmii-3.5.1/client.c
--- wmii-3.5.1.old/client.c	2007-01-30 14:49:04.000000000 -0800
+++ wmii-3.5.1/client.c	2007-01-30 14:54:05.000000000 -0800
@@ -125,6 +125,14 @@
 }
 
 void
+set_client_state(Client * c, int state)
+{
+    long data[] = { state, None };
+    XChangeProperty(blz.dpy, c->win, wm_atom[WMState], wm_atom[WMState], 32,
+            PropModeReplace, (unsigned char *) data, 2);
+}
+
+void
 update_client_grab(Client *c, Bool is_sel) {
 	if(is_sel) {
 		ungrab_mouse(c->framewin, AnyModifier, AnyButton);
@@ -187,7 +195,8 @@
 map_client(Client *c) {
 	XSelectInput(blz.dpy, c->win, CLIENT_MASK & ~StructureNotifyMask);
 	XMapWindow(blz.dpy, c->win);
-	XSelectInput(blz.dpy, c->win, CLIENT_MASK);
+    XSelectInput(blz.dpy, c->win, CLIENT_MASK);
+	set_client_state(c, NormalState);
 }
 
 void
@@ -195,6 +204,7 @@
 	XSelectInput(blz.dpy, c->win, CLIENT_MASK & ~StructureNotifyMask);
 	XUnmapWindow(blz.dpy, c->win);
 	XSelectInput(blz.dpy, c->win, CLIENT_MASK);
+    set_client_state(c, WithdrawnState);
 }
 
 void
diff -uN wmii-3.5.1.old/main.c wmii-3.5.1/main.c
--- wmii-3.5.1.old/main.c	2007-01-30 14:49:04.000000000 -0800
+++ wmii-3.5.1/main.c	2007-01-30 14:54:05.000000000 -0800
@@ -91,6 +91,7 @@
 
 static void
 init_atoms() {
+    wm_atom[WMState] = XInternAtom(blz.dpy, "WM_STATE", False);
 	wm_atom[WMProtocols] = XInternAtom(blz.dpy, "WM_PROTOCOLS", False);
 	wm_atom[WMDelete] = XInternAtom(blz.dpy, "WM_DELETE_WINDOW", False);
 	net_atom[NetSupported] = XInternAtom(blz.dpy, "_NET_SUPPORTED", False);
Common subdirectories: wmii-3.5.1.old/rc and wmii-3.5.1/rc
diff -uN wmii-3.5.1.old/wmii.h wmii-3.5.1/wmii.h
--- wmii-3.5.1.old/wmii.h	2007-01-30 14:49:04.000000000 -0800
+++ wmii-3.5.1/wmii.h	2007-01-30 14:54:05.000000000 -0800
@@ -67,7 +67,7 @@
 };
 
 /* WM atoms */
-enum { WMProtocols, WMDelete, WMLast };
+enum { WMState, WMProtocols, WMDelete, WMLast };
 
 /* NET atoms */
 enum { NetSupported, NetWMName, NetLast };
