Index: complete.cc
===================================================================
RCS file: /home/lav/cvsroot/lftp/src/complete.cc,v
retrieving revision 1.70
diff -u -p -r1.70 complete.cc
--- complete.cc	3 Nov 2004 08:37:44 -0000	1.70
+++ complete.cc	9 Jan 2006 16:07:53 -0000
@@ -660,7 +660,7 @@ static char **lftp_completion (const cha
 	    type=REMOTE_DIR;
 	 goto really_remote;
       }
-
+   really_local:
       ArgV arg("", ResMgr::Query("cmd:cls-completion-default", 0));
       fso.parse_argv(&arg);
 
@@ -729,7 +729,11 @@ static char **lftp_completion (const cha
    case REMOTE_FILE:
    case REMOTE_DIR: {
       if(!remote_completion && !force_remote)
-	 break; // local
+      {
+	 if(type==REMOTE_DIR)
+	    type=LOCAL_DIR;
+	 goto really_local;
+      }
    really_remote:
       if(!strncmp(text,"bm:",3) && !strchr(text,'/'))
       {
