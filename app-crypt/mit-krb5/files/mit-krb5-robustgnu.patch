diff -ru krb5-1.4.3.orig/src/aclocal.m4 krb5-1.4.3/src/aclocal.m4
--- krb5-1.4.3.orig/src/aclocal.m4	2005-09-22 13:16:11.000000000 -0400
+++ krb5-1.4.3/src/aclocal.m4	2006-03-26 09:50:10.000000000 -0500
@@ -182,7 +182,10 @@
 LIBS="$PTHREAD_LIBS $LIBS"
 AC_MSG_NOTICE(rechecking with PTHREAD_... options)
 AC_CHECK_LIB(c, pthread_mutexattr_setrobust_np,
-  [AC_DEFINE(HAVE_PTHREAD_MUTEXATTR_SETROBUST_NP_IN_THREAD_LIB,1,[Define if pthread_mutexattr_setrobust_np is provided in the thread library.])])
+  [AC_DEFINE(HAVE_PTHREAD_MUTEXATTR_SETROBUST_NP_IN_THREAD_LIB,1,[Define if pthread_mutexattr_setrobust_np is provided in the thread library.])
+# pthread_mutexattr_setrobust_np is declared as a GNU extension on GNU libc
+  PTHREAD_CFLAGS="$PTHREAD_CFLAGS -D_GNU_SOURCE"
+  ])
 AC_CHECK_LIB(c, pthread_rwlock_init,
   [AC_DEFINE(HAVE_PTHREAD_RWLOCK_INIT_IN_THREAD_LIB,1,[Define if pthread_rwlock_init is provided in the thread library.])])
 LIBS="$old_LIBS"
diff -ru krb5-1.4.3.orig/src/configure.in krb5-1.4.3/src/configure.in
--- krb5-1.4.3.orig/src/configure.in	2005-07-18 18:12:43.000000000 -0400
+++ krb5-1.4.3/src/configure.in	2006-03-26 09:50:16.000000000 -0500
@@ -66,14 +66,7 @@
 dnl for kdc
 AC_CHECK_HEADERS(syslog.h stdarg.h sys/select.h sys/sockio.h ifaddrs.h unistd.h)
 AC_CHECK_FUNCS(openlog syslog closelog strftime vsprintf)
-KRB5_NEED_PROTO([#include <string.h>
-#ifdef HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-/* Solaris 8 declares swab in stdlib.h.  */
-#include <stdlib.h>
-],swab,1)
-dnl
+
 AC_PROG_AWK
 KRB5_AC_INET6
 KRB5_SOCKADDR_SA_LEN
@@ -160,6 +153,18 @@
   fi # tsmissing not empty
 fi # enable_thread_support
 dnl
+# The _GNU_SOURCE for pthread_mutex_attr_setrobust_np creates a clash with 
+# with the swab declaration 
+if echo "$PTHREAD_CFLAGS" | test ! grep _GNU_SOURCE; then
+KRB5_NEED_PROTO([#include <string.h>
+#ifdef HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+/* Solaris 8 declares swab in stdlib.h.  */
+#include <stdlib.h>
+],swab,1)
+fi
+dnl
 HOST_TYPE=$krb5_cv_host
 AC_SUBST(HOST_TYPE)
 dnl
