diff -urNp gpgme-1.1.3.org/assuan/assuan.h gpgme-1.1.3/assuan/assuan.h
--- gpgme-1.1.3.org/assuan/assuan.h	2007-01-29 22:16:18.000000000 +0200
+++ gpgme-1.1.3/assuan/assuan.h	2007-02-03 20:57:23.000000000 +0200
@@ -24,6 +24,7 @@
 
 #include <stdio.h>
 #include <sys/types.h>
+#include <sys/socket.h>
 #include <unistd.h>
 
 
diff -urNp gpgme-1.1.3.org/assuan/funopen.c gpgme-1.1.3/assuan/funopen.c
--- gpgme-1.1.3.org/assuan/funopen.c	2007-01-29 22:16:19.000000000 +0200
+++ gpgme-1.1.3/assuan/funopen.c	2007-02-03 20:57:23.000000000 +0200
@@ -39,7 +39,7 @@
   cookie instead of the fiel descripor.
 */
 
-
+#ifndef HAVE_FUNOPEN
 #ifdef HAVE_FOPENCOOKIE
 FILE *
 _assuan_funopen(void *cookie,
@@ -62,3 +62,4 @@ _assuan_funopen(void *cookie,
 #else
 #error No known way to implement funopen.
 #endif
+#endif
