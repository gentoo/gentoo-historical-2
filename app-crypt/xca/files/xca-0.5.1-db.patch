diff -urNp xca-0.5.1.org/widgets/MainWindow.cpp xca-0.5.1/widgets/MainWindow.cpp
--- xca-0.5.1.org/widgets/MainWindow.cpp	2004-06-14 00:22:37.000000000 +0300
+++ xca-0.5.1/widgets/MainWindow.cpp	2006-10-29 00:42:07.000000000 +0200
@@ -445,7 +445,11 @@ void MainWindow::Error(errorEx &err)
 	}
 }
 
+#if DB_VERSION_MINOR < 3
 void MainWindow::dberr(const char *errpfx, char *msg)
+#else
+void MainWindow::dberr(const DbEnv *dbEnv, const char *errpfx, const char *msg)
+#endif
 {
 	errorEx e(QString(errpfx) + "\n" + msg);
 	Error(e);
diff -urNp xca-0.5.1.org/widgets/MainWindow.h xca-0.5.1/widgets/MainWindow.h
--- xca-0.5.1.org/widgets/MainWindow.h	2004-04-15 02:36:56.000000000 +0300
+++ xca-0.5.1/widgets/MainWindow.h	2006-10-29 00:43:38.000000000 +0200
@@ -104,7 +104,11 @@ class MainWindow: public MainWindow_UI
 	int initPass();
 	static int passRead(char *buf, int size, int rwflag, void *userdata);
 	static int passWrite(char *buf, int size, int rwflag, void *userdata);
+#if DB_VERSION_MINOR < 3
 	static void dberr(const char *errpfx, char *msg);
+#else
+	static void dberr(const DbEnv *dbEnv, const char *errpfx, const char *msg);
+#endif
 	static NewX509 *newX509();
 	static QString md5passwd(const char *pass);
 	static void Error(errorEx &err);
