diff -ruN phpwebsite-0.9.3-1-full-orig/core/EZform.php phpwebsite-0.9.3-1-full/core/EZform.php
--- phpwebsite-0.9.3-1-full-orig/core/EZform.php	2003-08-19 14:16:28.000000000 -0500
+++ phpwebsite-0.9.3-1-full/core/EZform.php	2003-10-22 12:44:41.000000000 -0500
@@ -11,6 +11,7 @@
 define("MAX_IMAGE_SIZE", 80000);
 
 require_once PHPWS_SOURCE_DIR . "core/EZelement.php";
+require_once("Date.php");
 
 /**
  * Creates HTML form elements and/or an entire form
@@ -34,7 +35,7 @@
  *
  * For many form elements, that may be all you need.
  *
- * @version $Id: phpwebsite-0.9.3-1-supplemental.patch,v 1.1 2003/11/02 16:16:51 mholzer Exp $
+ * @version $Id: phpwebsite-0.9.3-1-supplemental.patch,v 1.1 2003/11/02 16:16:51 mholzer Exp $
  * @author Matthew McNaney <matt@NOSPAM.tux.appstate.edu>
  * @author Don Seiler <don@NOSPAM.seiler.us>
  * @package Core
@@ -410,7 +411,6 @@
    * @param string name         Name of element to set the type
    */
   function reindexValue($name){
-    //    echo phpws_debug::testobject($this);
     if (!$this->testName($name)
 	|| ($this->_elements[$name]->type != "multiple" && $this->_elements[$name]->type != "select")
 	|| !is_array($this->_elements[$name]->value))
@@ -540,9 +540,9 @@
 
     if (is_array($element)){
       foreach ($element as $data)
-	$formElement .= $data;
-      return $formElements;
-    } else
+	$formElements[] = $data;
+      return implode("", $formElements);
+    } else 
       return $element;
   }
 
@@ -886,20 +886,23 @@
         $match_m = NULL;
         $match_d = NULL;
         if (is_null($match) && !$useBlanks) {
-            $match = time();
-            $match_y = date("Y", $match);
-            $match_m = date("n", $match);
-            $match_d = date("j", $match);
+            $mdate = new Date();
+            $match_y = $mdate->format("%Y");
+            $match_m = $mdate->format("%m");
+            $match_d = $mdate->format("%d");
         } elseif (is_null($match) && $useBlanks) {
             $match_y = NULL;
             $match_m = NULL;
             $match_d = NULL;
         } else {
             if(empty($match))
-                $match = time();
-            $match_y = date("Y", $match);
-            $match_m = date("n", $match);
-            $match_d = date("j", $match);
+                $mdate = new Date();
+            else
+                $mdate = new Date($match);
+
+            $match_y = $mdate->format("%Y");
+            $match_m = $mdate->format("%m");
+            $match_d = $mdate->format("%d");
         }
 
         if(!$textYear) {
@@ -1000,16 +1003,17 @@
         $match_h = NULL;
         $match_m = NULL;
         $match_ampm = NULL;
-        if (is_null($match) || empty($match)) {
-            $match = time();
-        }
+        if(empty($match))
+            $mtime = new Date();
+        else
+            $mtime = new Date($match);
 
         if($military)
-            $match_h = date("G", $match);
+            $match_h = $mtime->format("%H");
         else
-            $match_h = date("g", $match);
-        $match_m = date("i", $match);
-        $match_ampm = date("A", $match);
+            $match_h = $mtime->format("%I");
+        $match_m = $mtime->format("%M");
+        $match_ampm = $mtime->format("%P");
 
         $ampm = array(0=>"AM", 1=>"PM");
         if($match_ampm == "AM")
diff -ruN phpwebsite-0.9.3-1-full-orig/core/Template.php phpwebsite-0.9.3-1-full/core/Template.php
--- phpwebsite-0.9.3-1-full-orig/core/Template.php	2003-05-01 08:29:08.000000000 -0500
+++ phpwebsite-0.9.3-1-full/core/Template.php	2003-10-29 10:08:00.000000000 -0600
@@ -155,7 +155,7 @@
     /* If var $template is a string process the string as the template */
     /* var $template is a filename, so get path to the file */
     if ($defaultDir){
-      $templateDir = $this->getTemplateDir($module, $template);
+      $templateDir = PHPWS_Template::getTemplateDir($module, $template);
       if($templateDir) {
 	$tpl = new HTML_Template_IT($templateDir);
 	$tpl->loadTemplatefile($template, TRUE, TRUE);
diff -ruN phpwebsite-0.9.3-1-full-orig/js/check_all.php phpwebsite-0.9.3-1-full/js/check_all.php
--- phpwebsite-0.9.3-1-full-orig/js/check_all.php	2003-05-08 14:41:52.000000000 -0500
+++ phpwebsite-0.9.3-1-full/js/check_all.php	2003-10-31 14:01:40.000000000 -0600
@@ -1,7 +1,7 @@
 <?php
 //Code from SquirrelMail
 
-$this->js_func[] = "
+$GLOBALS["core"]->js_func[] = "
 function CheckAll() {
    for (var i = 0; i < document.$form_name.elements.length; i++) {
        if( document.$form_name.elements[i].type == 'checkbox' ) {
@@ -13,4 +13,4 @@
 
 $js = "<a href=\"#\" onclick=\"CheckAll()\" >Toggle All</a>";
 
-?>
\ No newline at end of file
+?>
diff -ruN phpwebsite-0.9.3-1-full-orig/js/confirm.php phpwebsite-0.9.3-1-full/js/confirm.php
--- phpwebsite-0.9.3-1-full-orig/js/confirm.php	2003-02-04 10:10:47.000000000 -0600
+++ phpwebsite-0.9.3-1-full/js/confirm.php	2003-10-31 14:01:53.000000000 -0600
@@ -1,7 +1,7 @@
 <?php
 
 
-$this->js_func[] = "
+$GLOBALS["core"]->js_func[] = "
 function confirmData_" . $section_name . "()
 {
 	if (confirm(\"$message\\nOK = YES, CANCEL = NO\"))
@@ -10,4 +10,4 @@
 
 $js = $this->formButton($name, $value, "confirmData_" . $section_name . "();");
 
-?>
\ No newline at end of file
+?>
diff -ruN phpwebsite-0.9.3-1-full-orig/js/wysiwyg.php phpwebsite-0.9.3-1-full/js/wysiwyg.php
--- phpwebsite-0.9.3-1-full-orig/js/wysiwyg.php	2003-03-17 14:57:33.000000000 -0600
+++ phpwebsite-0.9.3-1-full/js/wysiwyg.php	2003-10-31 13:58:26.000000000 -0600
@@ -1,6 +1,6 @@
 <?php
 
-$this->js_func[] = "
+$GLOBALS["core"]->js_func[] = "
 
 var body=0;
 var opcode='';
@@ -73,4 +73,4 @@
 $js .= "<a href=\"#".$section_name."\" onclick=\"".$section_name."_addLink()\">" . phpws_text::imageTag($this->source_http ."js/wysiwyg/link.gif", "Link", 21, 20) . "</a>\n";
 $js .= "<a href=\"#".$section_name."\" onclick=\"".$section_name."_addBreak()\">" . phpws_text::imageTag($this->source_http ."js/wysiwyg/break.gif", "Break", 20, 20) . "</a><br />\n";
 
-?>
\ No newline at end of file
+?>
diff -ruN phpwebsite-0.9.3-1-full-orig/mod/calendar/class/Display.php phpwebsite-0.9.3-1-full/mod/calendar/class/Display.php
--- phpwebsite-0.9.3-1-full-orig/mod/calendar/class/Display.php	2003-07-01 12:52:07.000000000 -0500
+++ phpwebsite-0.9.3-1-full/mod/calendar/class/Display.php	2003-10-22 12:45:41.000000000 -0500
@@ -1,7 +1,7 @@
 <?php
 
 define("VIEW_TTL", 300);
-require ("Date.php");
+require_once("Date.php");
 class PHPWS_Calendar_Display{
 
   var $startDate;
@@ -843,4 +843,4 @@
 
 }
 
-?>
\ No newline at end of file
+?>
