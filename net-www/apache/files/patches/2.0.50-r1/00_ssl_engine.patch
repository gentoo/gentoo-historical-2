--- httpd-2.0/modules/ssl/ssl_engine_io.c	2004/07/13 18:11:22	1.124
+++ httpd-2.0/modules/ssl/ssl_engine_io.c	2004/08/11 13:19:24	1.125
@@ -589,6 +589,10 @@
     while (1) {
 
         if (!inctx->filter_ctx->pssl) {
+            /* Ensure a non-zero error code is returned */
+            if (inctx->rc == APR_SUCCESS) {
+                inctx->rc = APR_EGENERAL;
+            }
             break;
         }
 

