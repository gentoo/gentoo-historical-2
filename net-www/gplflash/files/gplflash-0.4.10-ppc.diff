--- Jpeg/Makefile.orig	2003-03-17 21:02:31.000000000 -0600
+++ Jpeg/Makefile	2003-03-17 21:02:37.000000000 -0600
@@ -20,7 +20,7 @@
 mandir = $(prefix)/man/man$(manext)
 
 # You may need to adjust these cc options:
-CFLAGS= -O2  -I$(srcdir)
+CFLAGS= -O2  -I$(srcdir) -shared -fPIC
 # Generally, we recommend defining any configuration symbols in jconfig.h,
 # NOT via -D switches here.
 # However, any special defines for ansi2knr.c may be included here:
--- Lib/Makefile.orig	2003-03-17 21:03:38.000000000 -0600
+++ Lib/Makefile	2003-03-17 21:03:17.000000000 -0600
@@ -1,6 +1,6 @@
-CPPFLAGS=-I../Jpeg -I../Zlib
+CPPFLAGS=-I../Jpeg -I../Zlib
 # Comment out the following line if you use egcs :
-CXXFLAGS=-O3 -Wall -fno-rtti -fno-exceptions
+CXXFLAGS=-O3 -Wall -fno-rtti -fno-exceptions -shared -fPIC
 
 INCLUDES= adpcm.h        cxform.h       graphic.h      script.h       sqrt.h\
 	bitmap.h       displaylist.h  matrix.h       shape.h        swf.h\
--- Zlib/Makefile.orig	2003-03-17 21:03:50.000000000 -0600
+++ Zlib/Makefile	2003-03-17 21:04:07.000000000 -0600
@@ -2,7 +2,7 @@
 # Copyright (C) 1995-1998 Jean-loup Gailly.
 # For conditions of distribution and use, see copyright notice in zlib.h 
 
-CFLAGS=-O3 -DHAVE_UNISTD_H -DUSE_MMAP
+CFLAGS=-O3 -DHAVE_UNISTD_H -DUSE_MMAP -shared -fPIC
 
 CPP=$(CC) -E
 
--- Plugin/Makefile.orig	2003-03-17 21:04:15.000000000 -0600
+++ Plugin/Makefile	2003-03-17 21:04:37.000000000 -0600
@@ -33,9 +33,9 @@
 # FreeBSD
 #SHARED=-Bshareable
 # Linux
-SHARED=-shared
+SHARED=-shared -fPIC
 
-CFLAGS=  $(OPTIMIZER) $(PLUGIN_DEFINES) -I$(FLASH) -I/usr/X11R6/include
+CFLAGS=  $(SHARED) $(OPTIMIZER) $(PLUGIN_DEFINES) -I$(FLASH) -I/usr/X11R6/include
 LDFLAGS= $(FLASH)/libflash.a $(LIBCXX) ../Jpeg/libjpeg.a ../Zlib/libz.a
 
 SRC= plugin.c npunix.c
@@ -46,7 +46,7 @@
 default all: $(SHAREDTARGET)
 
 $(SHAREDTARGET): $(OBJ) $(FLASH)/libflash.a
-	$(LD) $(SHARED) -o $(SHAREDTARGET) $(OBJ) $(LDFLAGS)
+	$(CC) $(SHARED) -o $(SHAREDTARGET) $(OBJ) $(LDFLAGS)
 
 plugin.o: $(FLASH)/flash.h
 
