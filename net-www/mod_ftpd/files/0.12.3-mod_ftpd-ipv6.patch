diff -Nur mod_ftpd-0.12.3.orig/ftp_protocol.c mod_ftpd-0.12.3/ftp_protocol.c
--- mod_ftpd-0.12.3.orig/ftp_protocol.c	2004-05-14 12:35:21.711380077 +0000
+++ mod_ftpd-0.12.3/ftp_protocol.c	2004-05-14 12:39:00.132117006 +0000
@@ -872,8 +872,10 @@
 		family = apr_atoi64(strfamily);
 		if (family == 1) {
 			family = APR_INET;
+#if APR_HAVE_IPV6
 		} else if (family == 2) {
 			family = APR_INET6;
+#endif
 		} else {
 			ap_rprintf(r, FTP_C_INVALID_PROTO" Unsupported Protocol, use (1,2)\r\n");
 			ap_rflush(r);
