#!/bin/sh
#RCUPDATE:2 3 4:70:This line is required for script management

. /etc/rc.d/config/functions
. /etc/rc.d/config/basic

SERVICE="wwwoffled"
opts="start stop restart"

#PIDFILE=/var/run/wwwoffled.pid
EXE=/usr/sbin/wwwoffled

# WARNING: wwwoffled detaches from the console and as it does so it assumes
# a new pid. DO NOT use pidfile tracking, it does NOT work!
# (This was a note to self, who did use pidfile tracking until he learned better)

start() {
    ebegin "Starting $SERVICE"
    start-stop-daemon --start --quiet --exec $EXE -- -c /var/spool/wwwoffle/wwwoffle.conf
    eend $? "Started $SERVICE." "Error starting $SERVICE."
}

stop() {
    ebegin "Stopping $SERVICE"
    start-stop-daemon --stop --quiet --exec $EXE
    eend $? "Stopped $SERVICE." "Error stopping $SERVICE."
}

restart() {
    stop
    sleep 1s
    start
}

doservice ${@}
