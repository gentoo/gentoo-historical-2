--- tracker-0.5.3/configure.in	2006-12-23 19:43:06.000000000 -0600
+++ tracker-0.5.3/configure.in	2007-01-09 22:03:01.000000000 -0600
@@ -67,6 +67,28 @@
 AC_SUBST(LIBPNG_CFLAGS)
 AC_SUBST(LIBPNG_LIBS)
 
+# Check for ImageMagick (needed for the image thumbnailers)
+AC_CHECK_PROG([MAGICK_CONFIG], [Magick-config], [Magick-config], "")
+
+if test "x$MAGICK_CONFIG" = "x$MAGICK_CONFIG" ; then
+   AC_MSG_CHECKING([imagemagick >= 5.2.1])
+
+   MAGICK_VERSION=`Magick-config --version`
+   case $MAGICK_VERSION in
+      [[01234]] | [[01234]].* | 5.[[01]]* | 5.2.0* )
+         AC_MSG_RESULT(no($MAGICK_VERSION))
+         AC_MSG_ERROR([*** Version 5.2.1 or higher is required.])
+      ;;
+      *)
+         AC_MSG_RESULT(yes($MAGICK_VERSION))
+      ;;
+   esac
+else
+   AC_MSG_CHECKING([imagemagick >= 5.2.1])
+   AC_MSG_RESULT([no])
+   AC_MSG_ERROR([*** ImageMagick Version 5.2.1 or higher is required.])
+fi
+
 ####################################################################
 # Compiler warning checks
 ####################################################################
