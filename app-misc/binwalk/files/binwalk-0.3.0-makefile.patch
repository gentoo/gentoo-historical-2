--- binwalk-0.3.0/src/Makefile.orig
+++ binwalk-0.3.0/src/Makefile
@@ -7,7 +7,7 @@
 OUTDIR=../bin
 
 $(TARGET): md5.o mparse.o
-	$(CC) $(TARGET).c -o $(TARGET) *.o -lmagic -lz $(CFLAGS)
+	$(CC) $(TARGET).c -o $(TARGET) *.o -lmagic -lz $(CFLAGS) $(LDFLAGS)
 	cp $(TARGET) $(OUTDIR)
 
 md5.o:
@@ -17,12 +17,13 @@
 	$(CC) -c mparse.c $(CFLAGS)
 
 install:
-	if ! test -d $(ETC); then mkdir $(ETC); fi
-	cp $(MAGIC) $(ETC)/$(MAGIC)
-	cp $(OUTDIR)/$(TARGET) $(BIN)/$(TARGET)
+	if ! test -d $(DESTDIR)$(ETC); then mkdir -p $(DESTDIR)$(ETC); fi
+	if ! test -d $(DESTDIR)$(BIN); then mkdir -p $(DESTDIR)$(BIN); fi
+	cp $(MAGIC) $(DESTDIR)$(ETC)/$(MAGIC)
+	cp $(OUTDIR)/$(TARGET) $(DESTDIR)$(BIN)/$(TARGET)
 
 remove:
-	rm -rf $(ETC) $(BIN)/$(TARGET)
+	rm -rf $(DESTDIR)$(ETC) $(DESTDIR)$(BIN)/$(TARGET)
 
 clean:
 	rm -f $(TARGET) *.o
