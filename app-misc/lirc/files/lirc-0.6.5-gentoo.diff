diff -ur lirc-0.6.5.orig/daemons/Makefile.am lirc-0.6.5/daemons/Makefile.am
--- lirc-0.6.5.orig/daemons/Makefile.am	Fri Nov  9 22:41:47 2001
+++ lirc-0.6.5/daemons/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -79,8 +79,8 @@
 	test "$(lircmd_conf)" = "" || test -e $(DESTDIR)$(sysconfdir)/lircmd.conf || ($(mkinstalldirs) $(DESTDIR)$(sysconfdir) && $(INSTALL_DATA) $(top_srcdir)/remotes/$(lircmd_conf) $(DESTDIR)$(sysconfdir)/lircmd.conf)
 
 mkdev:
-	test -e $(DESTDIR)$(devdir)/lircd || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lircd p)
-	test -e $(DESTDIR)$(devdir)/lircm || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lircm p)
+	echo "have devfs - no need to mknod"
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-$(RM) $(DESTDIR)$(devdir)/lircd
diff -ur lirc-0.6.5.orig/daemons/Makefile.in lirc-0.6.5/daemons/Makefile.in
--- lirc-0.6.5.orig/daemons/Makefile.in	Sat Jan 26 17:55:14 2002
+++ lirc-0.6.5/daemons/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -496,8 +496,8 @@
 	test "$(lircmd_conf)" = "" || test -e $(DESTDIR)$(sysconfdir)/lircmd.conf || ($(mkinstalldirs) $(DESTDIR)$(sysconfdir) && $(INSTALL_DATA) $(top_srcdir)/remotes/$(lircmd_conf) $(DESTDIR)$(sysconfdir)/lircmd.conf)
 
 mkdev:
-	test -e $(DESTDIR)$(devdir)/lircd || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lircd p)
-	test -e $(DESTDIR)$(devdir)/lircm || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lircm p)
+	echo "have devfs - no need to mknod"
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-$(RM) $(DESTDIR)$(devdir)/lircd
diff -ur lirc-0.6.5.orig/daemons/receive.c lirc-0.6.5/daemons/receive.c
--- lirc-0.6.5.orig/daemons/receive.c	Sun Nov 18 15:14:24 2001
+++ lirc-0.6.5/daemons/receive.c	Sun Jun  2 14:07:50 2002
@@ -17,6 +17,7 @@
 #include "hardware.h"
 #include "lircd.h"
 #include "receive.h"
+#include <limits.h>
 
 extern struct hardware hw;
 extern struct ir_remote *last_remote;
diff -ur lirc-0.6.5.orig/drivers/Makefile.am lirc-0.6.5/drivers/Makefile.am
--- lirc-0.6.5.orig/drivers/Makefile.am	Wed Dec 12 23:40:43 2001
+++ lirc-0.6.5/drivers/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -23,7 +23,7 @@
 	-test "@irtty@" = "" || $(RM) $(DESTDIR)$(devdir)/lirc
 
 mkdev:
-	test "@driver@" != "mediafocusI" || test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	test "@driver@" != "mediafocusI" || echo "have devfs - no need to mknod"
 
 rmdev:
 	-test "@driver@" != "mediafocusI" || test -c $(DESTDIR)$(devdir)/lirc || $(RM) $(DESTDIR)$(devdir)/lirc
diff -ur lirc-0.6.5.orig/drivers/Makefile.in lirc-0.6.5/drivers/Makefile.in
--- lirc-0.6.5.orig/drivers/Makefile.in	Sat Jan 26 17:54:26 2002
+++ lirc-0.6.5/drivers/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -317,7 +317,7 @@
 	-test "@irtty@" = "" || $(RM) $(DESTDIR)$(devdir)/lirc
 
 mkdev:
-	test "@driver@" != "mediafocusI" || test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	test "@driver@" != "mediafocusI" || echo "have devfs - no need to mknod"
 
 rmdev:
 	-test "@driver@" != "mediafocusI" || test -c $(DESTDIR)$(devdir)/lirc || $(RM) $(DESTDIR)$(devdir)/lirc
diff -ur lirc-0.6.5.orig/drivers/lirc.h lirc-0.6.5/drivers/lirc.h
--- lirc-0.6.5.orig/drivers/lirc.h	Sat Dec  8 16:07:03 2001
+++ lirc-0.6.5/drivers/lirc.h	Sun Jun  2 14:07:50 2002
@@ -3,7 +3,7 @@
 #ifndef _LINUX_LIRC_H
 #define _LINUX_LIRC_H
 
-#include <limits.h>
+/* #include <limits.h> */
 
 #include <linux/ioctl.h>
 #include <asm/types.h>
@@ -11,11 +11,11 @@
 #define PULSE_BIT  0x01000000
 #define PULSE_MASK 0x00FFFFFF
 
-#if INT_MAX>=PULSE_BIT
+/*#if INT_MAX>=PULSE_BIT*/
 typedef int lirc_t;
-#else
+/*#else
 #error "No appropriate type for lirc data available."
-#endif
+#endif*/
 
 
 /*
diff -ur lirc-0.6.5.orig/drivers/lirc_dev/Makefile.am lirc-0.6.5/drivers/lirc_dev/Makefile.am
--- lirc-0.6.5.orig/drivers/lirc_dev/Makefile.am	Tue Nov 27 19:34:58 2001
+++ lirc-0.6.5/drivers/lirc_dev/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -31,13 +31,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 CLEANFILES = $(module_DATA) .$(module_DATA).flags *~
 
diff -ur lirc-0.6.5.orig/drivers/lirc_dev/Makefile.in lirc-0.6.5/drivers/lirc_dev/Makefile.in
--- lirc-0.6.5.orig/drivers/lirc_dev/Makefile.in	Sat Jan 26 17:54:52 2002
+++ lirc-0.6.5/drivers/lirc_dev/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -343,13 +343,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 include $(KERNEL_LOCATION)/Rules.make
 
diff -ur lirc-0.6.5.orig/drivers/lirc_i2c/lirc_i2c.c lirc-0.6.5/drivers/lirc_i2c/lirc_i2c.c
--- lirc-0.6.5.orig/drivers/lirc_i2c/lirc_i2c.c	Wed Dec 12 23:27:39 2001
+++ lirc-0.6.5/drivers/lirc_i2c/lirc_i2c.c	Sun Jun  2 14:07:50 2002
@@ -45,7 +45,8 @@
 #include <linux/timer.h>
 #include <linux/delay.h>
 #include <linux/errno.h>
-#include <linux/malloc.h>
+/*#include <linux/malloc.h>*/
+#include <linux/slab.h>
 #include <linux/i2c.h>
 
 #ifndef I2C_CLIENT_END
diff -ur lirc-0.6.5.orig/drivers/lirc_it87/Makefile.am lirc-0.6.5/drivers/lirc_it87/Makefile.am
--- lirc-0.6.5.orig/drivers/lirc_it87/Makefile.am	Wed Dec 12 23:40:43 2001
+++ lirc-0.6.5/drivers/lirc_it87/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -31,13 +31,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 CLEANFILES = $(module_DATA) .$(module_DATA).flags *~
 
diff -ur lirc-0.6.5.orig/drivers/lirc_it87/Makefile.in lirc-0.6.5/drivers/lirc_it87/Makefile.in
--- lirc-0.6.5.orig/drivers/lirc_it87/Makefile.in	Sat Jan 26 17:55:05 2002
+++ lirc-0.6.5/drivers/lirc_it87/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -343,13 +343,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 include $(KERNEL_LOCATION)/Rules.make
 
diff -ur lirc-0.6.5.orig/drivers/lirc_parallel/Makefile.am lirc-0.6.5/drivers/lirc_parallel/Makefile.am
--- lirc-0.6.5.orig/drivers/lirc_parallel/Makefile.am	Tue Nov 27 19:34:59 2001
+++ lirc-0.6.5/drivers/lirc_parallel/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -30,13 +30,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 CLEANFILES = $(module_DATA) .$(module_DATA).flags *~
 
diff -ur lirc-0.6.5.orig/drivers/lirc_parallel/Makefile.in lirc-0.6.5/drivers/lirc_parallel/Makefile.in
--- lirc-0.6.5.orig/drivers/lirc_parallel/Makefile.in	Sat Jan 26 17:54:36 2002
+++ lirc-0.6.5/drivers/lirc_parallel/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -342,13 +342,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 include $(KERNEL_LOCATION)/Rules.make
 
diff -ur lirc-0.6.5.orig/drivers/lirc_serial/Makefile.am lirc-0.6.5/drivers/lirc_serial/Makefile.am
--- lirc-0.6.5.orig/drivers/lirc_serial/Makefile.am	Tue Nov 27 19:34:59 2001
+++ lirc-0.6.5/drivers/lirc_serial/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -30,13 +30,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 CLEANFILES = $(module_DATA) .$(module_DATA).flags *~
 
diff -ur lirc-0.6.5.orig/drivers/lirc_serial/Makefile.in lirc-0.6.5/drivers/lirc_serial/Makefile.in
--- lirc-0.6.5.orig/drivers/lirc_serial/Makefile.in	Sat Jan 26 17:54:31 2002
+++ lirc-0.6.5/drivers/lirc_serial/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -342,13 +342,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 include $(KERNEL_LOCATION)/Rules.make
 
diff -ur lirc-0.6.5.orig/drivers/lirc_sir/Makefile.am lirc-0.6.5/drivers/lirc_sir/Makefile.am
--- lirc-0.6.5.orig/drivers/lirc_sir/Makefile.am	Tue Nov 27 19:34:59 2001
+++ lirc-0.6.5/drivers/lirc_sir/Makefile.am	Sun Jun  2 14:08:26 2002
@@ -30,13 +30,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 CLEANFILES = $(module_DATA) .$(module_DATA).flags *~
 
diff -ur lirc-0.6.5.orig/drivers/lirc_sir/Makefile.in lirc-0.6.5/drivers/lirc_sir/Makefile.in
--- lirc-0.6.5.orig/drivers/lirc_sir/Makefile.in	Sat Jan 26 17:54:47 2002
+++ lirc-0.6.5/drivers/lirc_sir/Makefile.in	Sun Jun  2 14:08:26 2002
@@ -342,13 +342,13 @@
 uninstall-local: rmdev
 
 mkdev:
-	test -c $(DESTDIR)$(devdir)/lirc || ($(mkinstalldirs) $(DESTDIR)$(devdir) && @mknod@ $(DESTDIR)$(devdir)/lirc c @lirc_major@ 0)
+	echo "have devfs - no need to mknod"
 
 rmdev:
 	-test -c $(DESTDIR)$(devdir)/lirc && $(RM) $(DESTDIR)$(devdir)/lirc
 
 install-data-local:
-	-@depmod@ -a
+	echo "will do depmod -a later"
 
 include $(KERNEL_LOCATION)/Rules.make
 
