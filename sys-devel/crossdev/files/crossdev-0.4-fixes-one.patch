Index: crossdev
===================================================================
RCS file: /home/cvsroot/gentoo/users/kumba/crossdev/crossdev,v
retrieving revision 1.1
retrieving revision 1.3
diff -u -p -r1.1 -r1.3
--- crossdev.sh		19 Feb 2004 09:35:37 -0000	1.1
+++ crossdev.sh		26 Feb 2004 08:03:52 -0000	1.3
@@ -281,7 +282,7 @@ CheckSandbox() {
 					;;
 				best_visible)
 					export ACCEPT_KEYWORDS="$4"
-					eval "$1=$(${PORTAGEQ_LOC} $2 $3)"
+					eval "$1=$(${PORTAGEQ_LOC} $2 $3 | tail -n 1)"
 					unset ACCEPT_KEYWORDS
 					;;
 			esac
@@ -338,7 +339,7 @@ CheckSandbox() {
 					;;
 				best_visible)
 					export ACCEPT_KEYWORDS="$4"
-					eval "$1=$(${PORTAGEQ_LOC} $2 $3)"
+					eval "$1=$(${PORTAGEQ_LOC} $2 $3 | tail -n 1)"
 					unset ACCEPT_KEYWORDS
 					;;
 			esac
@@ -1355,6 +1356,9 @@ InstallGccBootstrap() {
 
 	#// if .installed exists, skip, otherwise install
 	if [ ! -f ".installed" ]; then
+		#// Because we use /usr/headers for gcc, we sometimes get garbage headers we don't want.
+		#// So we remove them.
+		find gcc/include -type l -exec rm -f '{}' \;
 		showInfo "Installing ${GCC_VER} (bootstrap)..."
 		make install || showError "${func_name}: Failed to run 'make install'!"
 		touch .installed
@@ -1585,6 +1589,10 @@ InstallGccFull() {
 
 	#// if .installed exists, skip, otherwise install
 	if [ ! -f ".installed" ]; then
+		#// Because we use /usr/headers for gcc, we sometimes get garbage headers we don't want.
+		#// So we remove them.
+		find gcc/include -type l -exec rm -f '{}' \;
+
 		showInfo "Installing ${GCC_VER} (full)..."
 		make install || showError "${func_name}: Failed to run 'make install'!"
 		touch .installed
