--- gcc/config/sh/linux.h
+++ gcc/config/sh/linux.h
@@ -154,6 +154,7 @@
 /* Do code reading to identify a signal frame, and set the frame
    state data appropriately.  See unwind-dw2.c for the structs.  */
 
+#ifndef inhibit_libc
 #ifdef IN_LIBGCC2
 #include <signal.h>
 #include <sys/ucontext.h>
@@ -304,6 +305,7 @@
 
 #endif /* defined (__SH5__) */
 #endif /* IN_LIBGCC2 */
+#endif /* inhibit libc */
 
 /* For SH3 and SH4, we use a slot of the unwind frame which correspond
    to a fake register number 16 as a placeholder for the return address
--- gcc/config/rs6000/linux.h
+++ gcc/config/rs6000/linux.h
@@ -111,6 +111,7 @@
 /* Do code reading to identify a signal frame, and set the frame
    state data appropriately.  See unwind-dw2.c for the structs.  */
 
+#ifndef inhibit_libc
 #ifdef IN_LIBGCC2
 #include <signal.h>
 
@@ -194,3 +195,4 @@
     (FS)->retaddr_column = CR0_REGNO;					\
     goto SUCCESS;							\
   } while (0)
+#endif
