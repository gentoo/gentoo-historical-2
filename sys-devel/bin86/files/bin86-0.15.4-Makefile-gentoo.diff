--- Makefile.orig	Tue Feb 27 14:27:10 2001
+++ Makefile	Tue Feb 27 14:27:11 2001
@@ -1,15 +1,17 @@
 
-CFLAGS=-O2 -D_POSIX_SOURCE
+CFLAGS+=-D_POSIX_SOURCE
 LDFLAGS=
 DIRS=ld as
 
-PREFIX=/usr/local
+PREFIX=/usr
 BINDIR=$(PREFIX)/bin
 LIBDIR=$(PREFIX)/lib
-MANDIR=$(PREFIX)/man/man1
+MANDIR=$(PREFIX)/share/man/man1
 SUF=86
 
-INSTALL_OPTS=-m 755 -s
+DESTDIR=
+
+INSTALL_OPTS=-m 755
 MAN_OPTS    =-m 644
 
 MFLAGS= "LIBS=$(LIBS)" \
@@ -25,14 +27,16 @@
 	 done
 
 install: all
-	install $(INSTALL_OPTS) as/as86       $(BINDIR)/as$(SUF)
-	install $(INSTALL_OPTS) as/as86_encap $(BINDIR)/as$(SUF)_encap
-	install $(INSTALL_OPTS) ld/ld86       $(BINDIR)/ld$(SUF)
-	install $(INSTALL_OPTS) ld/objdump86  $(BINDIR)/objdump$(SUF)
-	install $(MAN_OPTS)     man/*.1       $(MANDIR)
-	ln -sf                  objdump$(SUF) $(BINDIR)/nm$(SUF)
-	ln -sf                  objdump$(SUF) $(BINDIR)/size$(SUF)
-	ln -sf                  as86.1        $(MANDIR)/as86_encap.1
+	install $(INSTALL_OPTS) -d $(DESTDIR)/$(BINDIR)
+	install $(INSTALL_OPTS) -d $(DESTDIR)/$(MANDIR)
+	install $(INSTALL_OPTS) as/as86       $(DESTDIR)/$(BINDIR)/as$(SUF)
+	install $(INSTALL_OPTS) as/as86_encap $(DESTDIR)/$(BINDIR)/as$(SUF)_encap
+	install $(INSTALL_OPTS) ld/ld86       $(DESTDIR)/$(BINDIR)/ld$(SUF)
+	install $(INSTALL_OPTS) ld/objdump86  $(DESTDIR)/$(BINDIR)/objdump$(SUF)
+	install $(MAN_OPTS)     man/*.1       $(DESTDIR)/$(MANDIR)
+	ln -sf                  objdump$(SUF) $(DESTDIR)/$(BINDIR)/nm$(SUF)
+	ln -sf                  objdump$(SUF) $(DESTDIR)/$(BINDIR)/size$(SUF)
+	ln -sf                  as86.1        $(DESTDIR)/$(MANDIR)/as86_encap.1
 
 depend clean clobber:
 	set -e ; for d in $(DIRS); do \
