--- src/Makefile.orig	2001-12-12 11:53:50.000000000 +0100
+++ src/Makefile	2002-05-29 20:49:36.000000000 +0200
@@ -132,28 +132,26 @@
 	rm -f testcc.ml
 
 install:
-	if test -d $(INSTALLDIR); then : ; else mkdir -p $(INSTALLDIR); fi
-	if test `grep -s -c '^$(INSTALLDIR)$$' $(LIBDIR)/ld.conf` = 0; then \
-	    echo $(INSTALLDIR) >> $(LIBDIR)/ld.conf; \
-	fi
-	cp $(ALLOBJS:.cmo=.cmi) $(THOBJS:.cmo=.cmi) $(INSTALLDIR)
-	cp -p *.mli $(INSTALLDIR)
-	cp -p $(ALLOBJS:.cmo=.ml) $(ALLTHOBJS:.cmo=.ml) $(INSTALLDIR)
-	cp $(MLLIBS) $(THOBJS) $(INITOBJS) $(THINITOBJS) $(INSTALLDIR)
-	cp $(CLIBS) $(INSTALLDIR)
-	cp lablgtktop lablgtktop_t varcc $(INSTALLDIR)
-	cp -p *.h $(INSTALLDIR)
-	cp lablgtk $(BINDIR)
-	if test -f dlllablgtk.so; then cp $(CLIBS:lib%.a=dll%.so) $(INSTALLDIR); fi
-	if test -f lablgladecc; then cp lablgladecc $(BINDIR); fi
+	mkdir -p $(DESTDIR)$(INSTALLDIR)
+	mkdir -p $(DESTDIR)$(BINDIR)
+	cp $(ALLOBJS:.cmo=.cmi) $(THOBJS:.cmo=.cmi) $(DESTDIR)$(INSTALLDIR)
+	cp -p *.mli $(DESTDIR)$(INSTALLDIR)
+	cp -p $(ALLOBJS:.cmo=.ml) $(ALLTHOBJS:.cmo=.ml) $(DESTDIR)$(INSTALLDIR)
+	cp $(MLLIBS) $(THOBJS) $(INITOBJS) $(THINITOBJS) $(DESTDIR)$(INSTALLDIR)
+	cp $(CLIBS) $(DESTDIR)$(INSTALLDIR)
+	cp lablgtktop lablgtktop_t varcc $(DESTDIR)$(INSTALLDIR)
+	cp -p *.h $(DESTDIR)$(INSTALLDIR)
+	cp lablgtk $(DESTDIR)$(BINDIR)
+	if test -f dlllablgtk.so; then cp $(CLIBS:lib%.a=dll%.so) $(DESTDIR)$(INSTALLDIR); fi
+	if test -f lablgladecc; then cp lablgladecc $(DESTDIR)$(BINDIR); fi
 	if test -f lablgtk.cmxa; then $(MAKE) installopt; fi
 
 installopt:
-	cp $(MLLIBS:.cma=.cmxa) $(MLLIBS:.cma=.a) $(INSTALLDIR)
-	cp $(ALLOBJS:.cmo=.cmx) $(INSTALLDIR)
-	cp $(INITOBJS:.cmo=.o) $(INSTALLDIR)
+	cp $(MLLIBS:.cma=.cmxa) $(MLLIBS:.cma=.a) $(DESTDIR)$(INSTALLDIR)
+	cp $(ALLOBJS:.cmo=.cmx) $(DESTDIR)$(INSTALLDIR)
+	cp $(INITOBJS:.cmo=.o) $(DESTDIR)$(INSTALLDIR)
 	if test -f gtkThread.cmx; then \
-	   cp $(THOBJS:.cmo=.cmx) $(THOBJS:.cmo=.o) $(INSTALLDIR); fi
+	   cp $(THOBJS:.cmo=.cmx) $(THOBJS:.cmo=.o) $(DESTDIR)$(INSTALLDIR); fi
 
 lablgtk.cma: $(MLOBJS) $(COBJS)
 	$(LIBRARIAN) -o lablgtk $(MLOBJS) $(COBJS) $(GTKLIBS)
