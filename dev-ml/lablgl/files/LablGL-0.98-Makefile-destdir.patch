--- Makefile.orig	Fri Aug  2 16:41:18 2002
+++ Makefile	Fri Aug  2 17:12:13 2002
@@ -30,11 +30,11 @@
 INCLUDES = $(TKINCLUDES) $(GLINCLUDES) $(XINCLUDES)
 LIBS = $(TKLIBS) $(GLLIBS) $(XLIBS)
 LIBDIRS =
 
 
-OCAMLINC=-I +labltk
+OCAMLINC=-I +labltk -I +stublibs
 
 # Files
 LIBOBJS =	raw.cmo \
 		gl.cmo		glLight.cmo	glList.cmo	glMap.cmo \
 		glMat.cmo	glMisc.cmo	glPix.cmo	glClear.cmo \
@@ -153,21 +153,26 @@
 
 glu_tags.c: glu_tags.var
 	./var2switch GLU_ < glu_tags.var > $@
 
 install:
-	@$(MAKE) real-install LIBDIR="$(LIBDIR)"
+	@$(MAKE) real-install LIBDIR="$(LIBDIR)" \
+	INSTALLDIR="$(DESTDIR)$(INSTALLDIR)" \
+	DLLDIR="$(DESTDIR)$(DLLDIR)" \
+	BINDIR="$(DESTDIR)$(BINDIR)"
 
 real-install:
 	if test -d "$(INSTALLDIR)"; then : ; else mkdir -p "$(INSTALLDIR)"; fi
+	if test -d "$(DLLDIR)"; then : ; else mkdir -p "$(DLLDIR)"; fi
+	if test -d "$(BINDIR)"; then : ; else mkdir -p "$(BINDIR)"; fi
 	cp $(MLOBJS:.cmo=.cmi) "$(INSTALLDIR)"
 	cp $(MLOBJS:.cmo=.mli) "$(INSTALLDIR)"
 	cp liblablgl$(XA) lablgl.cma libtogl$(XA) togl.cma $(INSTTOP) "$(INSTALLDIR)"
 	cd "$(INSTALLDIR)" && $(RANLIB) liblablgl$(XA) libtogl$(XA)
 	cp lablgl$(XB) "$(BINDIR)"
-	@if test -f dlllablgl$(XS); then $(MAKE) installdll; fi
-	@if test -f lablgl.cmxa; then $(MAKE) installopt LIBDIR="$(LIBDIR)"; fi
+	@if test -f dlllablgl$(XS); then $(MAKE) DLLDIR="$(DLLDIR)" installdll; fi
+	@if test -f lablgl.cmxa; then $(MAKE) installopt INSTALLDIR="$(INSTALLDIR)" LIBDIR="$(LIBDIR)"; fi
 
 installdll:
 	cp dlllablgl$(XS) dlltogl$(XS) "$(DLLDIR)"
 
 installopt:
