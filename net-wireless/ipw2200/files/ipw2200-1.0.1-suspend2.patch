diff -urp ipw2200-1.0.1/ipw2200.c ipw2200-1.0.1-suspend2/ipw2200.c
--- ipw2200-1.0.1/ipw2200.c	2005-02-08 23:24:04.000000000 +0100
+++ ipw2200-1.0.1-suspend2/ipw2200.c	2005-06-24 23:30:48.000000000 +0200
@@ -7345,7 +7345,7 @@ static int ipw_setup_deferred_work(struc
 {
 	int ret = 0;
 
-#ifdef CONFIG_SOFTWARE_SUSPEND2
+#ifdef PF_SYNCTHREAD
 	priv->workqueue = create_workqueue(DRV_NAME, 0);
 #else
 	priv->workqueue = create_workqueue(DRV_NAME);
