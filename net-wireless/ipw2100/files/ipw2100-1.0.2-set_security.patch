diff -urp ipw2100-1.0.2/ipw2100.c ipw2100-1.0.2-set_security/ipw2100.c
--- ipw2100-1.0.2/ipw2100.c	2004-12-14 07:29:32.000000000 +0100
+++ ipw2100-1.0.2-set_security/ipw2100.c	2004-12-14 19:13:52.031176680 +0100
@@ -5788,7 +5788,7 @@ static int ipw2100_wpa_enable(struct ipw
 	}
 
 	if (ieee->set_security)
-		ieee->set_security(ieee, &sec);
+		ieee->set_security(ieee->dev, &sec);
 	else
 		ret = -EOPNOTSUPP;
 		
@@ -5815,7 +5815,7 @@ static int ipw2100_wpa_set_auth_algs(str
 	}
 
 	if (ieee->set_security)
-		ieee->set_security(ieee, &sec);
+		ieee->set_security(ieee->dev, &sec);
 	else
 		ret = -EOPNOTSUPP;
 		
@@ -6067,7 +6067,7 @@ static int ipw2100_wpa_set_encryption(st
 	}
  done:
 	if (ieee->set_security)
-		ieee->set_security(ieee, &sec);
+		ieee->set_security(ieee->dev, &sec);
 
 	/* Do not reset port if card is in Managed mode since resetting will
 	 * generate new IEEE 802.11 authentication which may end up in looping
