--- libmp3lame/lame.c.orig	2002-12-01 11:01:49.000000000 +0100
+++ libmp3lame/lame.c	2002-12-01 10:45:42.000000000 +0100
@@ -20,7 +20,7 @@
  * Boston, MA 02111-1307, USA.
  */
 
-/* $Id: lame-3.93.0-gentoo.diff,v 1.1 2002/12/01 10:24:59 phoenix Exp $ */
+/* $Id: lame-3.93.0-gentoo.diff,v 1.1 2002/12/01 10:24:59 phoenix Exp $ */
 
 #ifdef HAVE_CONFIG_H
 # include <config.h>
@@ -474,7 +474,7 @@
         gfc->quantization = 1;
         gfc->noise_shaping = 1; /* 2=usually lowers quality */
         gfc->substep_shaping = 2;
-        gfc->noise_shaping_amp = 3;
+        gfc->noise_shaping_amp = 2;
         gfc->noise_shaping_stop = 1;
         gfc->use_best_huffman = 1; /* 2 not yet coded */
     }
--- libmp3lame/psymodel.c.orig	2002-12-01 11:02:47.000000000 +0100
+++ libmp3lame/psymodel.c	2002-12-01 10:45:42.000000000 +0100
@@ -19,7 +19,7 @@
  * Boston, MA 02111-1307, USA.
  */
 
-/* $Id: lame-3.93.0-gentoo.diff,v 1.1 2002/12/01 10:24:59 phoenix Exp $ */
+/* $Id: lame-3.93.0-gentoo.diff,v 1.1 2002/12/01 10:24:59 phoenix Exp $ */
 
 
 /*
@@ -1789,6 +1789,9 @@
 		}
 
 /* 2001-07-13 */
+          thr[b] = Max(1e-6, ecb);
+
+          if (gfp->VBR == vbr_mtrh) {
                 thr[b] = Min( ecb, rpelev_s  * gfc->nb_s1[chn][b] );
                 if (gfc->blocktype_old[chn>1 ? chn-2 : chn] == SHORT_TYPE ) {
                    thr[b] = Min( thr[b], rpelev2_s * gfc->nb_s2[chn][b] );
@@ -1796,6 +1799,7 @@
                 thr[b] = Max( thr[b], 1e-37 );
                 gfc->nb_s2[chn][b] = gfc->nb_s1[chn][b];
                 gfc->nb_s1[chn][b] = ecb;
+          }
 	    }
 	}
 	for ( sb = 0; sb < NBPSY_s; sb++ )

