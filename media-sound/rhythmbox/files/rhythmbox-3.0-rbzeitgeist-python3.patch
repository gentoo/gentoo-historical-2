From 693b013c02d54522e54ad15e980b5f46539888ec Mon Sep 17 00:00:00 2001
From: Nirbheek Chauhan <nirbheek.chauhan@collabora.co.uk>
Date: Sat, 14 Sep 2013 01:47:52 +0530
Subject: [PATCH] plugins/rbzeitgeist: Port to Python3

---
 plugins/rbzeitgeist/rbzeitgeist.py | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/plugins/rbzeitgeist/rbzeitgeist.py b/plugins/rbzeitgeist/rbzeitgeist.py
index 984fd5b..a3a2630 100644
--- a/plugins/rbzeitgeist/rbzeitgeist.py
+++ b/plugins/rbzeitgeist/rbzeitgeist.py
@@ -37,8 +37,8 @@ from zeitgeist.datamodel import Event, Subject, Interpretation, Manifestation
 
 try:
     IFACE = ZeitgeistClient()
-except RuntimeError, e:
-    print "Unable to connect to Zeitgeist, won't send events. Reason: '%s'" %e
+except RuntimeError as e:
+    print("Unable to connect to Zeitgeist, won't send events. Reason: '{0}'".format(e))
     IFACE = None
 
 class ZeitgeistPlugin(GObject.Object, Peas.Activatable):
@@ -46,12 +46,12 @@ class ZeitgeistPlugin(GObject.Object, Peas.Activatable):
     object = GObject.property(type=GObject.Object)
 
     def __init__(self):
-	GObject.Object.__init__(self)
+        GObject.Object.__init__(self)
 
     def do_activate(self):
-        print "Loading Zeitgeist plugin..."
+        print("Loading Zeitgeist plugin...")
         if IFACE is not None:
-	    shell = self.object
+            shell = self.object
             shell_player = shell.props.shell_player
             self.__psc_id = shell_player.connect("playing-song-changed", self.playing_song_changed)
 
@@ -109,7 +109,7 @@ class ZeitgeistPlugin(GObject.Object, Peas.Activatable):
         idle, it means there are no more signals scheduled, so we
         will have already received the eos if it was coming.
         """
-	shell = self.object
+        shell = self.object
         db = shell.props.db
         GLib.idle_add(self.send_to_zeitgeist, db, entry, event_type)
 
@@ -131,16 +131,16 @@ class ZeitgeistPlugin(GObject.Object, Peas.Activatable):
 
             subject = Subject.new_for_values(
                 uri=song["location"],
-                interpretation=unicode(Interpretation.AUDIO),
-                manifestation=unicode(Manifestation.FILE_DATA_OBJECT),
+                interpretation=str(Interpretation.AUDIO),
+                manifestation=str(Manifestation.FILE_DATA_OBJECT),
                 origin=song["location"].rpartition("/")[0],
                 mimetype=uri_mimetype,
                 text=" - ".join([song["title"], song["artist"], song["album"]])
             )
             event = Event.new_for_values(
                 timestamp=int(time.time()*1000),
-                interpretation=unicode(event_type),
-                manifestation=unicode(manifest),
+                interpretation=str(event_type),
+                manifestation=str(manifest),
                 actor="application://rhythmbox.desktop",
                 subjects=[subject,]
             )
@@ -150,9 +150,9 @@ class ZeitgeistPlugin(GObject.Object, Peas.Activatable):
         f.query_info_async(Gio.FILE_ATTRIBUTE_STANDARD_CONTENT_TYPE, Gio.FileQueryInfoFlags.NONE, GLib.PRIORITY_DEFAULT, None, file_info_complete, None)
 
     def do_deactivate(self):
-        print "Deactivating Zeitgeist plugin..."
+        print("Deactivating Zeitgeist plugin...")
         if IFACE is not None:
-	    shell = self.object
+            shell = self.object
             shell_player = shell.props.shell_player
             shell_player.disconnect(self.__psc_id)
             self.__psc_id = None
-- 
1.8.1.5

