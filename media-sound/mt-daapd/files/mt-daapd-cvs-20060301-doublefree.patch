Index: mt-daapd-cvs-20060301/src/db-sql-sqlite3.c
===================================================================
--- mt-daapd-cvs-20060301.orig/src/db-sql-sqlite3.c
+++ mt-daapd-cvs-20060301/src/db-sql-sqlite3.c
@@ -236,6 +236,7 @@ int db_sqlite3_enum_begin_helper(char **
         db_get_error(pe,DB_E_SQL_ERROR,sqlite3_errmsg(db_sqlite3_songs));
         db_sqlite3_unlock();
         sqlite3_free(db_sqlite3_enum_query);
+	db_sqlite3_enum_query = NULL;
         return DB_E_SQL_ERROR;
     }
 
@@ -315,6 +316,7 @@ int db_sqlite3_enum_end(char **pe) {
         free(db_sqlite3_row);
     db_sqlite3_row = NULL;
     sqlite3_free(db_sqlite3_enum_query);
+    db_sqlite3_enum_query=NULL;
 
     err = sqlite3_finalize(db_sqlite3_stmt);
     if(err != SQLITE_OK) {
