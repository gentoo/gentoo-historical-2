--- traverso-0.30.1/src/engine/engine.pro.old	2006-11-27 07:16:26.000000000 +0100
+++ traverso-0.30.1/src/engine/engine.pro	2006-11-27 07:18:39.000000000 +0100
@@ -19,8 +19,6 @@
 	   AudioBus.h \
 	   AudioDeviceThread.h \
 	   Client.h \
-	   AlsaDriver.h \
-	   JackDriver.h \
 	   AudioChannel.h \
 	   Driver.h \
 	   memops.h \
@@ -33,13 +31,16 @@
 	   AudioBus.cpp \
 	   AudioDeviceThread.cpp \
 	   Client.cpp \
-	   AlsaDriver.cpp \
-	   JackDriver.cpp \
 	   Driver.cpp \
 	   AudioChannel.cpp \
 	   memops.cpp \
            AudioPlugin.cpp
 
+contains(DEFINES, ALSA_SUPPORT):SOURCES += AlsaDriver.cpp
+contains(DEFINES, ALSA_SUPPORT):HEADERS += AlsaDriver.h
+contains(DEFINES, JACK_SUPPORT):SOURCES += JackDriver.cpp 
+contains(DEFINES, JACK_SUPPORT):HEADERS += JackDriver.h
+
 unix {
 	contains(DEFINES, SSE_OPTIMIZATIONS):SOURCES += sse_functions.s
 }
--- traverso-0.30.1/src/engine/AudioDevice.cpp.old	2006-11-27 07:10:12.000000000 +0100
+++ traverso-0.30.1/src/engine/AudioDevice.cpp	2006-11-27 07:11:15.000000000 +0100
@@ -27,7 +27,10 @@
 #include "AlsaDriver.h"
 #endif
 
+#if defined (JACK_SUPPORT)
 #include "JackDriver.h"
+#endif
+
 #include "Driver.h"
 #include "Client.h"
 #include "AudioChannel.h"
@@ -398,8 +401,10 @@
 
 trav_time_t AudioDevice::get_cpu_time( )
 {
+#if defined (JACK_SUPPORT)
 	if (driver && m_driverType == "Jack")
 		return ((JackDriver*)driver)->get_cpu_load();
+#endif
 
 	trav_time_t currentTime = get_microseconds();
 	float totaltime = 0;
