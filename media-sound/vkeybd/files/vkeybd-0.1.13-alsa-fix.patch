diff -ur vkeybd/oper_alsa.c vkeybd-fixed/oper_alsa.c
--- vkeybd/oper_alsa.c	2003-01-23 10:02:05.000000000 -0600
+++ vkeybd-fixed/oper_alsa.c	2004-01-23 01:01:22.000000000 -0600
@@ -30,10 +30,14 @@
 #ifdef USE_OLD_ALSA
 #include <sys/asoundlib.h>
 #else
+#include <alsa/version.h>
+# if SND_LIB_MAJOR==1
+# define ALSA_PCM_OLD_HW_PARAMS_API
+# endif
 #include <alsa/asoundlib.h>
 #endif
 
-#if SND_LIB_MINOR >= 6
+#if SND_LIB_MINOR >= 6 || SND_LIB_MAJOR > 0
 #define snd_seq_flush_output(x) snd_seq_drain_output(x)
 #define snd_seq_set_client_group(x,name) /*nop*/
 #define my_snd_seq_open(seqp) snd_seq_open(seqp, "hw", SND_SEQ_OPEN_OUTPUT, 0)
