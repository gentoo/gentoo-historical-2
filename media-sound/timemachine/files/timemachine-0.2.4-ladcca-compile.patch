--- timemachine-0.2.4.orig/src/main.c
+++ timemachine-0.2.4/src/main.c
@@ -169,7 +169,9 @@
 
     bind_meters();
     g_timeout_add(100, meter_tick, NULL);
+#ifdef HAVE_LADCCA
     gtk_idle_add(idle_cb, cca_client);
+#endif
 
     gtk_main();
 
@@ -197,6 +199,7 @@
     exit(0);
 }
 
+#ifdef HAVE_LADCCA
 gboolean idle_cb(gpointer data)
 {
     cca_client_t *cca_client = (cca_client_t *)data;
@@ -237,5 +240,6 @@
 
     return TRUE;
 }
+#endif
 
 /* vi:set ts=8 sts=4 sw=4: */
