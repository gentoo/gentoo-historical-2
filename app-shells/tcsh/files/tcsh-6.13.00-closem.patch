--- tcsh/sh.misc.c	2004-09-08 18:36:04.000000000 +0200
+++ tcsh-6.13.00/sh.misc.c	2004-09-08 23:53:43.081020880 +0200
@@ -257,6 +257,7 @@
 closem()
 {
     register int f;
+    struct stat st;
 
 #ifdef NLS_BUGS
 #ifdef NLS_CATALOGS
@@ -273,6 +274,9 @@
 #ifdef MALLOC_TRACE
 	    && f != 25
 #endif /* MALLOC_TRACE */
+#ifdef S_ISSOCK
+	    && fstat(f, &st) == 0 && !S_ISSOCK(st.st_mode)
+#endif
 	    )
 	  {
 	    (void) close(f);
