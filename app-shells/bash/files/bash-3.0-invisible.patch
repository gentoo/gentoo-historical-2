--- bash-3.0/lib/readline/display.c	2004-05-27 22:57:51.000000000 -0400
+++ bash-3.0.agriffis/lib/readline/display.c	2004-08-02 17:43:02.000000000 -0400
@@ -258,23 +258,21 @@
 #endif
 	    {
 	      *r++ = *p;
-	      if (!ignoring)
+	      if (!ignoring) 
 		rl++;			/* visible length byte counter */
-	      else
-		ninvis++;		/* invisible chars byte counter */
+	      else 
+		{
+		  ninvis++;		/* invisible chars byte counter */
+		  if (rl < _rl_screenwidth)
+		    invfl = ninvis;
+		}
 	    }
 
-	  if (rl >= _rl_screenwidth)
-	    invfl = ninvis;
-
 	  if (ignoring == 0)
 	    physchars++;
 	}
     }
 
-  if (rl < _rl_screenwidth)
-    invfl = ninvis;
-
   *r = '\0';
   if (lp)
     *lp = rl;
