diff -ruN digikam-2.0.0-rc.orig/core/cmake/modules/FindPGF.cmake digikam-2.0.0-rc/core/cmake/modules/FindPGF.cmake
--- digikam-2.0.0-rc.orig/core/cmake/modules/FindPGF.cmake	2011-06-28 16:38:50.000000000 +0200
+++ digikam-2.0.0-rc/core/cmake/modules/FindPGF.cmake	2011-07-04 15:32:50.000000000 +0200
@@ -1,9 +1,10 @@
 # - Try to find libpgf
 # Once done this will define
 #
-#  PGF_FOUND - system has libgf
-#  PGF_INCLUDE_DIRS - the libpgf include directory
-#  PGF_LIBRARIES - Link these to use libpgf
+#  PGF_FOUND            - system has libgf
+#  PGF_INCLUDE_DIRS     - the libpgf include directory
+#  PGF_LIBRARIES        - Link these to use libpgf
+#  PGF_CODEC_VERSION_ID - PGF codec version ID.
 
 # PKG-CONFIG is required.
 INCLUDE(FindPkgConfig REQUIRED)
@@ -12,4 +13,15 @@
 	INCLUDE(FindPkgConfig)
 
 	PKG_CHECK_MODULES(PGF libpgf)
+
+	MESSAGE(STATUS "PGF_INCLUDE_DIRS     = ${PGF_INCLUDE_DIRS}")
+	MESSAGE(STATUS "PGF_INCLUDEDIR       = ${PGF_INCLUDEDIR}")
+	MESSAGE(STATUS "PGF_LIBRARIES        = ${PGF_LIBRARIES}")
+	MESSAGE(STATUS "PGF_LDFLAGS          = ${PGF_LDFLAGS}")
+	MESSAGE(STATUS "PGF_CFLAGS           = ${PGF_CFLAGS}")
+	MESSAGE(STATUS "PGF_VERSION          = ${PGF_VERSION}")
+
+	STRING(REPLACE "." "" PGF_CODEC_VERSION_ID "${PGF_VERSION}")
+	MESSAGE(STATUS "PGF_CODEC_VERSION_ID = ${PGF_CODEC_VERSION_ID}")
+
 ENDIF(PKG_CONFIG_FOUND)
diff -ruN digikam-2.0.0-rc.orig/core/digikam/utils/config-digikam.h.cmake digikam-2.0.0-rc/core/digikam/utils/config-digikam.h.cmake
--- digikam-2.0.0-rc.orig/core/digikam/utils/config-digikam.h.cmake	2011-06-28 16:38:50.000000000 +0200
+++ digikam-2.0.0-rc/core/digikam/utils/config-digikam.h.cmake	2011-07-04 15:29:24.000000000 +0200
@@ -57,6 +57,8 @@
 /* Define to 1 if we know how to start mysqld */
 #cmakedefine HAVE_INTERNALMYSQL 1
 
+#define PGFCodecVersionID 0x${PGF_CODEC_VERSION_ID}
+
 #define LIBEXEC_INSTALL_DIR "${LIBEXEC_INSTALL_DIR}"
 
 /*
diff -ruN digikam-2.0.0-rc.orig/core/libs/threadimageio/pgfutils.cpp digikam-2.0.0-rc/core/libs/threadimageio/pgfutils.cpp
--- digikam-2.0.0-rc.orig/core/libs/threadimageio/pgfutils.cpp	2011-06-28 16:38:44.000000000 +0200
+++ digikam-2.0.0-rc/core/libs/threadimageio/pgfutils.cpp	2011-07-04 15:29:24.000000000 +0200
@@ -46,6 +46,7 @@
 // LibPGF includes
 
 #include "PGFimage.h"
+#include "config-digikam.h"
 
 namespace Digikam
 {
