--- xv.h.orig	2005-05-27 23:35:19.000000000 -0400
+++ xv.h	2005-05-27 23:37:18.000000000 -0400
@@ -137,7 +137,7 @@
 #ifndef VMS
 #  include <errno.h>
    extern int   errno;             /* SHOULD be in errno.h, but often isn't */
-#  if !defined(__NetBSD__) && !(defined(__linux__) && defined(__USE_BSD))
+#  if !defined(__NetBSD__) && !(defined(__linux__) && defined(__USE_BSD)) && !defined(__APPLE__)
      extern char *sys_errlist[];   /* this too... */
 #  endif
 #endif
@@ -147,7 +147,7 @@
 #ifdef VMS
 #  define ERRSTR(x) strerror(x, vaxc$errno)
 #else
-#  if defined(__BEOS__) || defined(__linux__) /* or all modern/glibc systems? */
+#  if defined(__BEOS__) || defined(__linux__) || defined(__APPLE__) /* or all modern/glibc systems? */
 #    define ERRSTR(x) strerror(x)
 #  else
 #    define ERRSTR(x) sys_errlist[x]
@@ -191,6 +191,8 @@
 
 #  if defined(hp300) || defined(hp800) || defined(NeXT)
 #   include <sys/malloc.h>                /* it's in 'sys' on HPs and NeXT */
+#  elif defined(__APPLE__)
+#   include <malloc/malloc.h> 
 #  else
 #   include <malloc.h>
 #  endif
