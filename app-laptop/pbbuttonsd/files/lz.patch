--- configure.in.bak	2007-11-29 22:29:42.000000000 -0500
+++ configure.in	2007-11-29 22:30:06.000000000 -0500
@@ -59,10 +59,9 @@
 		AC_CHECK_HEADERS([smbios/SystemInfo.h],
 			AC_DEFINE_UNQUOTED(WITH_SMBIOS, 1, [SMBIOS available]),
 			AC_MSG_ERROR([SMBios library not available. Please install development files for libsmbios.]), [/* dummy */])
-		AC_CHECK_HEADERS([pci/pci.h sys/io.h], ac_macbook=yes,
-			AC_MSG_ERROR([Please install development files for libpci and direct I/O.]), [/* dummy */])
+		PKG_CHECK_MODULES(LIBPCI, libpci)
 		PB_OBJECTS+=" driver_backlight_x1600.$OBJEXT driver_backlight_gma950.$OBJEXT module_acpi.$OBJEXT module_imac.$OBJEXT"
-		PB_LIBS+=" -lpci -lsmbios"
+		PB_LIBS+=" -lsmbios $LIBPCI_LIBS"
 		LCD_FADINGSPEED="448"
 		LCD_AUTOADJMODE="linear"
 		LCD_AUTOADJPARMBAT="0,10,80,30"
