--- class_backlight.c	2006-10-01 04:06:51.000000000 -0400
+++ /home/jjezak/pbbuttonsd-0.7.9/src/class_backlight.c	2006-10-03 22:04:34.000000000 -0400
@@ -46,8 +46,9 @@
 	struct class_backlight *base = &modbase_backlight;
 
 	if (!base->driver) base->driver = driver_backlight_sysfs_init (taglist);
+#ifdef WITH_MODULE_PMAC
 	if (!base->driver) base->driver = driver_backlight_pmu_init (taglist);
-
+#endif
 	if (base->driver)
 		print_msg (PBB_INFO, _("Initialized: %s\n"), _(base->driver->name));
 	else
--- driver_backlight_pmu.c	2006-10-01 04:04:25.000000000 -0400
+++ /home/jjezak/pbbuttonsd-0.7.9/src/driver_backlight_pmu.c	2006-10-03 22:04:34.000000000 -0400
@@ -15,6 +15,9 @@
 #  include <config.h>
 #endif
 
+#include "systems.h"
+#ifdef WITH_MODULE_PMAC
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <fcntl.h>
@@ -123,3 +126,4 @@
 }
 
 
+#endif
