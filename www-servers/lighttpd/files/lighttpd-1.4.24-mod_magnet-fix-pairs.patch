Patch already applied upstream as revision 2680
http://redmine.lighttpd.net/projects/lighttpd/repository/revisions/2680/diff

Index: branches/lighttpd-1.4.x/src/mod_magnet.c
===================================================================
--- branches/lighttpd-1.4.x/src/mod_magnet.c	(revision 2679)
+++ branches/lighttpd-1.4.x/src/mod_magnet.c	(revision 2680)
@@ -170,6 +170,7 @@
 		return lua_gettop(L);
 	} else {
 		lua_pushvalue(L, lua_upvalueindex(1));
+		lua_insert(L, 1);
 		lua_call(L, lua_gettop(L) - 1, LUA_MULTRET);
 		return lua_gettop(L);
 	}
