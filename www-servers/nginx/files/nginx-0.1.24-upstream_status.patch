--- src/http/modules/proxy/ngx_http_proxy_upstream.c	Sat Mar  5 20:18:50 2005
+++ src/http/modules/proxy/ngx_http_proxy_upstream.c	Wed Mar  9 19:28:54 2005
@@ -1016,7 +1016,7 @@
     rc = ngx_http_proxy_parse_status_line(p);
 
     if (rc == NGX_AGAIN) {
-        if (p->header_in->pos == p->header_in->last) {
+        if (p->header_in->last == p->header_in->end) {
             ngx_log_error(NGX_LOG_ERR, rev->log, 0,
                           "upstream sent too long status line");
             ngx_http_proxy_next_upstream(p, NGX_HTTP_PROXY_FT_INVALID_HEADER);
