--- src/boa.c.orig	2004-10-21 03:28:51.000000000 +0000
+++ src/boa.c	2004-10-21 03:30:24.000000000 +0000
@@ -222,7 +222,7 @@
         /* test for failed-but-return-was-successful setuid
          * http://www.securityportal.com/list-archive/bugtraq/2000/Jun/0101.html
          */
-        if (setuid(0) != -1) {
+	if (server_uid && server_gid && setuid(0) != -1) {
             DIE("icky Linux kernel bug!");
         }
     } else {
