uClibc systems dont define IPV6_V6ONLY when USE=-ipv6

--- avahi-core/socket.c
+++ avahi-core/socket.c
@@ -372,6 +372,7 @@
 }
 
 int avahi_open_socket_ipv6(int no_reuse) {
+#ifdef IPV6_V6ONLY
     struct sockaddr_in6 sa, local;
     int fd = -1, yes, r;
     int ttl;
@@ -437,6 +438,7 @@
 fail:
     if (fd >= 0)
         close(fd);
+#endif
 
     return -1;
 }
@@ -936,6 +938,7 @@
 }
 
 int avahi_open_unicast_socket_ipv6(void) {
+#ifdef IPV6_V6ONLY
     struct sockaddr_in6 local;
     int fd = -1, yes;
         
@@ -977,5 +980,6 @@
     if (fd >= 0)
         close(fd);
 
+#endif
     return -1;
 }
