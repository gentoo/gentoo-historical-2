--- configure.in.orig	2006-01-07 16:55:04.000000000 -0600
+++ configure.in	2006-01-07 17:05:38.000000000 -0600
@@ -52,60 +52,57 @@
 AC_SUBST(NAUTILUS_SENDTO_CFLAGS)
 AC_SUBST(NAUTILUS_SENDTO_LIBS)
 
-dnl Libebook support
+dnl Evolution (libebook) Support
 dnl ---------------------------------
 
-PKG_CHECK_MODULES(NST_EBOOK, libebook-1.2 >= $EBOOK_REQUIRED,
-	[
-	AC_SUBST(NST_EBOOK_CFLAGS)
-	AC_SUBST(NST_EBOOK_LIBS)
-	echo "Using libebook-1.2 !"
-	enable_evolution=yes
-	],
-	[
-        echo "Building without evolution"
-	enable_evolution=no
-	]
-)
+AC_ARG_ENABLE([evolution],
+              AC_HELP_STRING([--enable-evolution],[enable support for evolution]),,
+              [enable_evolution=no])
+
+if test x$enable_evolution = xyes ; then
+   PKG_CHECK_MODULES(NST_EBOOK, [libebook-1.2 >= $EBOOK_REQUIRED])
+
+   AC_SUBST(NST_EBOOK_CFLAGS)
+   AC_SUBST(NST_EBOOK_LIBS)
+fi
 
 AM_CONDITIONAL(HAVE_EVOLUTION, test "x$enable_evolution" = "xyes")
 
-dnl Gaim support if it's installed
+dnl Gaim Support
 dnl ---------------------------------
 
+AC_ARG_ENABLE([gaim],
+              AC_HELP_STRING([--enable-gaim],[enable support for gaim]),,
+              [enable_gaim=no])
+
+if test x$enable_gaim = xyes ; then
+   PKG_CHECK_MODULES(GAIM, gaim >= $GAIM_REQUIRED)
+
+   AC_SUBST(GAIM_CFLAGS)
+   AC_SUBST(GAIM_LIBS)
 
-PKG_CHECK_MODULES(GAIM, gaim >= $GAIM_REQUIRED,
-	[
-	AC_SUBST(GAIM_CFLAGS)
-	AC_SUBST(GAIM_LIBS)
-	GAIM_LIBDIR=`pkg-config --variable=libdir gaim`
-	GAIM_DATADIR=`pkg-config --variable=datadir gaim`
-	AC_SUBST(GAIM_LIBDIR)
-	AC_SUBST(GAIM_DATADIR)
-	enable_gaim=yes
-	],
-	[
-	echo "Building without gaim"
-	enable_gaim=no
-	]
-)
+   GAIM_LIBDIR=`pkg-config --variable=libdir gaim`
+   GAIM_DATADIR=`pkg-config --variable=datadir gaim`
+
+   AC_SUBST(GAIM_LIBDIR)
+   AC_SUBST(GAIM_DATADIR)
+fi
 
 AM_CONDITIONAL(HAVE_GAIM, test "x$enable_gaim" = "xyes")
 
-dnl Bluetooth support if it's installed
+dnl Bluetooth Support
 dnl -----------------------------------
 
-PKG_CHECK_MODULES(BLUETOOTH, gnome-bluetooth >= $BLUETOOTH_REQUIRED,
-	[
-	AC_SUBST(BLUETOOTH_CFLAGS)
-	AC_SUBST(BLUETOOTH_LIBS)
-	enable_bluetooth=yes
-	],
-	[
-	echo "Building without Bluetooth"
-	enable_bluetooth=no
-	]
-)
+AC_ARG_ENABLE([bluetooth],
+              AC_HELP_STRING([--enable-bluetooth],[enable support for bluetooth]),,
+              [enable_bluetooth=no])
+
+if test x$enable_bluetooth = xyes ; then
+   PKG_CHECK_MODULES(BLUETOOTH, gnome-bluetooth >= $BLUETOOTH_REQUIRED)
+
+   AC_SUBST(BLUETOOTH_CFLAGS)
+   AC_SUBST(BLUETOOTH_LIBS)
+fi
 
 AM_CONDITIONAL(HAVE_BLUETOOTH, test "x$enable_bluetooth" = "xyes")
 
