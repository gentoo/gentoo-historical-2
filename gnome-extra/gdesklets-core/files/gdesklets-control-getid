#! /usr/bin/env python
# A simple script to get the name and id from a Control.
# Pretty much copied from test-control.py

from plugin.Interface import Interface

import sys
import os
import __builtin__

if "." not in sys.path: sys.path.append(".")

try:
    path = os.path.abspath(sys.argv[1])
    folder, base = os.path.split(path)
except:
    #sys.exit("Usage: gdesklets-control-getid <control-directory>")
    print "ERROR_IN_CONTROL_INSTALLATION"
    

os.chdir(folder)
try:
    module = __import__(base)
    os.chdir(base)
    clss = module.get_class()
    ctrl = clss()
    
except IOError:
    #sys.exit("Could not load control %s." % (path))
    print folder

print Interface.get_id(Interface.get_interfaces(clss)[0]).replace(":", "_")
