diff -ur share.orig/mk/bsd.doc.mk share/mk/bsd.doc.mk
--- share.orig/mk/bsd.doc.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.doc.mk	Thu Apr  7 12:00:13 2005
@@ -137,10 +137,12 @@
 realinstall:
 .for _dev in ${PRINTERDEVICE:Mhtml}
 	cd ${SRCDIR}; \
+	    ${INSTALL} -d ${DESTDIR}${BINDIR}/${VOLUME}
 	    ${INSTALL} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
 	    ${DOC}*.html ${DESTDIR}${BINDIR}/${VOLUME}
 .endfor
 .for _dev in ${PRINTERDEVICE:Nhtml}
+	${INSTALL} -d ${DESTDIR}${BINDIR}/${VOLUME}
 	${INSTALL} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
 	    ${DFILE.${_dev}} ${DESTDIR}${BINDIR}/${VOLUME}
 .endfor
diff -ur share.orig/mk/bsd.files.mk share/mk/bsd.files.mk
--- share.orig/mk/bsd.files.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.files.mk	Thu Apr  7 12:00:34 2005
@@ -39,6 +39,7 @@
 .endif
 installfiles: _${group}INS_${file:T}
 _${group}INS_${file:T}: ${file}
+	${INSTALL} -d ${DESTDIR}${${group}DIR_${.ALLSRC}}/${${group}NAME_${.ALLSRC:T}:H}
 	${INSTALL} -o ${${group}OWN_${.ALLSRC:T}} \
 	    -g ${${group}GRP_${.ALLSRC:T}} -m ${${group}MODE_${.ALLSRC:T}} \
 	    ${.ALLSRC} \
@@ -51,10 +52,12 @@
 installfiles: _${group}INS
 _${group}INS: ${_${group}FILES}
 .if defined(${group}NAME)
+	${INSTALL} -d ${DESTDIR}${${group}DIR}/${${group}NAME}
 	${INSTALL} -o ${${group}OWN} -g ${${group}GRP} \
 	    -m ${${group}MODE} ${.ALLSRC} \
 	    ${DESTDIR}${${group}DIR}/${${group}NAME}
 .else
+	${INSTALL} -d ${DESTDIR}${${group}DIR}
 	${INSTALL} -o ${${group}OWN} -g ${${group}GRP} \
 	    -m ${${group}MODE} ${.ALLSRC} ${DESTDIR}${${group}DIR}
 .endif
diff -ur share.orig/mk/bsd.incs.mk share/mk/bsd.incs.mk
--- share.orig/mk/bsd.incs.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.incs.mk	Thu Apr  7 12:00:40 2005
@@ -39,6 +39,10 @@
 .endif
 installincludes: _${group}INS_${header:T}
 _${group}INS_${header:T}: ${header}
+	
+	${INSTALL} -d -o ${${group}OWN_${.ALLSRC:T}} \
+	    -g ${${group}GRP_${.ALLSRC:T}} -m ${${group}MODE_${.ALLSRC:T}} \
+	    ${DESTDIR}${${group}DIR_${.ALLSRC:T}}/${${group}NAME_${.ALLSRC:T}}
 	${INSTALL} -C -o ${${group}OWN_${.ALLSRC:T}} \
 	    -g ${${group}GRP_${.ALLSRC:T}} -m ${${group}MODE_${.ALLSRC:T}} \
 	    ${.ALLSRC} \
@@ -51,9 +55,11 @@
 installincludes: _${group}INS
 _${group}INS: ${_${group}INCS}
 .if defined(${group}NAME)
+	${INSTALL} -d ${DESTDIR}${${group}DIR}
 	${INSTALL} -C -o ${${group}OWN} -g ${${group}GRP} -m ${${group}MODE} \
 	    ${.ALLSRC} ${DESTDIR}${${group}DIR}/${${group}NAME}
 .else
+	${INSTALL} -d ${DESTDIR}${${group}DIR}
 	${INSTALL} -C -o ${${group}OWN} -g ${${group}GRP} -m ${${group}MODE} \
 	    ${.ALLSRC} ${DESTDIR}${${group}DIR}
 .endif
diff -ur share.orig/mk/bsd.info.mk share/mk/bsd.info.mk
--- share.orig/mk/bsd.info.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.info.mk	Thu Apr  7 12:00:44 2005
@@ -85,6 +85,7 @@
 TEX?=		tex
 DVIPS?=		dvips
 DVIPS2ASCII?=	dvips2ascii
+INSTALL?=	install
 
 .SUFFIXES: ${ICOMPRESS_EXT} .info .texi .texinfo .dvi .ps .latin1 .html
 
@@ -145,6 +146,7 @@
 .for x in ${INFO}
 INSTALLINFODIRS+= ${x:S/$/-install/}
 ${x:S/$/-install/}:
+	${INSTALL} -d ${DESTDIR}${INFODIR}
 	${INSTALLINFO} ${INSTALLINFOFLAGS} \
 	    --defsection=${INFOSECTION} \
 	    --defentry=${INFOENTRY_${x}} \
diff -ur share.orig/mk/bsd.lib.mk share/mk/bsd.lib.mk
--- share.orig/mk/bsd.lib.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.lib.mk	Thu Apr  7 12:00:49 2005
@@ -208,14 +208,17 @@
 .ORDER: beforeinstall _libinstall
 _libinstall:
 .if defined(LIB) && !empty(LIB) && !defined(NOINSTALLLIB)
+	${INSTALL} -d ${DESTDIR}${LIBDIR}
 	${INSTALL} -C -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
 	    ${_INSTALLFLAGS} lib${LIB}.a ${DESTDIR}${LIBDIR}
 .endif
 .if !defined(NOPROFILE) && defined(LIB) && !empty(LIB)
+	${INSTALL} -d ${DESTDIR}${LIBDIR}
 	${INSTALL} -C -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
 	    ${_INSTALLFLAGS} lib${LIB}_p.a ${DESTDIR}${LIBDIR}
 .endif
 .if defined(SHLIB_NAME)
+	${INSTALL} -d ${DESTDIR}${SHLIBDIR}
 	${INSTALL} ${STRIP} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
 	    ${_INSTALLFLAGS} ${_SHLINSTALLFLAGS} \
 	    ${SHLIB_NAME} ${DESTDIR}${SHLIBDIR}
diff -ur share.orig/mk/bsd.man.mk share/mk/bsd.man.mk
--- share.orig/mk/bsd.man.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.man.mk	Thu Apr  7 12:00:52 2005
@@ -165,9 +165,11 @@
 .if defined(NOMANCOMPRESS)
 .if defined(MANFILTER)
 .for page in ${MAN}
+	${INSTALL} -d ${DESTDIR}${MANDIR}${page:E}${MANSUBDIR}/${page}
 	${MINSTALL} ${page:T:S/$/${FILTEXTENSION}/g} \
 		${DESTDIR}${MANDIR}${page:E}${MANSUBDIR}/${page}
 .if defined(MANBUILDCAT) && !empty(MANBUILDCAT)
+	${INSTALL} -d ${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page}
 	${MINSTALL} ${page:T:S/$/${CATEXT}${FILTEXTENSION}/g} \
 		${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page}
 .endif
@@ -186,6 +188,7 @@
 	done
 .if defined(MANBUILDCAT) && !empty(MANBUILDCAT)
 .for page in ${MAN}
+	${INSTALL} -d ${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page:T}
 	${MINSTALL} ${page:T:S/$/${CATEXT}/} \
 		${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page:T}
 .endfor
@@ -193,9 +196,11 @@
 .endif
 .else
 .for page in ${MAN}
+	${INSTALL} -d ${DESTDIR}${MANDIR}${page:E}${MANSUBDIR}
 	${MINSTALL} ${page:T:S/$/${MCOMPRESS_EXT}/g} \
 		${DESTDIR}${MANDIR}${page:E}${MANSUBDIR}
 .if defined(MANBUILDCAT) && !empty(MANBUILDCAT)
+	${INSTALL} -d ${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page:T:S/$/${MCOMPRESS_EXT}/}
 	${MINSTALL} ${page:T:S/$/${CATEXT}${MCOMPRESS_EXT}/g} \
 		${DESTDIR}${CATDIR}${page:E}${MANSUBDIR}/${page:T:S/$/${MCOMPRESS_EXT}/}
 .endif
diff -ur share.orig/mk/bsd.prog.mk share/mk/bsd.prog.mk
--- share.orig/mk/bsd.prog.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/bsd.prog.mk	Thu Apr  7 12:00:55 2005
@@ -126,9 +126,11 @@
 _proginstall:
 .if defined(PROG)
 .if defined(PROGNAME)
+	${INSTALL} -d ${DESTDIR}${BINDIR}
 	${INSTALL} ${STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
 	    ${_INSTALLFLAGS} ${PROG} ${DESTDIR}${BINDIR}/${PROGNAME}
 .else
+	${INSTALL} -d ${DESTDIR}${BINDIR}
 	${INSTALL} ${STRIP} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
 	    ${_INSTALLFLAGS} ${PROG} ${DESTDIR}${BINDIR}
 .endif
@@ -156,6 +158,7 @@
 SCRIPTSMODE_${script:T}?=	${SCRIPTSMODE}
 _scriptsinstall: _SCRIPTSINS_${script:T}
 _SCRIPTSINS_${script:T}: ${script}
+	${INSTALL} -d ${DESTDIR}${SCRIPTSDIR_${.ALLSRC:T}}
 	${INSTALL} -o ${SCRIPTSOWN_${.ALLSRC:T}} \
 	    -g ${SCRIPTSGRP_${.ALLSRC:T}} -m ${SCRIPTSMODE_${.ALLSRC:T}} \
 	    ${.ALLSRC} \
diff -ur share.orig/mk/sys.mk share/mk/sys.mk
--- share.orig/mk/sys.mk	Thu Apr  7 12:01:25 2005
+++ share/mk/sys.mk	Thu Apr  7 12:02:06 2005
@@ -37,7 +37,7 @@
 CFLAGS		?=	-O
 .else
 CC		?=	cc
-CFLAGS		?=	-O -pipe
+CFLAGS		+=	-pipe
 .endif
 
 CXX		?=	c++
@@ -258,12 +258,6 @@
 	${LEX} -t ${LFLAGS} ${.IMPSRC} > ${.PREFIX}.tmp.c
 	${CC} ${CFLAGS} ${LDFLAGS} ${.PREFIX}.tmp.c ${LDLIBS} -ll -o ${.TARGET}
 	rm -f ${.PREFIX}.tmp.c
-
-# FreeBSD build pollution.  Hide it in the non-POSIX part of the ifdef.
-__MAKE_CONF?=/etc/make.conf
-.if exists(${__MAKE_CONF})
-.include "${__MAKE_CONF}"
-.endif
 
 # Default executable format
 # XXX hint for bsd.port.mk
