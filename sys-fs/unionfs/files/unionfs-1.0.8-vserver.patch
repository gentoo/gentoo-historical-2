--- /var/tmp/portage/unionfs-1.0.8/work/unionfs-1.0.8/namei.c.orig	2005-02-03 23:41:40.891484984 +0100
+++ /var/tmp/portage/unionfs-1.0.8/work/unionfs-1.0.8/namei.c	2005-02-03 23:42:21.620293264 +0100
@@ -67,7 +67,7 @@
 	if (IS_APPEND(dir))
 		return -EPERM;
 	if (check_sticky(dir, victim->d_inode)||IS_APPEND(victim->d_inode)||
-	    IS_IMMUTABLE(victim->d_inode))
+	    IS_IMMUTABLE_FILE(victim->d_inode)||IS_IMMUTABLE_LINK(victim->d_inode))
 		return -EPERM;
 	if (isdir) {
 		if (!S_ISDIR(victim->d_inode->i_mode))
