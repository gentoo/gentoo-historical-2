--- xfsprogs-orig/io/mmap.c	Fri Apr 30 20:34:08 2004
+++ xfsprogs-2.6.13/io/mmap.c	Sat Sep 11 15:34:43 2004
@@ -44,7 +44,9 @@
 static cmdinfo_t munmap_cmd;
 static cmdinfo_t mwrite_cmd;
 static cmdinfo_t madvise_cmd;
+#ifndef __UCLIBC__
 static cmdinfo_t mincore_cmd;
+#endif
 
 mmap_region_t	*maptable;
 int		mapcount;
@@ -679,6 +681,7 @@
 	return 0;
 }
 
+#ifndef __UCLIBC__
 int
 mincore_f(
 	int		argc,
@@ -757,6 +760,7 @@
 	free(vec);
 	return 0;
 }
+#endif
 
 void
 mmap_init(void)
@@ -822,6 +826,7 @@
 	madvise_cmd.oneline = _("give advice about use of memory");
 	madvise_cmd.help = madvise_help;
 
+#ifndef __UCLIBC__
 	mincore_cmd.name = _("mincore");
 	mincore_cmd.altname = _("mi");
 	mincore_cmd.cfunc = mincore_f;
@@ -830,6 +835,7 @@
 	mincore_cmd.flags = CMD_NOFILE_OK | CMD_FOREIGN_OK;
 	mincore_cmd.args = _("[off len]");
 	mincore_cmd.oneline = _("find mapping pages that are memory resident");
+#endif
 
 	add_command(&mmap_cmd);
 	add_command(&mread_cmd);
@@ -837,5 +843,7 @@
 	add_command(&munmap_cmd);
 	add_command(&mwrite_cmd);
 	add_command(&madvise_cmd);
+#ifndef __UCLIBC__
 	add_command(&mincore_cmd);
+#endif
 }
