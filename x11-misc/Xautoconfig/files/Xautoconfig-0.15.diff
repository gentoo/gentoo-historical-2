diff -uNr Xautoconfig-0.15.orig/Xautoconfig4.c Xautoconfig-0.15/Xautoconfig4.c
--- Xautoconfig-0.15.orig/Xautoconfig4.c	Mon Feb 25 06:10:18 2002
+++ Xautoconfig-0.15/Xautoconfig4.c	Tue May  7 11:19:14 2002
@@ -13,12 +13,12 @@
 
 extern int bus, dev, func;
 extern void findVideoDevice(void);
-extern int checkKernelVer(), checkRedHat();
+extern int checkKernelVer(), checkRedHat(), checkMouseType();
 extern int readMouseConfigFile(), readKBDConfigFile();
 
 int main() {
 	FILE * f;
-	int i, depth, fh, r, rc = 0;
+	int i, depth, fh, r, rc = 0, m;
 	unsigned int xsstart, xsend, xtotal = 0;
 	unsigned int ysstart, ysend, ytotal = 0;
 	double drate, vrate, hrate;
@@ -81,7 +81,7 @@
 		depth = var.red.length+var.green.length+var.blue.length;
 
 	r = checkRedHat(); /* See if we're on a RedHat-like system */
-	if(inputMess <= 3)
+	if(inputMess <= 3 && r == 1)
 		(int) mouse = readMouseConfigFile(&mouse);
 	else if (!r) {
 		fprintf(stdout, "You don't seem to be running on a RedHat");
@@ -97,7 +97,11 @@
 
         /* Let's be nice and backup an existing XF86Config */
         if ((f = fopen("/etc/X11/XF86Config-4", "r"))) {
-		system("mv /etc/X11/XF86Config /etc/X11/XF86Config-4.xautoconfig");
+		system("mv /etc/X11/XF86Config-4 /etc/X11/XF86Config-4.xautoconfig");
+        }
+        
+	if ((f = fopen("/etc/X11/XF86Config", "r"))) {
+		system("mv /etc/X11/XF86Config /etc/X11/XF86Config.xautoconfig");
         }
 
 	if (!(f = fopen("/etc/X11/XF86Config-4", "w"))) {
@@ -116,8 +120,13 @@
 		fprintf(f, "%s\"\n", mouse);
 	else
 		fprintf(f, "IMPS/2\"\n");
-	fprintf(f, "	Option		\"Device\"	\"/dev/mouse\"\n");
-
+	
+	m = checkMouseType(); /* check for input layer, if none fallback to std mouse */
+	if (!m)
+		fprintf(f, "	Option		\"Device\"	\"/dev/mouse\"\n");
+	else 
+		fprintf(f, "	Option		\"Device\"	\"/dev/input/mice\"\n");
+		
 	/* Begin monitor */
 	fprintf(f, "%s", monitor_section);
 	/* Set a sane HorizSync / VertRefresh.  This is borred from dexter */
diff -uNr Xautoconfig-0.15.orig/misc.c Xautoconfig-0.15/misc.c
--- Xautoconfig-0.15.orig/misc.c	Wed Dec 27 23:40:21 2000
+++ Xautoconfig-0.15/misc.c	Tue May  7 11:18:25 2002
@@ -27,7 +27,7 @@
 /* to promote the sale, use or other dealings in this Software without prior */
 /* written authorization from the XFree86 Project.*/
 
-/* This file contains the routines needed for reasing /etc/sysconfig/{mouse,keyboard}
+/* This file contains the routines needed for reading /etc/sysconfig/{mouse,keyboard}
  * and are taken from Xconfigurator 4.2.4, or so.
  * It also contains functions to check the running kernel version. */
 
@@ -203,3 +203,13 @@
 	}
 	return (int) *keyboardtype;
 }
+
+int checkMouseType() {
+	FILE * m;
+	int result = 0;
+	/* check to see if /dev/input/mice exists */
+	if ((m = fopen("/dev/input/mice", "r")))
+		result = 1;
+
+	return result;
+}
