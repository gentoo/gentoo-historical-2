diff -ru btanks-0.8.7686.orig/SConstruct btanks-0.8.7686/SConstruct
--- btanks-0.8.7686.orig/SConstruct	2008-07-29 05:08:59.000000000 -0400
+++ btanks-0.8.7686/SConstruct	2009-01-23 02:15:29.000000000 -0500
@@ -49,7 +49,7 @@
 if os.environ.has_key('CC'):
 	env['CC'] = os.environ['CC']
 if os.environ.has_key('CFLAGS'):
-	env['CCFLAGS'] += SCons.Util.CLVar(os.environ['CFLAGS'])
+	env['CFLAGS'] += SCons.Util.CLVar(os.environ['CFLAGS'])
 if os.environ.has_key('CXX'):
 	env['CXX'] = os.environ['CXX']
 if os.environ.has_key('CXXFLAGS'):
@@ -90,19 +90,9 @@
 		#env.Append(CPPDEFINES = ['NDEBUG']) 
 
 else:
-	if env['gcc_visibility']: 
-		env.Append(CCFLAGS=['-fvisibility=hidden']);
-		env.Append(CXXFLAGS=['-fvisibility-inlines-hidden', '-fvisibility=hidden']);
-
-	if debug:
-		env.Append(CCFLAGS=['-ggdb', '-D_FORTIFY_SOURCE=2'])
-		env.Append(CPPFLAGS=['-ggdb', '-D_FORTIFY_SOURCE=2'])
-	else: 
-		env.Append(CCFLAGS=['-O3'])
-		env.Append(CPPFLAGS=['-O3'])
 		
-	env.Append(CPPFLAGS=['-Wall', '-pedantic', '-Wno-long-long', '-pipe', '-pthread'])
-	env.Append(CCFLAGS=['-Wall', '-pedantic', '-Wno-long-long', '-pipe', '-pthread'])
+	env.Append(CPPFLAGS=['-Wall', '-pedantic', '-Wno-long-long', '-pthread'])
+	env.Append(CCFLAGS=['-Wall', '-pedantic', '-Wno-long-long', '-pthread'])
 
 
 conf_env = env.Clone()
diff -ru btanks-0.8.7686.orig/clunk/kiss/_kiss_fft_guts.h btanks-0.8.7686/clunk/kiss/_kiss_fft_guts.h
--- btanks-0.8.7686.orig/clunk/kiss/_kiss_fft_guts.h	2008-03-12 06:32:16.000000000 -0400
+++ btanks-0.8.7686/clunk/kiss/_kiss_fft_guts.h	2009-01-23 02:16:13.000000000 -0500
@@ -18,6 +18,7 @@
    typedef struct { kiss_fft_scalar r; kiss_fft_scalar i; }kiss_fft_cpx; */
 #include "kiss_fft.h"
 #include <limits.h>
+#include <string.h>
 
 #define MAXFACTORS 32
 /* e.g. an fft of length 128 has 4 factors 
diff -ru btanks-0.8.7686.orig/mrt/export_base.h btanks-0.8.7686/mrt/export_base.h
--- btanks-0.8.7686.orig/mrt/export_base.h	2008-01-09 06:14:14.000000000 -0500
+++ btanks-0.8.7686/mrt/export_base.h	2009-01-23 02:16:58.000000000 -0500
@@ -1,7 +1,7 @@
 #ifndef MRT_EXPORT_MACRO_H__
 #define MRT_EXPORT_MACRO_H__
 
-// Shared library support
+/* Shared library support */
 #ifdef _WINDOWS
 
 #	pragma warning(disable:4251)  /* needs to have dll-interface used by client */
diff -ru btanks-0.8.7686.orig/mrt/tclUniData.c btanks-0.8.7686/mrt/tclUniData.c
--- btanks-0.8.7686.orig/mrt/tclUniData.c	2008-08-15 03:44:45.000000000 -0400
+++ btanks-0.8.7686/mrt/tclUniData.c	2009-01-23 02:15:29.000000000 -0500
@@ -880,7 +880,7 @@
     FINAL_QUOTE_PUNCTUATION,
     OTHER_PUNCTUATION,
     MATH_SYMBOL,
-    CURRENCY_SYMBOL,
+    LCURRENCY_SYMBOL,
     MODIFIER_SYMBOL,
     OTHER_SYMBOL
 };
diff -ru btanks-0.8.7686.orig/sdlx/gfx/SDL_rotozoom.c btanks-0.8.7686/sdlx/gfx/SDL_rotozoom.c
--- btanks-0.8.7686.orig/sdlx/gfx/SDL_rotozoom.c	2008-09-02 06:43:34.000000000 -0400
+++ btanks-0.8.7686/sdlx/gfx/SDL_rotozoom.c	2009-01-23 02:18:37.000000000 -0500
@@ -153,7 +153,7 @@
          * Advance destination pointer 
          */
          dp++;
-        } // dst x loop
+        } /* dst x loop */
 
         /* next box-y */
         sp = (Uint8 *)((Uint8*)osp + src->pitch*factory);
@@ -739,7 +739,7 @@
      }
      break;
 
-     case 2: // rotated 180 degrees clockwise
+     case 2: /* rotated 180 degrees clockwise */
      {
        Uint32* srcBuf = NULL;
        Uint32* dstBuf = NULL;
@@ -751,8 +751,8 @@
            *dstBuf = *srcBuf;
            ++srcBuf;
            --dstBuf;
-         } // for(col)
-       } // for(row)
+         }
+       }
      }
      break;
 
@@ -768,17 +768,16 @@
            *dstBuf = *srcBuf;
            ++srcBuf;
            dstBuf -= pSurfOut->pitch/4;
-         } // for(col)
-       } // for(row)
+         }
+       }
      }
      break;
-   } // switch
+   }
 
    SDL_UnlockSurface(pSurf);
    SDL_UnlockSurface(pSurfOut);
- } // if numClockwiseTurns > 0
+ }
  else {
-   // simply copy surface to output
    if(SDL_BlitSurface(pSurf, NULL, pSurfOut, NULL)) {
      return NULL;
    }
diff -ru btanks-0.8.7686.orig/sdlx/wrappers/glSDL.c btanks-0.8.7686/sdlx/wrappers/glSDL.c
--- btanks-0.8.7686.orig/sdlx/wrappers/glSDL.c	2008-05-29 05:54:00.000000000 -0400
+++ btanks-0.8.7686/sdlx/wrappers/glSDL.c	2009-01-23 02:17:48.000000000 -0500
@@ -11,8 +11,6 @@
 
 #ifdef HAVE_OPENGL
 
-//#define LEAK_TRACKING
-
 #define	DBG(x)		/*error messages, warnings*/
 #define	DBG2(x)		/*texture allocation*/
 #define	DBG3(x)		/*chopping/tiling*/
@@ -951,7 +949,6 @@
 	}
 	gl_doublebuf = flags & SDL_DOUBLEBUF;
 	SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, gl_doublebuf);
-	//SDL_GL_SetAttribute(SDL_GL_SWAP_CONTROL, gl_doublebuf ? 1: 0);
 
 	scale = 1;
 
