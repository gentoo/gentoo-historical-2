diff -Naurp silo-1.4.9.orig/include/promlib.h silo-1.4.9/include/promlib.h
--- silo-1.4.9.orig/include/promlib.h	2005-04-05 22:28:35.000000000 -0700
+++ silo-1.4.9/include/promlib.h	2005-04-05 22:33:08.000000000 -0700
@@ -2,6 +2,7 @@
 #define __PROMLIB_H
 
 #include <asm/openprom.h>
+#include <asm/system.h>
 #include <stdarg.h>
 
 /*
@@ -9,7 +10,10 @@
  * Krups has no architecture in the PROM tree.
  * CP-1200 has "sun4s" which is obviously a mistake [don't ask, huh].
  */
-enum arch { sun4, sun4c, sun4m, sun4d, sun4e, sun4u, sun4p, sununknown };
+
+/* silo's names for items in enum sparc_cpu */
+#define sun4p 0x06
+#define sununknown 0x07
 
 extern struct linux_romvec *romvec;
 
diff -Naurp silo-1.4.9.orig/include/silo.h silo-1.4.9/include/silo.h
--- silo-1.4.9.orig/include/silo.h	2004-01-29 10:28:55.000000000 -0800
+++ silo-1.4.9/include/silo.h	2005-04-05 22:34:20.000000000 -0700
@@ -103,7 +103,7 @@ void show_bootargs (void);
 void set_bootargs (char *, char *);
 void set_prollargs (char *, unsigned int, int);
 char *v0_device (char *);
-enum arch get_architecture();
+enum sparc_cpu get_architecture();
 unsigned char *find_linux_HdrS (char *, int);
 void print_message(char *);
 void get_idprom(void);
@@ -121,7 +121,7 @@ int strtol (const char *, char **, int);
 /* decompress.c */
 int decompress (char *, char *, unsigned char (*)(void), void (*)(void));
 /* main.c */
-extern enum arch architecture;
+extern enum sparc_cpu architecture;
 /* timer.c */
 int init_timer ();
 void close_timer ();
diff -Naurp silo-1.4.9.orig/second/main.c silo-1.4.9/second/main.c
--- silo-1.4.9.orig/second/main.c	2004-06-20 18:58:48.000000000 -0700
+++ silo-1.4.9/second/main.c	2005-04-05 22:35:06.000000000 -0700
@@ -64,7 +64,7 @@ enum {
     CMD_CAT,
     CMD_LS
 } load_cmd;
-enum arch architecture;
+enum sparc_cpu architecture;
 static int timer_status = 0;
 static char *initrd_start;
 static int initrd_size;
diff -Naurp silo-1.4.9.orig/second/misc.c silo-1.4.9/second/misc.c
--- silo-1.4.9.orig/second/misc.c	2005-02-22 10:03:20.000000000 -0800
+++ silo-1.4.9/second/misc.c	2005-04-05 22:35:25.000000000 -0700
@@ -328,7 +328,7 @@ static struct idp_struct idprm;
 struct SMM {
     char *name;
     char *package;
-    enum arch architecture;
+    enum sparc_cpu architecture;
     unsigned char id_machtype;
 } Machines[NUM_SUN_MACHINES] = {
 /* First, Sun4's */
@@ -486,7 +486,7 @@ void set_prollargs (char *params, unsign
     strcpy(p->kern_args, params);
 }
 
-enum arch get_architecture ()
+enum sparc_cpu get_architecture ()
 {
     char *buffer = "sun4c    ";
     int i;
diff -Naurp silo-1.4.9.orig/silo/confcheck.c silo-1.4.9/silo/confcheck.c
--- silo-1.4.9.orig/silo/confcheck.c	2001-06-16 10:49:32.000000000 -0700
+++ silo-1.4.9/silo/confcheck.c	2005-04-05 22:34:44.000000000 -0700
@@ -29,12 +29,12 @@
 #include <sys/mman.h>
 #include <ctype.h>
 
-/* Get decleration of enum arch */
+/* Get decleration of enum sparc_cpu */
 #include <promlib.h>
 /* And then make sure we get printf right */
 #define prom_printf printf
 
-enum arch architecture;
+enum sparc_cpu architecture;
 
 /* Tells cfg.c not to #include anything of it's own, we are in control.  */
 #define SILOCONFCHECK 1
