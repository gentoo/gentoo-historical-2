--- xf86-input-vmmouse-20060113-orig/src/vmmouse_proto.c	2006-01-13 16:47:38.000000000 -0500
+++ xf86-input-vmmouse-20060113/src/vmmouse_proto.c	2006-01-13 16:53:37.000000000 -0500
@@ -89,6 +89,7 @@
 
    __asm__ __volatile__(
         "pushl %%eax"           "\n\t"
+        "pushl %%ebx"           "\n\t"
         "movl 20(%%eax), %%edi" "\n\t"
         "movl 16(%%eax), %%esi" "\n\t"
         "movl 12(%%eax), %%edx" "\n\t"
@@ -102,6 +103,7 @@
         "movl %%edx, 12(%%eax)" "\n\t"
         "movl %%ecx,  8(%%eax)" "\n\t"
         "movl %%ebx,  4(%%eax)" "\n\t"
+        "popl          (%%ebx)" "\n\t"
         "popl          (%%eax)"
       : "=a" (dummy)
       : "0" (cmd)
@@ -109,7 +111,7 @@
        * vmware can modify the whole VM state without the compiler knowing
        * it. So far it does not modify EFLAGS. --hpreg
        */
-      : "ebx", "ecx", "edx", "esi", "edi", "memory"
+      : "ecx", "edx", "esi", "edi", "memory"
    );
 #else
 #error "VMMouse is only supported on x86 and x86-64."
