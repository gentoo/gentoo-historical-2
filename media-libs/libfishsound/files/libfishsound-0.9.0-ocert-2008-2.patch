Index: /libfishsound/trunk/src/libfishsound/speex.c
===================================================================
--- /libfishsound/trunk/src/libfishsound/speex.c (revision 1298)
+++ /libfishsound/trunk/src/libfishsound/speex.c (revision 3536)
@@ -179,5 +179,5 @@
   }
 
-  if (header->mode >= SPEEX_NB_MODES) {
+  if (header->mode >= SPEEX_NB_MODES || header->mode < 0) {
     /*
     info_dialog_new ("Speex error", NULL,
