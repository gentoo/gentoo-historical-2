
# HG changeset patch
# User Diego 'Flameeyes' Petten√≤ <flameeyes@gmail.com>
# Date 1176501310 -7200
# Node ID 16e2e0741d34d2b8b47a835076aa1c15637d4964
# Parent 7d3dcb71e309c19196e2027ba418fdb17f1d6c8d
Use the stream's audio_fifo as it hasn't been reported on the demuxer's instance yet.

--- a/src/demuxers/demux_ac3.c	Thu Apr 12 18:02:38 2007 +0200
+++ b/src/demuxers/demux_ac3.c	Fri Apr 13 23:55:10 2007 +0200
@@ -138,7 +138,7 @@ static int open_ac3_file(demux_ac3_t *th
   if (blocksize) {
     this->input->seek(this->input, 0, SEEK_SET);
     buf_element_t *buf = this->input->read_block(this->input,
-						 this->audio_fifo,
+						 this->stream->audio_fifo,
 						 blocksize);
     this->input->seek(this->input, 0, SEEK_SET);
 
--- a/src/demuxers/demux_dts.c	Thu Apr 12 18:02:38 2007 +0200
+++ b/src/demuxers/demux_dts.c	Fri Apr 13 23:55:10 2007 +0200
@@ -86,9 +86,9 @@ static int open_dts_file(demux_dts_t *th
 
   blocksize = this->input->get_blocksize(this->input);
   if (blocksize) {
-    this->input->seek(this->input, 0, SEEK_SET);
+    //    this->input->seek(this->input, 0, SEEK_SET);
     buf_element_t *buf = this->input->read_block(this->input,
-						 this->audio_fifo,
+						 this->stream->audio_fifo,
 						 blocksize);
     this->input->seek(this->input, 0, SEEK_SET);
 

