# HG changeset patch
# User Diego 'Flameeyes' Petten√≤ <flameeyes@gmail.com>
# Date 1178289959 -7200
# Node ID ee3cb7841d1490bb5dfb760df2f49642da9f6837
# Parent  ce82ad163b0e36d3edefd90bfe3f2ba05ab3ace3
Fix building of CDDA input on FreeBSD, the NetBSD patch broke it as sys/scsiio.h is not present on FreeBSD.

diff -r ce82ad163b0e -r ee3cb7841d14 configure.ac
--- a/configure.ac	Wed May 02 21:51:16 2007 +0200
+++ b/configure.ac	Fri May 04 16:45:59 2007 +0200
@@ -1656,7 +1656,7 @@ dnl ------------------------------------
 dnl ---------------------------------------------
 
 AC_CHECK_HEADERS([linux/cdrom.h sys/dvdio.h], [break])
-AC_CHECK_HEADERS([sys/cdio.h])
+AC_CHECK_HEADERS([sys/cdio.h sys/scsiio.h])
 AM_CHECK_CDROM_IOCTLS(
 	[AC_DEFINE(HAVE_CDROM_IOCTLS,1,[Define this if you have CDROM ioctls])],
 	[AC_MSG_RESULT([*** (S)VCD support will be disabled ***])])
diff -r ce82ad163b0e -r ee3cb7841d14 src/input/input_cdda.c
--- a/src/input/input_cdda.c	Wed May 02 21:51:16 2007 +0200
+++ b/src/input/input_cdda.c	Fri May 04 16:45:59 2007 +0200
@@ -617,7 +617,10 @@ static int read_cdrom_frames(cdda_input_
 #elif defined(__FreeBSD__) || defined(__NetBSD__)
 
 #include <sys/cdio.h>
+
+#ifdef HAVE_SYS_SCSIIO_H
 #include <sys/scsiio.h>
+#endif
 
 static int read_cdrom_toc(int fd, cdrom_toc *toc) {
 
