From 008686a12313c89168f5aef5074d46508ef4b774 Mon Sep 17 00:00:00 2001
From: suzuki toshiya <mpsuzuki@hiroshima-u.ac.jp>
Date: Sat, 10 Oct 2009 17:07:16 +0000
Subject: [pcf] Fix a bug in the nprops truncation, Gentoo bug #288357.

---
diff --git a/ChangeLog b/ChangeLog
index 3363b90..49f0d97 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,9 @@
+2009-10-10  suzuki toshiya  <mpsuzuki@hiroshima-u.ac.jp>
+
+	* src/pcf/pcfread.c (pcf_get_properties): Fix a bug in the nprops
+	truncation.  Reported by Martin von Gagern and Peter Volkov.
+	https://bugs.gentoo.org/288357 and https://bugs.gentoo.org/288256
+
 2009-10-06  Werner Lemberg  <wl@gnu.org>
 
 	* Version 2.3.10 released.
diff --git a/src/pcf/pcfread.c b/src/pcf/pcfread.c
index a60505b..08becf9 100644
--- a/src/pcf/pcfread.c
+++ b/src/pcf/pcfread.c
@@ -436,7 +436,7 @@ THE SOFTWARE.
     FT_TRACE4(( "  nprop = %d (truncate %d props)\n",
                 (int)nprops, nprops - (int)nprops ));
 
-    nprops = nprops - (int)nprops;
+    nprops = (int)nprops;
 
     /* rough estimate */
     if ( nprops > size / PCF_PROPERTY_SIZE )
--
cgit v0.8.2.1
