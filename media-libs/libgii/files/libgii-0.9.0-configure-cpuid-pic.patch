--- acinclude.m4.orig	2006-08-07 15:07:00.000000000 +0200
+++ acinclude.m4	2006-08-07 15:07:24.000000000 +0200
@@ -4610,7 +4610,7 @@
 AC_DEFUN([AC_CC_CAN_CPUID],
 [AC_CACHE_CHECK([whether $CC can assemble cpuid instruction], ac_cc_can_cpuid,
         [ AC_TRY_LINK(,[unsigned long a,b,c,d,in; 
-	asm("cpuid": "=a" (a), "=b" (b), "=c" (c), "=d" (d) : "a" (in));
+	asm("pushl %%ebx; cpuid; movl %%ebx,%2; popl %%ebx": "=a" (a), "=r" (b), "=c" (c), "=d" (d) : "a" (in));
 	return d;],
 	ac_cc_can_cpuid="yes", ac_cc_can_cpuid="no")])
 	if test "x$ac_cc_can_cpuid" = "xyes"; then
