diff -ur libgii-1.0.2.orig/acinclude.m4 libgii-1.0.2/acinclude.m4
--- libgii-1.0.2.orig/acinclude.m4	2007-01-26 22:06:57.000000000 +0200
+++ libgii-1.0.2/acinclude.m4	2007-03-30 22:06:16.000000000 +0300
@@ -8069,7 +8069,7 @@
 	#ifdef _MSC_VER
 	__asm cpuid
 	#else
-	asm("cpuid": "=a" (a), "=b" (b), "=c" (c), "=d" (d) : "a" (in));
+	asm("pushl %%ebx; cpuid; movl %%ebx,%2; popl %%ebx": "=a" (a), "=r" (b), "=c" (c), "=d" (d) : "a" (in));
 	#endif
 	return d;],
 	ggi_cv_cc_can_cpuid="yes", ggi_cv_cc_can_cpuid="no")])
