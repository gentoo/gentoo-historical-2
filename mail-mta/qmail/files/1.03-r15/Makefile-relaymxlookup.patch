--- qmail-1.03.orig/Makefile	2004-12-15 22:35:11.000000000 +0100
+++ qmail-1.03/Makefile	2004-12-15 22:44:26.008337731 +0100
@@ -1450,11 +1450,12 @@
 load qmail-qmtpd.o rcpthosts.o control.o constmap.o received.o \
 date822fmt.o now.o qmail.o cdb.a fd.a wait.a datetime.a open.a \
 getln.a sig.a case.a env.a stralloc.a alloc.a substdio.a error.a \
-str.a fs.a auto_qmail.o
+str.a fs.a auto_qmail.o dns.o ip.h ipalloc.h ipme.h byte_diff.o
 	./load qmail-qmtpd rcpthosts.o control.o constmap.o \
 	received.o date822fmt.o now.o qmail.o cdb.a fd.a wait.a \
 	datetime.a open.a getln.a sig.a case.a env.a stralloc.a \
-	alloc.a substdio.a error.a str.a fs.a auto_qmail.o 
+	alloc.a substdio.a error.a fs.a auto_qmail.o dns.o \
+	`cat dns.lib` ip.o ipalloc.o ipme.o byte_diff.o str.a
 
 qmail-qmtpd.0: \
 qmail-qmtpd.8
@@ -1617,13 +1618,13 @@
 timeoutwrite.o ip.o ipme.o ipalloc.o control.o constmap.o received.o \
 date822fmt.o now.o qmail.o cdb.a fd.a wait.a datetime.a getln.a \
 open.a sig.a case.a env.a stralloc.a alloc.a strerr.a substdio.a error.a str.a \
-fs.a auto_qmail.o base64.o socket.lib
+fs.a auto_qmail.o base64.o socket.lib dns.o ip.h ipalloc.h
 	./load qmail-smtpd qregex.o rcpthosts.o commands.o timeoutread.o \
 	timeoutwrite.o ip.o ipme.o ipalloc.o control.o constmap.o \
 	received.o date822fmt.o now.o qmail.o cdb.a fd.a wait.a \
 	datetime.a getln.a open.a sig.a case.a env.a stralloc.a \
-	alloc.a strerr.a substdio.a error.a str.a fs.a auto_qmail.o base64.o  `cat \
-	socket.lib` -lssl -lcrypto
+	alloc.a strerr.a substdio.a error.a fs.a auto_qmail.o base64.o  `cat \
+	socket.lib` -lssl -lcrypto dns.o str.a `cat dns.lib`
 
 qmail-smtpd.0: \
 qmail-smtpd.8
@@ -1760,7 +1761,7 @@
 
 rcpthosts.o: \
 compile rcpthosts.c cdb.h uint32.h byte.h open.h error.h control.h \
-constmap.h stralloc.h gen_alloc.h rcpthosts.h
+constmap.h stralloc.h gen_alloc.h rcpthosts.h dns.h ipalloc.h ipme.h
 	./compile rcpthosts.c
 
 qregex.o: \
